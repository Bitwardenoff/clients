"use strict";(self.webpackChunk_bitwarden_web_vault=self.webpackChunk_bitwarden_web_vault||[]).push([[700],{22089:(e,t,n)=>{n.d(t,{i:()=>f});var i=n(98645),o=n(77494),c=n(24852),s=n(56965),r=n(64751),a=n(32100),u=n(31131),l=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class d{constructor(e,t,n,o,c,s){this.modalRef=e,this.config=t,this.userVerificationService=n,this.formBuilder=o,this.platformUtilsService=c,this.i18nService=s,this.confirmDescription=this.config.data.confirmDescription,this.confirmButtonText=this.config.data.confirmButtonText,this.modalTitle=this.config.data.modalTitle,this.secret=new i.NI}submit(){return l(this,void 0,void 0,(function*(){try{yield this.userVerificationService.verifyUser(this.secret.value)}catch(e){return void this.platformUtilsService.showToast("error",this.i18nService.t("error"),this.i18nService.t("invalidMasterPassword"))}this.modalRef.close(!0)}))}}d.ɵfac=function(e){return new(e||d)(c.Y36(s.b),c.Y36(o.u),c.Y36(r.i),c.Y36(i.qu),c.Y36(a.P),c.Y36(u.D))},d.ɵdir=c.lG2({type:d});var p=n(81974),h=n(35094),g=n(19419),v=n(17404);class f extends d{}f.ɵfac=function(){let e;return function(t){return(e||(e=c.n5z(f)))(t||f)}}(),f.ɵcmp=c.Xpm({type:f,selectors:[["ng-component"]],features:[c.qOj],decls:41,vars:15,consts:[["role","dialog","aria-modal","true","aria-labelledby","confirmUserTitle",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content",3,"ngSubmit"],["form",""],["id","modalTitle | i18n ",1,"tw-my-6","tw-px-3.5","tw-font-semibold"],[1,"tw-border-0","tw-border-t","tw-border-solid","tw-border-secondary-300","tw-p-3.5"],[1,"tw-p-3.5"],["ngDefaultControl","","name","secret",3,"formControl"],[1,"tw-border-0","tw-border-t","tw-border-solid","tw-border-secondary-300","tw-bg-background-alt","tw-p-3.5"],["bitButton","","buttonType","primary","type","submit","appBlurClick",""],["bitButton","","buttonType","secondary","data-dismiss","modal"]],template:function(e,t){1&e&&(c._uU(0,"\n"),c._uU(1,"\n"),c.TgZ(2,"div",0),c._uU(3,"\n  "),c.TgZ(4,"div",1),c._uU(5,"\n    "),c.TgZ(6,"form",2,3),c.NdJ("ngSubmit",(function(){return t.submit()})),c._uU(8,"\n      "),c.TgZ(9,"h2",4),c._uU(10),c.ALo(11,"uppercase"),c.ALo(12,"i18n"),c.qZA(),c._uU(13,"\n      "),c.TgZ(14,"div",5),c._uU(15),c.ALo(16,"i18n"),c.qZA(),c._uU(17,"\n      "),c.TgZ(18,"div",6),c._uU(19,"\n        "),c.TgZ(20,"app-user-verification",7),c._uU(21,"\n        "),c.qZA(),c._uU(22,"\n      "),c.qZA(),c._uU(23,"\n      "),c.TgZ(24,"div",8),c._uU(25,"\n        "),c.TgZ(26,"button",9),c._uU(27,"\n          "),c.TgZ(28,"span"),c._uU(29),c.ALo(30,"i18n"),c.qZA(),c._uU(31,"\n        "),c.qZA(),c._uU(32,"\n        "),c.TgZ(33,"button",10),c._uU(34),c.ALo(35,"i18n"),c.qZA(),c._uU(36,"\n      "),c.qZA(),c._uU(37,"\n    "),c.qZA(),c._uU(38,"\n  "),c.qZA(),c._uU(39,"\n"),c.qZA(),c._uU(40,"\n")),2&e&&(c.xp6(10),c.hij("\n        ",c.lcZ(11,5,c.lcZ(12,7,t.modalTitle)),"\n      "),c.xp6(5),c.hij("\n        ",c.lcZ(16,9,t.confirmDescription),"\n      "),c.xp6(5),c.Q6J("formControl",t.secret),c.xp6(9),c.Oqu(c.lcZ(30,11,t.confirmButtonText)),c.xp6(5),c.hij("\n          ",c.lcZ(35,13,"cancel"),"\n        "))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.F,i.oH,p.r,h.W,g.gd,v.C],encapsulation:2})},55700:(e,t,n)=>{n.r(t),n.d(t,{SecretsManagerModule:()=>Ds});var i=n(71146),o=n(73650),c=n(19419),s=n(25158),r=n(41938),a=n(36903),u=n(24852);class l{}l.ɵfac=function(e){return new(e||l)},l.ɵmod=u.oAB({type:l}),l.ɵinj=u.cJS({imports:[c.ez,a.m,r.v,o.U8,s.Bz]});var d=n(8229);class p{}p.ɵfac=function(e){return new(e||p)},p.ɵmod=u.oAB({type:p}),p.ɵinj=u.cJS({imports:[d.m,l]});var h=n(39639),g=n(5261);class v{}v.ɵfac=function(e){return new(e||v)},v.ɵmod=u.oAB({type:v}),v.ɵinj=u.cJS({imports:[c.ez,g.Q]});var f=n(18376),m=n(85915);class w{}w.ɵfac=function(e){return new(e||w)},w.ɵmod=u.oAB({type:w}),w.ɵinj=u.cJS({imports:[i.m,m.O,h.q,f.WO,v,i.m,v]});var A=n(78493),U=n(47064),_=n(87475);class y{ngOnInit(){document.body.classList.remove("layout_frontend")}}y.ɵfac=function(e){return new(e||y)},y.ɵcmp=u.Xpm({type:y,selectors:[["sm-layout"]],decls:13,vars:0,consts:[[1,"tw-flex","tw-w-full"],[1,"tw-fixed","tw-max-h-screen","tw-min-h-screen","tw-w-60","tw-overflow-auto","tw-bg-background-alt3"],["name","sidebar"],[1,"tw-ml-60","tw-min-h-screen","tw-min-w-0","tw-flex-1","tw-p-6"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"nav",1),u._uU(3,"\n    "),u._UZ(4,"router-outlet",2),u._uU(5,"\n  "),u.qZA(),u._uU(6,"\n  "),u.TgZ(7,"main",3),u._uU(8,"\n    "),u._UZ(9,"router-outlet"),u._uU(10,"\n  "),u.qZA(),u._uU(11,"\n"),u.qZA(),u._uU(12,"\n"))},dependencies:[s.lC],encapsulation:2});var Z=n(92786),b=n(58691);const x=n(66997).W4`
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 580 104" fill="none"><path fill="#fff" d="M102.539 52.27c0 28.315-22.954 51.269-51.27 51.269C22.955 103.539 0 80.585 0 52.269 0 23.955 22.954 1 51.27 1c28.315 0 51.269 22.954 51.269 51.27Z"/><path fill="#175DDC" fill-rule="evenodd" d="M75.971 26.765c-.516-.49-1.111-.777-1.786-.777H28.39c-.675 0-1.31.287-1.786.777-.516.49-.754 1.145-.754 1.84v31.47c0 2.371.437 4.66 1.31 6.95.873 2.288 1.984 4.332 3.294 6.13s2.897 3.515 4.682 5.232a62.036 62.036 0 0 0 5 4.25 82.731 82.731 0 0 0 4.802 3.188c1.667.981 2.857 1.676 3.572 2.003.714.368 1.27.613 1.706.817a2.26 2.26 0 0 0 1.032.246 2.26 2.26 0 0 0 1.032-.246c.436-.204.992-.45 1.706-.817.715-.368 1.905-1.022 3.572-2.003a54.848 54.848 0 0 0 4.801-3.188c1.548-1.103 3.215-2.534 5.04-4.25 1.826-1.717 3.373-3.434 4.683-5.232 1.31-1.798 2.42-3.842 3.294-6.13.912-2.29 1.31-4.62 1.31-6.95v-31.47c.04-.695-.239-1.309-.715-1.84Zm-5.913 33.597c0 11.403-18.77 21.172-18.77 21.172V32.732h18.77v27.63Z" clip-rule="evenodd"/><path fill="#fff" d="M142.208 70.81c-2.804 0-5.243-.511-7.319-1.533-2.075-1.023-3.678-2.447-4.806-4.272-1.129-1.826-1.694-3.943-1.694-6.353h4.807c0 1.497.346 2.884 1.038 4.162.692 1.241 1.693 2.246 3.004 3.012 1.347.73 3.004 1.096 4.97 1.096 2.585 0 4.588-.621 6.008-1.862 1.42-1.242 2.13-2.794 2.13-4.656 0-1.533-.327-2.756-.983-3.669-.655-.95-1.547-1.716-2.676-2.3-1.092-.585-2.367-1.096-3.823-1.534a126.43 126.43 0 0 1-4.479-1.479c-2.95-1.022-5.134-2.281-6.555-3.778-1.42-1.534-2.13-3.524-2.13-5.97-.036-2.045.437-3.852 1.42-5.422.984-1.607 2.367-2.848 4.151-3.724 1.821-.913 3.969-1.37 6.446-1.37 2.439 0 4.551.457 6.335 1.37 1.821.913 3.223 2.172 4.206 3.779 1.02 1.606 1.548 3.432 1.584 5.476h-4.806c0-1.058-.274-2.099-.82-3.121-.546-1.06-1.383-1.917-2.512-2.574-1.093-.658-2.476-.986-4.151-.986-2.076-.037-3.787.493-5.135 1.588-1.31 1.095-1.966 2.61-1.966 4.546 0 1.643.455 2.903 1.366 3.779.946.876 2.257 1.606 3.932 2.19 1.675.548 3.605 1.187 5.79 1.917 1.821.657 3.459 1.424 4.916 2.3 1.456.877 2.585 2.009 3.386 3.396.838 1.388 1.256 3.158 1.256 5.313 0 1.825-.473 3.56-1.42 5.203-.946 1.606-2.385 2.92-4.315 3.943-1.893 1.022-4.278 1.533-7.155 1.533ZM172.42 70.81c-2.586 0-4.88-.584-6.882-1.752-2.003-1.205-3.587-2.867-4.752-4.984-1.129-2.118-1.694-4.619-1.694-7.503 0-2.848.565-5.331 1.694-7.449 1.128-2.154 2.694-3.815 4.697-4.983 2.039-1.205 4.388-1.808 7.046-1.808 2.622 0 4.879.603 6.773 1.807 1.93 1.169 3.404 2.72 4.424 4.656a13.201 13.201 0 0 1 1.529 6.243c0 .402-.018.803-.054 1.205v1.37h-21.575c.109 2.08.582 3.815 1.42 5.202.874 1.351 1.948 2.373 3.222 3.067a8.754 8.754 0 0 0 4.152 1.04c1.893 0 3.477-.437 4.751-1.314 1.275-.876 2.203-2.063 2.786-3.56h4.533c-.728 2.52-2.13 4.62-4.205 6.299-2.039 1.643-4.661 2.464-7.865 2.464Zm0-24.59c-2.185 0-4.133.675-5.845 2.026-1.675 1.314-2.64 3.25-2.895 5.805h17.042c-.11-2.446-.947-4.363-2.513-5.75-1.566-1.388-3.495-2.081-5.789-2.081ZM202.697 70.81c-2.585 0-4.916-.584-6.991-1.752-2.039-1.205-3.66-2.867-4.861-4.984-1.166-2.154-1.748-4.655-1.748-7.503s.582-5.331 1.748-7.449c1.201-2.154 2.822-3.815 4.861-4.983 2.075-1.205 4.406-1.808 6.991-1.808 3.204 0 5.899.84 8.084 2.52 2.221 1.679 3.623 3.924 4.206 6.736h-4.698c-.364-1.68-1.256-2.976-2.676-3.889-1.42-.949-3.077-1.424-4.97-1.424-1.53 0-2.968.384-4.315 1.15-1.348.767-2.44 1.917-3.278 3.45-.837 1.534-1.256 3.433-1.256 5.697 0 2.263.419 4.162 1.256 5.696.838 1.533 1.93 2.701 3.278 3.505a8.584 8.584 0 0 0 4.315 1.15c1.893 0 3.55-.457 4.97-1.37 1.42-.949 2.312-2.282 2.676-3.998h4.698c-.547 2.739-1.93 4.966-4.152 6.682-2.221 1.716-4.934 2.574-8.138 2.574ZM220.302 70.153V42.988h4.151l.382 5.203c.838-1.789 2.112-3.213 3.823-4.272 1.712-1.058 3.824-1.588 6.336-1.588v4.82h-1.256c-1.602 0-3.077.292-4.424.876-1.347.548-2.422 1.497-3.223 2.848-.801 1.35-1.201 3.213-1.201 5.586v13.692h-4.588ZM250.218 70.81c-2.585 0-4.879-.584-6.882-1.752-2.003-1.205-3.587-2.867-4.752-4.984-1.129-2.118-1.693-4.619-1.693-7.503 0-2.848.564-5.331 1.693-7.449 1.129-2.154 2.695-3.815 4.698-4.983 2.039-1.205 4.387-1.808 7.045-1.808 2.622 0 4.88.603 6.773 1.807 1.93 1.169 3.405 2.72 4.424 4.656 1.02 1.935 1.53 4.016 1.53 6.243 0 .402-.018.803-.055 1.205v1.37h-21.575c.11 2.08.583 3.815 1.421 5.202.874 1.351 1.948 2.373 3.222 3.067a8.753 8.753 0 0 0 4.151 1.04c1.894 0 3.478-.437 4.752-1.314 1.275-.876 2.203-2.063 2.786-3.56h4.533c-.728 2.52-2.13 4.62-4.206 6.299-2.039 1.643-4.66 2.464-7.865 2.464Zm0-24.59c-2.185 0-4.133.675-5.844 2.026-1.675 1.314-2.64 3.25-2.895 5.805h17.041c-.109-2.446-.946-4.363-2.512-5.75-1.566-1.388-3.496-2.081-5.79-2.081ZM277.841 70.153c-2.476 0-4.424-.603-5.844-1.807-1.42-1.205-2.13-3.378-2.13-6.518V46.877h-4.698v-3.889h4.698l.601-6.517h3.987v6.517h7.974v3.889h-7.974v14.951c0 1.716.346 2.885 1.038 3.505.691.585 1.911.877 3.659.877h2.84v3.943h-4.151ZM297.544 70.81c-3.241 0-5.936-.821-8.084-2.464-2.149-1.643-3.405-3.87-3.769-6.682h4.697c.292 1.424 1.038 2.665 2.24 3.724 1.238 1.022 2.895 1.534 4.97 1.534 1.93 0 3.35-.402 4.26-1.205.911-.84 1.366-1.826 1.366-2.958 0-1.643-.601-2.738-1.803-3.286-1.165-.547-2.822-1.04-4.97-1.478a28.114 28.114 0 0 1-4.369-1.26c-1.457-.548-2.677-1.315-3.66-2.3-.983-1.023-1.475-2.355-1.475-3.998 0-2.373.874-4.309 2.622-5.806 1.784-1.533 4.188-2.3 7.21-2.3 2.876 0 5.225.73 7.046 2.19 1.857 1.425 2.931 3.47 3.222 6.135h-4.533c-.182-1.388-.783-2.465-1.803-3.231-.983-.804-2.312-1.205-3.987-1.205-1.638 0-2.913.346-3.823 1.04-.874.694-1.311 1.607-1.311 2.739 0 1.095.564 1.953 1.693 2.574 1.165.62 2.731 1.15 4.697 1.588 1.675.365 3.259.821 4.752 1.37 1.53.51 2.768 1.295 3.714 2.354.984 1.022 1.475 2.52 1.475 4.491.037 2.446-.892 4.473-2.785 6.08-1.857 1.57-4.388 2.354-7.592 2.354ZM327.019 70.153V31.816h5.353l13.764 26.726 13.655-26.726h5.407v38.337h-4.588V40.031l-12.781 24.645h-3.441l-12.781-24.59v30.067h-4.588ZM380.911 70.81c-2.258 0-4.133-.383-5.626-1.15-1.493-.767-2.604-1.789-3.332-3.067a8.266 8.266 0 0 1-1.092-4.162c0-2.775 1.056-4.911 3.168-6.408 2.112-1.497 4.988-2.245 8.63-2.245h7.319v-.33c0-2.372-.619-4.161-1.857-5.366-1.238-1.242-2.895-1.862-4.971-1.862-1.784 0-3.332.456-4.642 1.369-1.275.876-2.076 2.172-2.404 3.888h-4.697c.182-1.971.838-3.633 1.966-4.983 1.166-1.352 2.604-2.374 4.315-3.068 1.712-.73 3.532-1.095 5.462-1.095 3.787 0 6.627 1.022 8.521 3.067 1.93 2.008 2.895 4.692 2.895 8.05v16.705h-4.097l-.273-4.874c-.765 1.533-1.893 2.848-3.386 3.943-1.457 1.059-3.423 1.588-5.899 1.588Zm.71-3.888c1.748 0 3.241-.457 4.479-1.37a8.66 8.66 0 0 0 2.895-3.56c.655-1.46.983-2.993.983-4.6v-.055h-6.937c-2.695 0-4.606.475-5.735 1.424-1.092.913-1.639 2.063-1.639 3.45 0 1.425.51 2.575 1.53 3.451 1.056.84 2.53 1.26 4.424 1.26ZM400.356 70.153V42.988h4.151l.273 4.875a9.86 9.86 0 0 1 3.769-4.053c1.639-.986 3.496-1.479 5.571-1.479 3.205 0 5.754.986 7.647 2.958 1.93 1.935 2.895 4.929 2.895 8.981v15.883h-4.588v-15.39c0-5.659-2.331-8.489-6.991-8.489-2.331 0-4.279.858-5.845 2.575-1.529 1.679-2.294 4.089-2.294 7.229v14.075h-4.588ZM439.533 70.81c-2.258 0-4.133-.383-5.626-1.15-1.493-.767-2.603-1.789-3.332-3.067a8.266 8.266 0 0 1-1.092-4.162c0-2.775 1.056-4.911 3.168-6.408 2.112-1.497 4.988-2.245 8.63-2.245h7.319v-.33c0-2.372-.619-4.161-1.857-5.366-1.238-1.242-2.895-1.862-4.971-1.862-1.784 0-3.331.456-4.642 1.369-1.275.876-2.076 2.172-2.404 3.888h-4.697c.182-1.971.838-3.633 1.966-4.983 1.166-1.352 2.604-2.374 4.315-3.068 1.712-.73 3.532-1.095 5.462-1.095 3.787 0 6.627 1.022 8.521 3.067 1.93 2.008 2.895 4.692 2.895 8.05v16.705h-4.097l-.273-4.874c-.764 1.533-1.893 2.848-3.386 3.943-1.457 1.059-3.423 1.588-5.899 1.588Zm.71-3.888c1.748 0 3.241-.457 4.479-1.37a8.66 8.66 0 0 0 2.895-3.56c.655-1.46.983-2.993.983-4.6v-.055h-6.937c-2.694 0-4.606.475-5.735 1.424-1.092.913-1.639 2.063-1.639 3.45 0 1.425.51 2.575 1.53 3.451 1.056.84 2.531 1.26 4.424 1.26ZM469.684 61.61c-1.53 0-2.931-.202-4.206-.603l-2.731 2.574c.401.292.892.548 1.475.767.619.182 1.493.365 2.622.547 1.128.146 2.712.31 4.751.493 3.642.256 6.245 1.096 7.811 2.52 1.566 1.424 2.349 3.286 2.349 5.586 0 1.57-.437 3.067-1.311 4.49-.838 1.425-2.149 2.593-3.933 3.506-1.748.913-4.005 1.369-6.773 1.369-2.439 0-4.606-.329-6.499-.986-1.894-.62-3.369-1.588-4.425-2.903-1.055-1.277-1.583-2.902-1.583-4.874 0-1.022.273-2.136.819-3.34.546-1.169 1.566-2.282 3.059-3.341a13.725 13.725 0 0 1-2.076-1.041 13.173 13.173 0 0 1-1.529-1.314V63.8l4.642-4.6c-2.148-1.826-3.222-4.236-3.222-7.23 0-1.789.418-3.414 1.256-4.874.837-1.46 2.057-2.61 3.66-3.45 1.602-.877 3.55-1.315 5.844-1.315 1.566 0 2.986.22 4.26.657h9.995v3.45l-5.079.22c1.056 1.533 1.584 3.304 1.584 5.312 0 1.79-.437 3.414-1.311 4.874-.838 1.461-2.057 2.63-3.66 3.506-1.565.84-3.495 1.26-5.789 1.26Zm0-3.78c1.93 0 3.459-.493 4.588-1.478 1.165-1.023 1.748-2.483 1.748-4.382 0-1.862-.583-3.286-1.748-4.272-1.129-1.022-2.658-1.533-4.588-1.533-1.967 0-3.532.511-4.698 1.533-1.128.986-1.693 2.41-1.693 4.272 0 1.899.565 3.36 1.693 4.382 1.166.985 2.731 1.478 4.698 1.478Zm-7.975 15.828c0 1.826.765 3.177 2.294 4.053 1.53.913 3.441 1.37 5.735 1.37 2.258 0 4.06-.494 5.408-1.48 1.383-.986 2.075-2.3 2.075-3.943 0-1.168-.473-2.19-1.42-3.067-.947-.84-2.694-1.332-5.243-1.479-2.003-.146-3.733-.328-5.189-.547-1.493.803-2.476 1.661-2.95 2.574-.473.95-.71 1.789-.71 2.52ZM499.136 70.81c-2.585 0-4.879-.584-6.882-1.752-2.003-1.205-3.587-2.867-4.752-4.984-1.129-2.118-1.693-4.619-1.693-7.503 0-2.848.564-5.331 1.693-7.449 1.129-2.154 2.695-3.815 4.697-4.983 2.04-1.205 4.388-1.808 7.046-1.808 2.622 0 4.88.603 6.773 1.807 1.93 1.169 3.405 2.72 4.424 4.656 1.02 1.935 1.53 4.016 1.53 6.243 0 .402-.019.803-.055 1.205v1.37h-21.575c.11 2.08.583 3.815 1.42 5.202.874 1.351 1.949 2.373 3.223 3.067a8.753 8.753 0 0 0 4.151 1.04c1.894 0 3.478-.437 4.752-1.314 1.274-.876 2.203-2.063 2.786-3.56h4.533c-.728 2.52-2.13 4.62-4.206 6.299-2.039 1.643-4.661 2.464-7.865 2.464Zm0-24.59c-2.185 0-4.133.675-5.844 2.026-1.675 1.314-2.64 3.25-2.895 5.805h17.041c-.109-2.446-.947-4.363-2.512-5.75-1.566-1.388-3.496-2.081-5.79-2.081ZM516.96 70.153V42.988h4.151l.383 5.203c.837-1.789 2.112-3.213 3.823-4.272 1.712-1.058 3.824-1.588 6.336-1.588v4.82h-1.256c-1.602 0-3.077.292-4.424.876-1.348.548-2.422 1.497-3.223 2.848-.801 1.35-1.202 3.213-1.202 5.586v13.692h-4.588Z"/></svg>
`;var S=n(22221);class T{constructor(){this.variant="default",this.treeDepth=0,this.hideActiveStyles=!1,this.mainContentClicked=new u.vpe}}T.ɵfac=function(e){return new(e||T)},T.ɵdir=u.lG2({type:T,inputs:{text:"text",ariaLabel:"ariaLabel",icon:"icon",route:"route",variant:"variant",treeDepth:"treeDepth",hideActiveStyles:"hideActiveStyles"},outputs:{mainContentClicked:"mainContentClicked"}});var I=n(59554),P=n(21656);const q=function(e){return{"tw-w-0":e}};function j(e,t){if(1&e&&(u.TgZ(0,"div",10),u._uU(1,"\n      "),u._UZ(2,"button",11),u._uU(3,"\n    "),u.qZA()),2&e){const e=u.oxw();u.Q6J("ngClass",u.VKq(2,q,"tree"!==e.variant)),u.xp6(2),u.Q6J("bitIconButton","bwi-angle-down")}}function k(e,t){1&e&&u.GkF(0)}function C(e,t){if(1&e&&(u._uU(0,"\n      "),u._UZ(1,"i"),u.TgZ(2,"span",10),u._uU(3),u.qZA(),u._uU(4,"\n    ")),2&e){const e=u.oxw();u.xp6(1),u.Gre("bwi bwi-fw tw-text-alt2 tw-mx-1 ",e.icon,""),u.xp6(1),u.Q6J("ngClass",e.showActiveStyles?"tw-font-bold":"tw-font-semibold"),u.xp6(1),u.Oqu(e.text)}}function L(e,t){1&e&&u.GkF(0)}function O(e,t){if(1&e){const e=u.EpF();u._uU(0,"\n      "),u._uU(1,"\n      "),u._uU(2,"\n      "),u.TgZ(3,"a",12),u.NdJ("isActiveChange",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.setActive(t))}))("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.mainContentClicked.emit())})),u._uU(4,"\n        "),u.YNc(5,L,1,0,"ng-container",13),u._uU(6,"\n      "),u.qZA(),u._uU(7,"\n    ")}if(2&e){const e=u.oxw(),t=u.MAs(18);u.xp6(3),u.Q6J("routerLink",e.route)("routerLinkActiveOptions",e.rlaOptions)("ariaCurrentWhenActive","page"),u.uIk("aria-label",e.ariaLabel||e.text),u.xp6(2),u.Q6J("ngTemplateOutlet",t)}}function D(e,t){1&e&&u.GkF(0)}function J(e,t){if(1&e){const e=u.EpF();u._uU(0,"\n      "),u._uU(1,"\n      "),u.TgZ(2,"button",14),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.mainContentClicked.emit())})),u._uU(3,"\n        "),u.YNc(4,D,1,0,"ng-container",13),u._uU(5,"\n      "),u.qZA(),u._uU(6,"\n    ")}if(2&e){u.oxw();const e=u.MAs(18);u.xp6(4),u.Q6J("ngTemplateOutlet",e)}}const N=[[["","slot-start",""]],[["","slot-end",""]]],z=function(e,t){return[e,t]},Y=function(e){return{"padding-left":e}},E=function(e){return[e]};class M extends T{constructor(){super(...arguments),this._active=!1,this.rlaOptions={paths:"subset",queryParams:"exact",fragment:"ignored",matrixParams:"ignored"},this.focusVisibleWithin$=new I.X(!1),this.fvwStyles$=this.focusVisibleWithin$.pipe((0,Z.U)((e=>e?"tw-z-10 tw-rounded tw-outline-none tw-ring tw-ring-text-alt2":"")))}setActive(e){this._active=e}get showActiveStyles(){return this._active&&!this.hideActiveStyles}set exactMatch(e){this.rlaOptions.paths=e?"exact":"subset"}onFocusIn(e){this.focusVisibleWithin$.next(e.matches(".fvw:focus-visible"))}onFocusOut(){this.focusVisibleWithin$.next(!1)}}M.ɵfac=function(){let e;return function(t){return(e||(e=u.n5z(M)))(t||M)}}(),M.ɵcmp=u.Xpm({type:M,selectors:[["bit-nav-item"]],hostBindings:function(e,t){1&e&&u.NdJ("focusin",(function(e){return t.onFocusIn(e.target)}))("focusout",(function(){return t.onFocusOut()}))},inputs:{exactMatch:"exactMatch"},features:[u.qOj],ngContentSelectors:["[slot-start]","[slot-end]"],decls:35,vars:16,consts:[[1,"tw-relative",3,"ngClass"],[1,"tw-relative","tw-flex","tw-items-center","tw-pr-4",3,"ngStyle","ngClass"],[1,"[&>*:focus-visible::before]:!tw-ring-text-alt2","[&>*:hover]:!tw-border-text-alt2","[&>*]:!tw-text-alt2"],["slotStart",""],[3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["anchorAndButtonContent",""],["isAnchor",""],["isButton",""],[1,"tw-flex","tw-gap-1","[&>*:focus-visible::before]:!tw-ring-text-alt2","[&>*:hover]:!tw-border-text-alt2","[&>*]:!tw-text-alt2"],[3,"ngClass"],["type","button","size","small","aria-hidden","true",1,"tw-invisible",3,"bitIconButton"],["routerLinkActive","",1,"fvw","tw-w-full","tw-overflow-hidden","tw-text-ellipsis","tw-whitespace-nowrap","tw-border-none","tw-bg-transparent","tw-p-0","tw-text-start","!tw-text-alt2","hover:tw-text-alt2","hover:tw-no-underline","focus:tw-outline-none","[&>:not(.bwi)]:hover:tw-underline",3,"routerLink","routerLinkActiveOptions","ariaCurrentWhenActive","isActiveChange","click"],[4,"ngTemplateOutlet"],["type","button",1,"fvw","tw-w-full","tw-overflow-hidden","tw-text-ellipsis","tw-whitespace-nowrap","tw-border-none","tw-bg-transparent","tw-p-0","tw-text-start","!tw-text-alt2","hover:tw-text-alt2","hover:tw-no-underline","focus:tw-outline-none","[&>:not(.bwi)]:hover:tw-underline",3,"click"]],template:function(e,t){if(1&e&&(u.F$t(N),u.TgZ(0,"div",0),u.ALo(1,"async"),u._uU(2,"\n  "),u.TgZ(3,"div",1),u._uU(4,"\n    "),u.TgZ(5,"div",2,3),u._uU(7,"\n      "),u.Hsn(8),u._uU(9,"\n    "),u.qZA(),u._uU(10,"\n    "),u._uU(11,"\n    "),u.YNc(12,j,4,4,"div",4),u._uU(13,"\n\n    "),u.YNc(14,k,1,0,"ng-container",5),u._uU(15,"\n\n    "),u._uU(16,"\n    "),u.YNc(17,C,5,5,"ng-template",null,6,u.W1O),u._uU(19,"\n\n    "),u._uU(20,"\n    "),u.YNc(21,O,8,5,"ng-template",null,7,u.W1O),u._uU(23,"\n\n    "),u._uU(24,"\n    "),u.YNc(25,J,7,1,"ng-template",null,8,u.W1O),u._uU(27,"\n\n    "),u.TgZ(28,"div",9),u._uU(29,"\n      "),u.Hsn(30,1),u._uU(31,"\n    "),u.qZA(),u._uU(32,"\n  "),u.qZA(),u._uU(33,"\n"),u.qZA(),u._uU(34,"\n")),2&e){const e=u.MAs(6),n=u.MAs(22),i=u.MAs(26);u.Q6J("ngClass",u.WLB(9,z,t.showActiveStyles?"tw-bg-background-alt4":"tw-bg-background-alt3",u.lcZ(1,7,t.fvwStyles$))),u.xp6(3),u.Q6J("ngStyle",u.VKq(12,Y,("tree"===t.variant?2.5:1)+1.5*t.treeDepth+"rem"))("ngClass",u.VKq(14,E,"tree"===t.variant?"tw-py-1":"tw-py-2")),u.xp6(9),u.Q6J("ngIf",0===e.childElementCount),u.xp6(2),u.Q6J("ngIf",t.route)("ngIfThen",n)("ngIfElse",i)}},dependencies:[c.mk,c.O5,c.tP,c.PC,P.Q,s.rH,s.Od,c.Ov],encapsulation:2});var Q=n(49399);const G=function(e,t){return[e,t]};function R(e,t){if(1&e){const e=u.EpF();u._uU(0,"\n    "),u.TgZ(1,"button",5),u.NdJ("click",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.toggle(t))})),u.ALo(2,"i18n"),u.ALo(3,"i18n"),u.qZA(),u._uU(4,"\n  ")}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("bitIconButton",e.open?"bwi-angle-up":"tree"===e.variant?"bwi-angle-right":"bwi-angle-down")("buttonType","main")("title",u.lcZ(2,6,"toggleCollapse")),u.uIk("aria-expanded",e.open.toString())("aria-controls",e.contentId)("aria-label",u.WLB(10,G,u.lcZ(3,8,"toggleCollapse"),e.text).join(" "))}}function B(e,t){1&e&&u.GkF(0)}function $(e,t){if(1&e&&(u.ynx(0,6),u._uU(1,"\n    "),u.YNc(2,B,1,0,"ng-container",7),u._uU(3,"\n  "),u.BQk()),2&e){u.oxw();const e=u.MAs(4);u.xp6(2),u.Q6J("ngTemplateOutlet",e)}}function F(e,t){1&e&&u.GkF(0)}function V(e,t){if(1&e&&(u.ynx(0,8),u._uU(1,"\n    "),u.YNc(2,F,1,0,"ng-container",7),u._uU(3,"\n  "),u.BQk()),2&e){u.oxw();const e=u.MAs(4);u.xp6(2),u.Q6J("ngTemplateOutlet",e)}}function K(e,t){if(1&e&&(u.TgZ(0,"div",9),u.ALo(1,"i18n"),u._uU(2,"\n  "),u.Hsn(3),u._uU(4,"\n"),u.qZA()),2&e){const e=u.oxw();u.uIk("id",e.contentId)("aria-label",u.WLB(4,G,e.text,u.lcZ(1,2,"submenu")).join(" "))}}class H extends T{constructor(){super(...arguments),this.contentId=Math.random().toString(36).substring(2),this.open=!1,this.openChange=new u.vpe}toggle(e){null==e||e.stopPropagation(),this.open=!this.open,this.openChange.emit(this.open)}initNestedStyles(){"tree"===this.variant&&[...this.nestedGroups,...this.nestedItems].forEach((e=>{e.treeDepth+=1}))}ngAfterContentInit(){this.initNestedStyles()}}H.ɵfac=function(){let e;return function(t){return(e||(e=u.n5z(H)))(t||H)}}(),H.ɵcmp=u.Xpm({type:H,selectors:[["bit-nav-group"]],contentQueries:function(e,t,n){if(1&e&&(u.Suo(n,H,5),u.Suo(n,M,5)),2&e){let e;u.iGM(e=u.CRH())&&(t.nestedGroups=e),u.iGM(e=u.CRH())&&(t.nestedItems=e)}},inputs:{open:"open",exactMatch:"exactMatch"},outputs:{openChange:"openChange"},features:[u.qOj],ngContentSelectors:["*"],decls:15,vars:10,consts:[[3,"text","icon","route","variant","treeDepth","ariaLabel","exactMatch","mainContentClicked"],["button",""],["slot-start","",4,"ngIf"],["slot-end","",4,"ngIf"],["role","group",4,"ngIf"],["type","button","size","small","aria-haspopup","true",1,"tw-ml-auto",3,"bitIconButton","buttonType","title","click"],["slot-start",""],[4,"ngTemplateOutlet"],["slot-end",""],["role","group"]],template:function(e,t){1&e&&(u.F$t(),u._uU(0,"\n"),u.TgZ(1,"bit-nav-item",0),u.NdJ("mainContentClicked",(function(){return t.toggle()}))("mainContentClicked",(function(){return t.mainContentClicked.emit()})),u._uU(2,"\n  "),u.YNc(3,R,5,13,"ng-template",null,1,u.W1O),u._uU(5,"\n\n  "),u._uU(6,"\n  "),u.YNc(7,$,4,1,"ng-container",2),u._uU(8,"\n  "),u.YNc(9,V,4,1,"ng-container",3),u._uU(10,"\n"),u.qZA(),u._uU(11,"\n\n"),u._uU(12,"\n"),u.YNc(13,K,5,7,"div",4),u._uU(14,"\n")),2&e&&(u.xp6(1),u.Q6J("text",t.text)("icon",t.icon)("route",t.route)("variant",t.variant)("treeDepth",t.treeDepth)("ariaLabel",t.ariaLabel)("exactMatch",t.exactMatch),u.xp6(6),u.Q6J("ngIf","tree"===t.variant),u.xp6(2),u.Q6J("ngIf","tree"!==t.variant),u.xp6(4),u.Q6J("ngIf",t.open))},dependencies:[c.O5,c.tP,P.Q,M,Q.C],encapsulation:2});var W=n(33031);class X{}X.ɵfac=function(e){return new(e||X)},X.ɵcmp=u.Xpm({type:X,selectors:[["bit-nav-divider"]],decls:2,vars:0,consts:[[1,"tw-h-px","tw-w-full","tw-bg-secondary-300"]],template:function(e,t){1&e&&(u._UZ(0,"div",0),u._uU(1,"\n"))},encapsulation:2});var ee=n(17404);const te=function(e,t){return[e,t]},ne=function(e){return["../",e]};function ie(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-nav-item",5),u.NdJ("mainContentClicked",(function(){u.CHM(e);const t=u.oxw(3);return u.KtG(t.toggle())})),u.ALo(1,"i18n"),u._uU(2,"\n    "),u.qZA()}if(2&e){const e=t.$implicit;u.Q6J("text",e.name)("ariaLabel",u.WLB(6,te,u.lcZ(1,4,"organization"),e.name).join(" "))("route",u.VKq(9,ne,e.id))("hideActiveStyles",!0)}}function oe(e,t){if(1&e&&(u.ynx(0),u._uU(1,"\n    "),u.YNc(2,ie,3,11,"bit-nav-item",4),u._uU(3,"\n  "),u.BQk()),2&e){const e=t.ngIf;u.xp6(2),u.Q6J("ngForOf",e)}}function ce(e,t){1&e&&(u._UZ(0,"bit-nav-item",6),u.ALo(1,"i18n")),2&e&&u.Q6J("text",u.lcZ(1,1,"newOrganization"))}function se(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-nav-group",1),u.NdJ("openChange",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.open=t)})),u.ALo(1,"i18n"),u._uU(2,"\n  "),u.YNc(3,oe,4,1,"ng-container",2),u.ALo(4,"async"),u._uU(5,"\n  "),u.YNc(6,ce,2,3,"bit-nav-item",3),u._uU(7,"\n  "),u._UZ(8,"bit-nav-divider"),u._uU(9,"\n"),u.qZA()}if(2&e){const e=t.ngIf,n=u.oxw();u.Q6J("text",e.name)("ariaLabel",u.WLB(11,te,u.lcZ(1,7,"organization"),e.name).join(" "))("route",u.VKq(14,ne,e.id))("open",n.open)("exactMatch",!0),u.xp6(3),u.Q6J("ngIf",u.lcZ(4,9,n.organizations$)),u.xp6(3),u.Q6J("ngIf",!n.hideNewButton)}}class re{constructor(e,t){this.route=e,this.organizationService=t,this.organizations$=this.organizationService.organizations$.pipe((0,Z.U)((e=>e.filter(this.filter).sort(((e,t)=>e.name.localeCompare(t.name)))))),this.activeOrganization$=(0,W.a)([this.route.paramMap,this.organizations$]).pipe((0,Z.U)((([e,t])=>t.find((t=>t.id===e.get("organizationId")))))),this.filter=()=>!0,this.open=!1,this.openChange=new u.vpe,this.hideNewButton=!1}toggle(e){null==e||e.stopPropagation(),this.open=!this.open,this.openChange.emit(this.open)}}function ae(e,t){1&e&&(u._UZ(0,"bit-nav-item",8),u.ALo(1,"i18n")),2&e&&u.Q6J("text",u.lcZ(1,1,"trash"))}function ue(e,t){1&e&&(u.TgZ(0,"bit-nav-group",9),u.ALo(1,"i18n"),u._uU(2,"\n  "),u._UZ(3,"bit-nav-item",10),u.ALo(4,"i18n"),u._uU(5,"\n  "),u._UZ(6,"bit-nav-item",11),u.ALo(7,"i18n"),u._uU(8,"\n"),u.qZA()),2&e&&(u.Q6J("text",u.lcZ(1,3,"settings")),u.xp6(3),u.Q6J("text",u.lcZ(4,5,"importData")),u.xp6(3),u.Q6J("text",u.lcZ(7,7,"exportData")))}re.ɵfac=function(e){return new(e||re)(u.Y36(s.gz),u.Y36(b.Mn))},re.ɵcmp=u.Xpm({type:re,selectors:[["org-switcher"]],inputs:{filter:"filter",open:"open",hideNewButton:"hideNewButton"},outputs:{openChange:"openChange"},decls:3,vars:3,consts:[["icon","bwi-business",3,"text","ariaLabel","route","open","exactMatch","openChange",4,"ngIf"],["icon","bwi-business",3,"text","ariaLabel","route","open","exactMatch","openChange"],[4,"ngIf"],["icon","bwi-plus","route","/create-organization",3,"text",4,"ngIf"],[3,"text","ariaLabel","route","hideActiveStyles","mainContentClicked",4,"ngFor","ngForOf"],[3,"text","ariaLabel","route","hideActiveStyles","mainContentClicked"],["icon","bwi-plus","route","/create-organization",3,"text"]],template:function(e,t){1&e&&(u.YNc(0,se,10,16,"bit-nav-group",0),u.ALo(1,"async"),u._uU(2,"\n")),2&e&&u.Q6J("ngIf",u.lcZ(1,1,t.activeOrganization$))},dependencies:[c.sg,c.O5,X,H,M,c.Ov,ee.C],encapsulation:2});class le{constructor(e,t){this.route=e,this.organizationService=t,this.logo=x,this.orgFilter=e=>e.canAccessSecretsManager,this.isAdmin$=this.route.params.pipe((0,Z.U)((e=>{var t;return null===(t=this.organizationService.get(e.organizationId))||void 0===t?void 0:t.isAdmin})))}}le.ɵfac=function(e){return new(e||le)(u.Y36(s.gz),u.Y36(b.Mn))},le.ɵcmp=u.Xpm({type:le,selectors:[["sm-navigation"]],decls:22,vars:18,consts:[["routerLink",".",1,"tw-m-5","tw-mt-7","tw-block"],[3,"icon"],[3,"filter","hideNewButton"],["icon","bwi-collection","route","projects",3,"text"],["icon","bwi-key","route","secrets",3,"text"],["icon","bwi-wrench","route","service-accounts",3,"text"],["icon","bwi-trash","route","trash",3,"text",4,"ngIf"],["icon","bwi-cog",3,"text",4,"ngIf"],["icon","bwi-trash","route","trash",3,"text"],["icon","bwi-cog",3,"text"],["route","settings/import",3,"text"],["route","settings/export",3,"text"]],template:function(e,t){1&e&&(u.TgZ(0,"a",0),u._uU(1,"\n  "),u._UZ(2,"bit-icon",1),u._uU(3,"\n"),u.qZA(),u._uU(4,"\n\n"),u._UZ(5,"org-switcher",2),u._uU(6,"\n"),u._UZ(7,"bit-nav-item",3),u.ALo(8,"i18n"),u._uU(9,"\n"),u._UZ(10,"bit-nav-item",4),u.ALo(11,"i18n"),u._uU(12,"\n"),u._UZ(13,"bit-nav-item",5),u.ALo(14,"i18n"),u._uU(15,"\n"),u.YNc(16,ae,2,3,"bit-nav-item",6),u.ALo(17,"async"),u._uU(18,"\n"),u.YNc(19,ue,9,9,"bit-nav-group",7),u.ALo(20,"async"),u._uU(21,"\n")),2&e&&(u.xp6(2),u.Q6J("icon",t.logo),u.xp6(3),u.Q6J("filter",t.orgFilter)("hideNewButton",!0),u.xp6(2),u.Q6J("text",u.lcZ(8,8,"projects")),u.xp6(3),u.Q6J("text",u.lcZ(11,10,"secrets")),u.xp6(3),u.Q6J("text",u.lcZ(14,12,"serviceAccounts")),u.xp6(3),u.Q6J("ngIf",u.lcZ(17,14,t.isAdmin$)),u.xp6(3),u.Q6J("ngIf",u.lcZ(20,16,t.isAdmin$)))},dependencies:[c.O5,s.rH,S.G,H,M,re,c.Ov,ee.C],encapsulation:2});class de{}de.ɵfac=function(e){return new(e||de)},de.ɵmod=u.oAB({type:de}),de.ɵinj=u.cJS({imports:[c.ez]});class pe{}pe.ɵfac=function(e){return new(e||pe)},pe.ɵmod=u.oAB({type:pe}),pe.ɵinj=u.cJS({imports:[i.m,de]});var he=n(54019),ge=n(72591),ve=n(68362),fe=n(53634),me=n(30359),we=n(12294),Ae=n(2097),Ue=n(65017),_e=n(98645),ye=n(81974),Ze=n(29465),be=n(18362),xe=n(54735),Se=n(50941),Te=n(26361);function Ie(e,t){if(1&e&&(u.TgZ(0,"tr",10),u._uU(1,"\n          "),u.TgZ(2,"td",5),u._uU(3),u.qZA(),u._uU(4,"\n          "),u.TgZ(5,"td",5),u._uU(6),u.qZA(),u._uU(7,"\n        "),u.qZA()),2&e){const e=t.$implicit;u.xp6(3),u.Oqu(e.name),u.xp6(3),u.Oqu(e.errorMessage)}}function Pe(e,t){if(1&e&&(u._uU(0,"\n        "),u.YNc(1,Ie,8,2,"tr",9),u._uU(2,"\n      ")),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.data.details)}}class qe{}class je{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){var e;if(!(this.data.title&&this.data.subTitle&&this.data.columnTitle&&this.data.message&&(null===(e=this.data.details)||void 0===e?void 0:e.length)>=1))throw this.dialogRef.close(),new Error("The bulk status dialog was not called with the appropriate operation values.")}}je.ɵfac=function(e){return new(e||je)(u.Y36(Ue.zj),u.Y36(Ue.Kt))},je.ɵcmp=u.Xpm({type:je,selectors:[["sm-bulk-status-dialog"]],decls:44,vars:19,consts:[["dialogSize","default"],["bitDialogTitle",""],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitDialogContent",""],["header",""],["bitCell",""],["body",""],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["bitButton","","buttonType","primary","bitDialogClose","","type","button"],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""]],template:function(e,t){1&e&&(u.TgZ(0,"bit-dialog",0),u._uU(1,"\n  "),u.ynx(2,1),u._uU(3,"\n    "),u.TgZ(4,"span"),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n    "),u.TgZ(8,"span",2),u._uU(9),u.ALo(10,"i18n"),u.qZA(),u._uU(11,"\n  "),u.BQk(),u._uU(12,"\n\n  "),u.TgZ(13,"div",3),u._uU(14),u.ALo(15,"i18n"),u.TgZ(16,"bit-table"),u._uU(17,"\n      "),u.ynx(18,4),u._uU(19,"\n        "),u.TgZ(20,"tr"),u._uU(21,"\n          "),u.TgZ(22,"th",5),u._uU(23),u.ALo(24,"i18n"),u.qZA(),u._uU(25,"\n          "),u.TgZ(26,"th",5),u._uU(27),u.ALo(28,"i18n"),u.qZA(),u._uU(29,"\n        "),u.qZA(),u._uU(30,"\n      "),u.BQk(),u._uU(31,"\n      "),u.YNc(32,Pe,3,1,"ng-template",6),u._uU(33,"\n    "),u.qZA(),u._uU(34,"\n  "),u.qZA(),u._uU(35,"\n\n  "),u.TgZ(36,"div",7),u._uU(37,"\n    "),u.TgZ(38,"button",8),u._uU(39),u.ALo(40,"i18n"),u.qZA(),u._uU(41,"\n  "),u.qZA(),u._uU(42,"\n"),u.qZA(),u._uU(43,"\n")),2&e&&(u.xp6(5),u.Oqu(u.lcZ(6,7,t.data.title)),u.xp6(4),u.AsE("\n      ",t.data.details.length,"\n      ",u.lcZ(10,9,t.data.subTitle),"\n    "),u.xp6(5),u.hij("\n    ",u.lcZ(15,11,t.data.message),"\n    "),u.xp6(9),u.Oqu(u.lcZ(24,13,t.data.columnTitle)),u.xp6(4),u.Oqu(u.lcZ(28,15,"error")),u.xp6(12),u.hij("\n      ",u.lcZ(40,17,"close"),"\n    "))},dependencies:[c.sg,ye.r,Ze.a,be.f,xe.a,Se.Y,Te.v,xe.f,ee.C],encapsulation:2});var ke=n(88982),Ce=n(42844);class Le{}class Oe{}class De{}var Je=n(58043);class Ne extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Name"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class ze extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Name"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class Ye extends ze{constructor(e){super(e),this.read=this.getResponseProperty("Read"),this.write=this.getResponseProperty("Write")}}var Ee=n(92785),Me=n(55602),Qe=n(26479),Ge=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class Re{constructor(e,t,n){this.cryptoService=e,this.apiService=t,this.encryptService=n,this._project=new he.x,this.project$=this._project.asObservable()}getByProjectId(e){return Ge(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/projects/"+e,null,!0,!0),n=new Ye(t);return yield this.createProjectPermissionDetailsView(n)}))}getProjects(e){return Ge(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/projects",null,!0,!0),n=new Ce.L(t,Ne);return yield this.createProjectsListView(e,n.data)}))}create(e,t){return Ge(this,void 0,void 0,(function*(){const n=yield this.getProjectRequest(e,t),i=yield this.apiService.send("POST","/organizations/"+e+"/projects",n,!0,!0),o=yield this.createProjectView(new ze(i));return this._project.next(o),o}))}update(e,t){return Ge(this,void 0,void 0,(function*(){const n=yield this.getProjectRequest(e,t),i=yield this.apiService.send("PUT","/projects/"+t.id,n,!0,!0);this._project.next(yield this.createProjectView(new ze(i)))}))}delete(e){return Ge(this,void 0,void 0,(function*(){const t=e.map((e=>e.id)),n=yield this.apiService.send("POST","/projects/delete",t,!0,!0);return this._project.next(null),n.data.map((t=>{const n=new qe;return n.id=t.id,n.name=e.find((e=>e.id==t.id)).name,n.errorMessage=t.error,n}))}))}getOrganizationKey(e){return Ge(this,void 0,void 0,(function*(){return yield this.cryptoService.getOrgKey(e)}))}getProjectRequest(e,t){return Ge(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e),i=new De;return i.name=yield this.encryptService.encrypt(t.name,n),i}))}createProjectView(e){return Ge(this,void 0,void 0,(function*(){const t=yield this.getOrganizationKey(e.organizationId),n=new Oe;return n.id=e.id,n.organizationId=e.organizationId,n.creationDate=e.creationDate,n.revisionDate=e.revisionDate,n.name=yield this.encryptService.decryptToUtf8(new ke._(e.name),t),n}))}createProjectPermissionDetailsView(e){return Ge(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},yield this.createProjectView(e)),{read:e.read,write:e.write})}))}createProjectsListView(e,t){return Ge(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e);return yield Promise.all(t.map((e=>Ge(this,void 0,void 0,(function*(){const t=new Le;return t.id=e.id,t.organizationId=e.organizationId,t.name=yield this.encryptService.decryptToUtf8(new ke._(e.name),n),t.creationDate=e.creationDate,t.revisionDate=e.revisionDate,t})))))}))}}Re.ɵfac=function(e){return new(e||Re)(u.LFG(Ee.$),u.LFG(Me.s),u.LFG(Qe.U))},Re.ɵprov=u.Yz7({token:Re,factory:Re.ɵfac,providedIn:"root"});var Be=n(31131),$e=n(32100),Fe=n(63610),Ve=n(46246),Ke=n(36338),He=n(24083),We=n(24637),Xe=n(11512),et=n(36179),tt=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function nt(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){const e=u.oxw();u.xp6(1),u.hij("\n          ",e.data.projects[0].name,"\n        ")}}function it(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"i18n"),u.BQk()),2&e){const e=u.oxw();u.xp6(1),u.AsE("\n          ",e.data.projects.length,"\n          ",u.lcZ(2,2,"projects"),"\n        ")}}class ot{constructor(e,t,n,i,o,c){this.dialogRef=e,this.data=t,this.projectService=n,this.i18nService=i,this.platformUtilsService=o,this.dialogService=c,this.formGroup=new _e.cw({confirmDelete:new _e.NI("",[this.matchConfirmationMessageValidator()])}),this.submit=()=>tt(this,void 0,void 0,(function*(){this.formGroup.markAllAsTouched(),this.formGroup.invalid||(yield this.delete(),this.dialogRef.close())}))}ngOnInit(){var e;if(!((null===(e=this.data.projects)||void 0===e?void 0:e.length)>=1))throw this.dialogRef.close(),new Error("The project delete dialog was not called with the appropriate operation values.")}get title(){return 1===this.data.projects.length?"deleteProject":"deleteProjects"}get dialogContent(){return 1===this.data.projects.length?this.i18nService.t("deleteProjectDialogMessage",this.data.projects[0].name):this.i18nService.t("deleteProjectsDialogMessage")}get dialogConfirmationLabel(){return this.i18nService.t("deleteProjectInputLabel",this.dialogConfirmationMessage)}delete(){return tt(this,void 0,void 0,(function*(){const e=yield this.projectService.delete(this.data.projects);if(e.find((e=>e.errorMessage)))return void this.openBulkStatusDialog(e.filter((e=>e.errorMessage)));const t=1===this.data.projects.length?"deleteProjectToast":"deleteProjectsToast";this.platformUtilsService.showToast("success",null,this.i18nService.t(t))}))}openBulkStatusDialog(e){this.dialogService.open(je,{data:{title:"deleteProjects",subTitle:"projects",columnTitle:"projectName",message:"bulkDeleteProjectsErrorMessage",details:e}})}get dialogConfirmationMessage(){var e,t;return 1===(null===(e=this.data.projects)||void 0===e?void 0:e.length)?this.i18nService.t("deleteProjectConfirmMessage",this.data.projects[0].name):this.i18nService.t("deleteProjectsConfirmMessage",null===(t=this.data.projects)||void 0===t?void 0:t.length.toString())}matchConfirmationMessageValidator(){return e=>this.dialogConfirmationMessage.toLowerCase()==e.value.toLowerCase()?null:{confirmationDoesntMatchError:{message:this.i18nService.t("smConfirmationRequired")}}}}ot.ɵfac=function(e){return new(e||ot)(u.Y36(Ue.zj),u.Y36(Ue.Kt),u.Y36(Re),u.Y36(Be.D),u.Y36($e.P),u.Y36(Fe.x))},ot.ɵcmp=u.Xpm({type:ot,selectors:[["sm-project-delete-dialog"]],decls:46,vars:18,consts:[[3,"formGroup","bitSubmit"],["dialogSize","small"],["bitDialogTitle",""],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],[4,"ngIf"],["bitDialogContent",""],["type","warning",3,"title"],["bitInput","","formControlName","confirmDelete"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","danger","bitFormButton",""],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-dialog",1),u._uU(3,"\n    "),u.ynx(4,2),u._uU(5,"\n      "),u.TgZ(6,"span"),u._uU(7),u.ALo(8,"i18n"),u.qZA(),u._uU(9,"\n      "),u.TgZ(10,"span",3),u._uU(11,"\n        "),u.YNc(12,nt,2,1,"ng-container",4),u._uU(13,"\n        "),u.YNc(14,it,3,4,"ng-container",4),u._uU(15,"\n      "),u.qZA(),u._uU(16,"\n    "),u.BQk(),u._uU(17,"\n\n    "),u.TgZ(18,"div",5),u._uU(19,"\n      "),u.TgZ(20,"bit-callout",6),u.ALo(21,"i18n"),u._uU(22),u.qZA(),u._uU(23,"\n      "),u.TgZ(24,"bit-form-field"),u._uU(25,"\n        "),u.TgZ(26,"bit-label"),u._uU(27),u.qZA(),u._uU(28,"\n        "),u._UZ(29,"input",7),u._uU(30,"\n      "),u.qZA(),u._uU(31,"\n    "),u.qZA(),u._uU(32,"\n\n    "),u.TgZ(33,"div",8),u._uU(34,"\n      "),u.TgZ(35,"button",9),u._uU(36),u.ALo(37,"i18n"),u.qZA(),u._uU(38,"\n      "),u.TgZ(39,"button",10),u._uU(40),u.ALo(41,"i18n"),u.qZA(),u._uU(42,"\n    "),u.qZA(),u._uU(43,"\n  "),u.qZA(),u._uU(44,"\n"),u.qZA(),u._uU(45,"\n")),2&e&&(u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(7),u.Oqu(u.lcZ(8,10,t.title)),u.xp6(5),u.Q6J("ngIf",1==t.data.projects.length),u.xp6(2),u.Q6J("ngIf",t.data.projects.length>1),u.xp6(6),u.Q6J("title",u.lcZ(21,12,"warning")),u.xp6(2),u.hij("\n        ",t.dialogContent,"\n      "),u.xp6(5),u.Oqu(t.dialogConfirmationLabel),u.xp6(9),u.hij("\n        ",u.lcZ(37,14,t.title),"\n      "),u.xp6(4),u.hij("\n        ",u.lcZ(41,16,"cancel"),"\n      "))},dependencies:[c.O5,_e._Y,_e.Fj,_e.JJ,_e.JL,_e.sg,_e.u,Ve.b,Ke.u,ye.r,He.O,Ze.a,be.f,We.d,Xe.G,et.u,ee.C],encapsulation:2});var ct,st=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function rt(e,t){1&e&&(u.TgZ(0,"div",9),u._uU(1,"\n        "),u._UZ(2,"i",10),u._uU(3,"\n      "),u.qZA())}function at(e,t){1&e&&(u.TgZ(0,"bit-form-field"),u._uU(1,"\n        "),u.TgZ(2,"bit-label"),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n        "),u._UZ(6,"input",11),u._uU(7,"\n      "),u.qZA()),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,1,"projectName")))}!function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit"}(ct||(ct={}));class ut{constructor(e,t,n,i,o,c){this.dialogRef=e,this.data=t,this.projectService=n,this.i18nService=i,this.platformUtilsService=o,this.router=c,this.formGroup=new _e.cw({name:new _e.NI("",[_e.kI.required])}),this.loading=!1,this.submit=()=>st(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const e=this.getProjectView();if(this.data.operation===ct.Add){const t=yield this.createProject(e);this.router.navigate(["sm",this.data.organizationId,"projects",t.id])}else e.id=this.data.projectId,yield this.updateProject(e);this.dialogRef.close()}))}ngOnInit(){return st(this,void 0,void 0,(function*(){if(this.data.operation===ct.Edit&&this.data.projectId)yield this.loadData();else if(this.data.operation!==ct.Add)throw this.dialogRef.close(),new Error("The project dialog was not called with the appropriate operation values.")}))}loadData(){return st(this,void 0,void 0,(function*(){this.loading=!0;const e=yield this.projectService.getByProjectId(this.data.projectId);this.loading=!1,this.formGroup.setValue({name:e.name})}))}get title(){return this.data.operation===ct.Add?"newProject":"editProject"}createProject(e){return st(this,void 0,void 0,(function*(){const t=yield this.projectService.create(this.data.organizationId,e);return this.platformUtilsService.showToast("success",null,this.i18nService.t("projectCreated")),t}))}updateProject(e){return st(this,void 0,void 0,(function*(){yield this.projectService.update(this.data.organizationId,e),this.platformUtilsService.showToast("success",null,this.i18nService.t("projectSaved"))}))}getProjectView(){const e=new Oe;return e.organizationId=this.data.organizationId,e.name=this.formGroup.value.name,e}}ut.ɵfac=function(e){return new(e||ut)(u.Y36(Ue.zj),u.Y36(Ue.Kt),u.Y36(Re),u.Y36(Be.D),u.Y36($e.P),u.Y36(s.F0))},ut.ɵcmp=u.Xpm({type:ut,selectors:[["sm-project-dialog"]],decls:28,vars:13,consts:[[3,"formGroup","bitSubmit"],["dialogSize","small"],["bitDialogTitle",""],["bitDialogContent",""],["class","tw-text-center",4,"ngIf"],[4,"ngIf"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","primary","bitFormButton",""],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose",""],[1,"tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["formControlName","name","maxlength","1000","bitInput",""]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-dialog",1),u._uU(3,"\n    "),u.TgZ(4,"span",2),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n    "),u.TgZ(8,"span",3),u._uU(9,"\n      "),u.YNc(10,rt,4,0,"div",4),u._uU(11,"\n      "),u.YNc(12,at,8,3,"bit-form-field",5),u._uU(13,"\n    "),u.qZA(),u._uU(14,"\n    "),u.TgZ(15,"div",6),u._uU(16,"\n      "),u.TgZ(17,"button",7),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n      "),u.TgZ(21,"button",8),u._uU(22),u.ALo(23,"i18n"),u.qZA(),u._uU(24,"\n    "),u.qZA(),u._uU(25,"\n  "),u.qZA(),u._uU(26,"\n"),u.qZA(),u._uU(27,"\n")),2&e&&(u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(5),u.Oqu(u.lcZ(6,7,t.title)),u.xp6(5),u.Q6J("ngIf",t.loading),u.xp6(2),u.Q6J("ngIf",!t.loading),u.xp6(6),u.hij("\n        ",u.lcZ(19,9,"save"),"\n      "),u.xp6(4),u.hij("\n        ",u.lcZ(23,11,"cancel"),"\n      "))},dependencies:[c.O5,_e._Y,_e.Fj,_e.JJ,_e.JL,_e.nD,_e.sg,_e.u,Ve.b,Ke.u,ye.r,Ze.a,be.f,We.d,Xe.G,et.u,ee.C],encapsulation:2});class lt{}class dt{}class pt{}class ht{}class gt extends Je.c{constructor(e){super(e),this.name=this.getResponseProperty("Name"),this.id=this.getResponseProperty("Id")}}class vt extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Key"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate"),this.read=this.getResponseProperty("Read"),this.write=this.getResponseProperty("Write");const t=this.getResponseProperty("projects");this.projects=null==t?null:t.map((e=>new gt(e)))}}class ft extends Je.c{constructor(e){super(e);const t=this.getResponseProperty("secrets"),n=this.getResponseProperty("projects");this.projects=null==n?null:n.map((e=>new gt(e))),this.secrets=null==t?[]:t.map((e=>new vt(e)))}}class mt extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Key"),this.value=this.getResponseProperty("Value"),this.note=this.getResponseProperty("Note"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate"),this.read=this.getResponseProperty("Read"),this.write=this.getResponseProperty("Write");const t=this.getResponseProperty("Projects");this.projects=null==t?null:t.map((e=>new gt(e)))}}var wt=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class At{constructor(e,t,n){this.cryptoService=e,this.apiService=t,this.encryptService=n,this._secret=new he.x,this.secret$=this._secret.asObservable()}getBySecretId(e){return wt(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/secrets/"+e,null,!0,!0),n=new mt(t);return yield this.createSecretView(n)}))}getSecrets(e){return wt(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/secrets",null,!0,!0),n=new ft(t);return yield this.createSecretsListView(e,n)}))}getSecretsByProject(e,t){return wt(this,void 0,void 0,(function*(){const n=yield this.apiService.send("GET","/projects/"+t+"/secrets",null,!0,!0),i=new ft(n);return yield this.createSecretsListView(e,i)}))}create(e,t){return wt(this,void 0,void 0,(function*(){const n=yield this.getSecretRequest(e,t),i=yield this.apiService.send("POST","/organizations/"+e+"/secrets",n,!0,!0);this._secret.next(yield this.createSecretView(new mt(i)))}))}update(e,t){return wt(this,void 0,void 0,(function*(){const n=yield this.getSecretRequest(e,t),i=yield this.apiService.send("PUT","/secrets/"+t.id,n,!0,!0);this._secret.next(yield this.createSecretView(new mt(i)))}))}delete(e){return wt(this,void 0,void 0,(function*(){const t=e.map((e=>e.id)),n=yield this.apiService.send("POST","/secrets/delete",t,!0,!0);return this._secret.next(null),n.data.map((t=>{const n=new qe;return n.id=t.id,n.name=e.find((e=>e.id==t.id)).name,n.errorMessage=t.error,n}))}))}getTrashedSecrets(e){return wt(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/secrets/"+e+"/trash",null,!0,!0);return yield this.createSecretsListView(e,new ft(t))}))}deleteTrashed(e,t){return wt(this,void 0,void 0,(function*(){yield this.apiService.send("POST","/secrets/"+e+"/trash/empty",t,!0,!0),this._secret.next(null)}))}restoreTrashed(e,t){return wt(this,void 0,void 0,(function*(){yield this.apiService.send("POST","/secrets/"+e+"/trash/restore",t,!0,!0),this._secret.next(null)}))}getOrganizationKey(e){return wt(this,void 0,void 0,(function*(){return yield this.cryptoService.getOrgKey(e)}))}getSecretRequest(e,t){var n;return wt(this,void 0,void 0,(function*(){const i=yield this.getOrganizationKey(e),o=new ht,[c,s,r]=yield Promise.all([this.encryptService.encrypt(t.name,i),this.encryptService.encrypt(t.value,i),this.encryptService.encrypt(t.note,i)]);return o.key=c.encryptedString,o.value=s.encryptedString,o.note=r.encryptedString,o.projectIds=[],null===(n=t.projects)||void 0===n||n.forEach((e=>o.projectIds.push(e.id))),o}))}createSecretView(e){return wt(this,void 0,void 0,(function*(){const t=yield this.getOrganizationKey(e.organizationId),n=new pt;n.id=e.id,n.organizationId=e.organizationId,n.creationDate=e.creationDate,n.revisionDate=e.revisionDate;const[i,o,c]=yield Promise.all([this.encryptService.decryptToUtf8(new ke._(e.name),t),this.encryptService.decryptToUtf8(new ke._(e.value),t),this.encryptService.decryptToUtf8(new ke._(e.note),t)]);return n.name=i,n.value=o,n.note=c,n.read=e.read,n.write=e.write,null!=e.projects&&(n.projects=yield this.decryptProjectsMappedToSecrets(t,e.projects)),n}))}createSecretsListView(e,t){return wt(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e),i=yield this.decryptProjectsMappedToSecrets(n,t.projects);return yield Promise.all(t.secrets.map((e=>wt(this,void 0,void 0,(function*(){var t;const o=new lt;o.id=e.id,o.organizationId=e.organizationId,o.name=yield this.encryptService.decryptToUtf8(new ke._(e.name),n),o.creationDate=e.creationDate,o.revisionDate=e.revisionDate;const c=null===(t=e.projects)||void 0===t?void 0:t.map((e=>e.id));return o.projects=i.filter((e=>c.includes(e.id))),o.read=e.read,o.write=e.write,o})))))}))}decryptProjectsMappedToSecrets(e,t){return wt(this,void 0,void 0,(function*(){return yield Promise.all(t.map((t=>wt(this,void 0,void 0,(function*(){const n=new dt;return n.id=t.id,n.name=yield this.encryptService.decryptToUtf8(new ke._(t.name),e),n})))))}))}}At.ɵfac=function(e){return new(e||At)(u.LFG(Ee.$),u.LFG(Me.s),u.LFG(Qe.U))},At.ɵprov=u.Yz7({token:At,factory:At.ɵfac,providedIn:"root"});var Ut=n(98205),_t=n(70094),yt=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function Zt(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e&&(u.xp6(1),u.hij("\n      ",u.lcZ(2,1,"softDeleteSecretWarning"),"\n    "))}class bt{constructor(e,t,n,i,o,c){this.dialogRef=e,this.secretService=t,this.i18nService=n,this.platformUtilsService=i,this.data=o,this.dialogService=c,this.showSoftDeleteSecretWarning=1===this.data.secrets.length,this.delete=()=>yt(this,void 0,void 0,(function*(){const e=yield this.secretService.delete(this.data.secrets);if(e.find((e=>e.errorMessage)))return this.openBulkStatusDialog(e.filter((e=>e.errorMessage))),void this.dialogRef.close(!0);const t=1===this.data.secrets.length?"softDeleteSuccessToast":"softDeletesSuccessToast";this.platformUtilsService.showToast("success",null,this.i18nService.t(t)),this.dialogRef.close(!0)}))}get title(){return 1===this.data.secrets.length?"deleteSecret":"deleteSecrets"}get submitButtonText(){return 1===this.data.secrets.length?"deleteSecret":"deleteSecrets"}openBulkStatusDialog(e){this.dialogService.open(je,{data:{title:"deleteSecrets",subTitle:"secrets",columnTitle:"name",message:"bulkDeleteSecretsErrorMessage",details:e}})}}bt.ɵfac=function(e){return new(e||bt)(u.Y36(Ue.zj),u.Y36(At),u.Y36(Be.D),u.Y36($e.P),u.Y36(Ue.Kt),u.Y36(Fe.x))},bt.ɵcmp=u.Xpm({type:bt,selectors:[["sm-secret-delete-dialog"]],decls:24,vars:14,consts:[["bitDialogTitle",""],["bitDialogContent",""],[4,"ngIf"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"bit-simple-dialog"),u._uU(1,"\n  "),u.TgZ(2,"span",0),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"span",1),u._uU(7,"\n    "),u.YNc(8,Zt,3,3,"div",2),u._uU(9),u.ALo(10,"i18n"),u.qZA(),u._uU(11,"\n  "),u.TgZ(12,"div",3),u._uU(13,"\n    "),u.TgZ(14,"button",4),u._uU(15),u.ALo(16,"i18n"),u.qZA(),u._uU(17,"\n    "),u.TgZ(18,"button",5),u._uU(19),u.ALo(20,"i18n"),u.qZA(),u._uU(21,"\n  "),u.qZA(),u._uU(22,"\n"),u.qZA(),u._uU(23,"\n")),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,6,t.title)),u.xp6(5),u.Q6J("ngIf",t.showSoftDeleteSecretWarning),u.xp6(1),u.hij("\n    ",u.lcZ(10,8,"deleteItemConfirmation"),"\n  "),u.xp6(5),u.Q6J("bitAction",t.delete),u.xp6(1),u.hij("\n      ",u.lcZ(16,10,t.submitButtonText),"\n    "),u.xp6(4),u.hij("\n      ",u.lcZ(20,12,"close"),"\n    "))},dependencies:[c.O5,Ut.Q,ye.r,_t.r,be.f,ee.C],encapsulation:2});var xt,St=n(70032),Tt=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function It(e,t){1&e&&(u.TgZ(0,"div",20),u._uU(1,"\n        "),u._UZ(2,"i",21),u._uU(3,"\n      "),u.qZA())}function Pt(e,t){if(1&e&&(u.TgZ(0,"option",22),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.Q6J("value",e.id),u.xp6(1),u.hij("\n            ",e.name,"\n          ")}}function qt(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",23),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openDeleteSecretDialog())})),u.qZA()}}!function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit"}(xt||(xt={}));class jt{constructor(e,t,n,i,o,c,s,r){this.dialogRef=e,this.data=t,this.secretService=n,this.i18nService=i,this.platformUtilsService=o,this.projectService=c,this.dialogService=s,this.organizationService=r,this.formGroup=new _e.cw({name:new _e.NI("",[_e.kI.required]),value:new _e.NI("",[_e.kI.required]),notes:new _e.NI(""),project:new _e.NI("",[_e.kI.required])}),this.destroy$=new he.x,this.loading=!0,this.submit=()=>Tt(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const e=this.getSecretView();this.data.operation===xt.Add?yield this.createSecret(e):(e.id=this.data.secretId,yield this.updateSecret(e)),this.dialogRef.close()}))}ngOnInit(){var e;return Tt(this,void 0,void 0,(function*(){if(this.data.operation===xt.Edit&&this.data.secretId)yield this.loadData();else if(this.data.operation!==xt.Add)throw this.dialogRef.close(),new Error("The secret dialog was not called with the appropriate operation values.");this.data.projectId&&this.formGroup.get("project").setValue(this.data.projectId),(null===(e=this.organizationService.get(this.data.organizationId))||void 0===e?void 0:e.isAdmin)&&(this.formGroup.get("project").removeValidators(_e.kI.required),this.formGroup.get("project").updateValueAndValidity()),this.projects=yield this.projectService.getProjects(this.data.organizationId).then((e=>e.sort(((e,t)=>e.name.localeCompare(t.name)))))}))}loadData(){var e,t;return Tt(this,void 0,void 0,(function*(){this.formGroup.disable();const n=yield this.secretService.getBySecretId(this.data.secretId);this.formGroup.setValue({name:n.name,value:n.value,notes:n.note,project:null!==(t=null===(e=n.projects[0])||void 0===e?void 0:e.id)&&void 0!==t?t:""}),this.loading=!1,n.write&&this.formGroup.enable()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get title(){return this.data.operation===xt.Add?"newSecret":"editSecret"}get showSpinner(){return this.data.operation===xt.Edit&&this.loading}get deleteButtonIsVisible(){return this.data.operation===xt.Edit}openDeleteSecretDialog(){const e=this.getSecretListView(),t=this.dialogService.open(bt,{data:{secrets:e}});(0,St.n)(t.closed).then((e=>void 0!==e&&this.dialogRef.close()))}createSecret(e){return Tt(this,void 0,void 0,(function*(){yield this.secretService.create(this.data.organizationId,e),this.platformUtilsService.showToast("success",null,this.i18nService.t("secretCreated"))}))}updateSecret(e){return Tt(this,void 0,void 0,(function*(){yield this.secretService.update(this.data.organizationId,e),this.platformUtilsService.showToast("success",null,this.i18nService.t("secretEdited"))}))}getSecretView(){const e=new pt;e.organizationId=this.data.organizationId,e.name=this.formGroup.value.name,e.value=this.formGroup.value.value,e.note=this.formGroup.value.notes;const t=this.projects.find((e=>e.id==this.formGroup.value.project));return e.projects=null!=t?[t]:[],e}getSecretListView(){const e=[],t=[],n=new lt;return this.formGroup.value.project?n.projects=[this.projects.find((e=>e.id==this.formGroup.value.project))]:n.projects=t,n.organizationId=this.data.organizationId,n.id=this.data.secretId,n.name=this.formGroup.value.name,e.push(n),e}}jt.ɵfac=function(e){return new(e||jt)(u.Y36(Ue.zj),u.Y36(Ue.Kt),u.Y36(At),u.Y36(Be.D),u.Y36($e.P),u.Y36(Re),u.Y36(Fe.x),u.Y36(b.Mn))},jt.ɵcmp=u.Xpm({type:jt,selectors:[["sm-secret-dialog"]],decls:76,vars:30,consts:[[3,"formGroup","bitSubmit"],["dialogSize","default"],["bitDialogTitle",""],["bitDialogContent","",1,"tw-relative"],["class","tw-absolute tw-flex tw-h-full tw-w-full tw-items-center tw-justify-center tw-bg-text-contrast",4,"ngIf"],[1,"tw-flex","tw-gap-4","tw-pt-4"],[1,"tw-w-1/3"],["for","secret-name"],["formControlName","name","bitInput",""],[1,"tw-w-full"],["bitInput","","rows","4","formControlName","value"],["bitInput","","rows","4","formControlName","notes"],[1,"tw-mt-3","tw-mb-0"],["bitInput","","name","project","formControlName","project"],["value",""],[3,"value",4,"ngFor","ngForOf"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","primary","bitFormButton",""],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose","",3,"disabled"],["class","tw-ml-auto","type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",3,"click",4,"ngIf"],[1,"tw-absolute","tw-flex","tw-h-full","tw-w-full","tw-items-center","tw-justify-center","tw-bg-text-contrast"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],[3,"value"],["type","button","bitIconButton","bwi-trash","buttonType","danger","bitFormButton","",1,"tw-ml-auto",3,"click"]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-dialog",1),u._uU(3,"\n    "),u.ynx(4,2),u._uU(5),u.ALo(6,"i18n"),u.BQk(),u._uU(7,"\n    "),u.TgZ(8,"div",3),u._uU(9,"\n      "),u.YNc(10,It,4,0,"div",4),u._uU(11,"\n      "),u.TgZ(12,"div",5),u._uU(13,"\n        "),u.TgZ(14,"bit-form-field",6),u._uU(15,"\n          "),u.TgZ(16,"bit-label",7),u._uU(17),u.ALo(18,"i18n"),u.qZA(),u._uU(19,"\n          "),u._UZ(20,"input",8),u._uU(21,"\n        "),u.qZA(),u._uU(22,"\n        "),u.TgZ(23,"bit-form-field",9),u._uU(24,"\n          "),u.TgZ(25,"bit-label"),u._uU(26),u.ALo(27,"i18n"),u.qZA(),u._uU(28,"\n          "),u._UZ(29,"textarea",10),u._uU(30,"\n        "),u.qZA(),u._uU(31,"\n      "),u.qZA(),u._uU(32,"\n      "),u.TgZ(33,"bit-form-field"),u._uU(34,"\n        "),u.TgZ(35,"bit-label"),u._uU(36),u.ALo(37,"i18n"),u.qZA(),u._uU(38,"\n        "),u._UZ(39,"textarea",11),u._uU(40,"\n      "),u.qZA(),u._uU(41,"\n\n      "),u._UZ(42,"hr"),u._uU(43,"\n\n      "),u.TgZ(44,"bit-form-field",12),u._uU(45,"\n        "),u.TgZ(46,"bit-label"),u._uU(47),u.ALo(48,"i18n"),u.qZA(),u._uU(49,"\n        "),u.TgZ(50,"select",13),u._uU(51,"\n          "),u.TgZ(52,"option",14),u._uU(53),u.ALo(54,"i18n"),u.qZA(),u._uU(55,"\n          "),u.YNc(56,Pt,2,2,"option",15),u._uU(57,"\n        "),u.qZA(),u._uU(58,"\n      "),u.qZA(),u._uU(59,"\n    "),u.qZA(),u._uU(60,"\n    "),u.TgZ(61,"div",16),u._uU(62,"\n      "),u.TgZ(63,"button",17),u._uU(64),u.ALo(65,"i18n"),u.qZA(),u._uU(66,"\n      "),u.TgZ(67,"button",18),u._uU(68),u.ALo(69,"i18n"),u.qZA(),u._uU(70,"\n      "),u.YNc(71,qt,1,0,"button",19),u._uU(72,"\n    "),u.qZA(),u._uU(73,"\n  "),u.qZA(),u._uU(74,"\n"),u.qZA(),u._uU(75,"\n")),2&e&&(u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(5),u.Oqu(u.lcZ(6,14,t.title)),u.xp6(5),u.Q6J("ngIf",t.showSpinner),u.xp6(7),u.Oqu(u.lcZ(18,16,"name")),u.xp6(9),u.Oqu(u.lcZ(27,18,"value")),u.xp6(10),u.Oqu(u.lcZ(37,20,"notes")),u.xp6(11),u.Oqu(u.lcZ(48,22,"project")),u.xp6(6),u.Oqu(u.lcZ(54,24,"selectPlaceholder")),u.xp6(3),u.Q6J("ngForOf",t.projects),u.xp6(8),u.hij("\n        ",u.lcZ(65,26,"save"),"\n      "),u.xp6(3),u.Q6J("disabled",!1),u.xp6(1),u.hij("\n        ",u.lcZ(69,28,"cancel"),"\n      "),u.xp6(3),u.Q6J("ngIf",t.deleteButtonIsVisible))},dependencies:[c.sg,c.O5,_e._Y,_e.YN,_e.Kr,_e.Fj,_e.EJ,_e.JJ,_e.JL,_e.sg,_e.u,Ve.b,Ke.u,ye.r,Ze.a,be.f,We.d,Xe.G,et.u,P.Q,ee.C],encapsulation:2});class kt{}class Ct{}class Lt extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.organizationId=this.getResponseProperty("OrganizationId"),this.name=this.getResponseProperty("Name"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}var Ot=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class Dt{constructor(e,t,n){this.cryptoService=e,this.apiService=t,this.encryptService=n,this._serviceAccount=new he.x,this.serviceAccount$=this._serviceAccount.asObservable()}getServiceAccounts(e){return Ot(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/service-accounts",null,!0,!0),n=new Ce.L(t,Lt);return yield this.createServiceAccountViews(e,n.data)}))}getByServiceAccountId(e,t){return Ot(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(t),i=yield this.apiService.send("GET","/service-accounts/"+e,null,!0,!0);return yield this.createServiceAccountView(n,new Lt(i))}))}update(e,t,n){return Ot(this,void 0,void 0,(function*(){const i=yield this.getOrganizationKey(t),o=yield this.getServiceAccountRequest(i,n),c=yield this.apiService.send("PUT","/service-accounts/"+e,o,!0,!0);this._serviceAccount.next(yield this.createServiceAccountView(i,new Lt(c)))}))}create(e,t){return Ot(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e),i=yield this.getServiceAccountRequest(n,t),o=yield this.apiService.send("POST","/organizations/"+e+"/service-accounts",i,!0,!0);this._serviceAccount.next(yield this.createServiceAccountView(n,new Lt(o)))}))}delete(e){return Ot(this,void 0,void 0,(function*(){const t=e.map((e=>e.id)),n=yield this.apiService.send("POST","/service-accounts/delete",t,!0,!0);return this._serviceAccount.next(null),n.data.map((t=>{const n=new qe;return n.id=t.id,n.name=e.find((e=>e.id==t.id)).name,n.errorMessage=t.error,n}))}))}getOrganizationKey(e){return Ot(this,void 0,void 0,(function*(){return yield this.cryptoService.getOrgKey(e)}))}getServiceAccountRequest(e,t){return Ot(this,void 0,void 0,(function*(){const n=new Ct;return n.name=yield this.encryptService.encrypt(t.name,e),n}))}createServiceAccountView(e,t){return Ot(this,void 0,void 0,(function*(){const n=new kt;return n.id=t.id,n.organizationId=t.organizationId,n.creationDate=t.creationDate,n.revisionDate=t.revisionDate,n.name=yield this.encryptService.decryptToUtf8(new ke._(t.name),e),n}))}createServiceAccountViews(e,t){return Ot(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e);return yield Promise.all(t.map((e=>Ot(this,void 0,void 0,(function*(){return yield this.createServiceAccountView(n,e)})))))}))}}Dt.ɵfac=function(e){return new(e||Dt)(u.LFG(Ee.$),u.LFG(Me.s),u.LFG(Qe.U))},Dt.ɵprov=u.Yz7({token:Dt,factory:Dt.ɵfac,providedIn:"root"});var Jt,Nt=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function zt(e,t){1&e&&(u.TgZ(0,"div",9),u._uU(1,"\n        "),u._UZ(2,"i",10),u._uU(3,"\n      "),u.qZA())}function Yt(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"\n        "),u.TgZ(2,"bit-form-field"),u._uU(3,"\n          "),u.TgZ(4,"bit-label"),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n          "),u._UZ(8,"input",11),u._uU(9,"\n        "),u.qZA(),u._uU(10,"\n      "),u.qZA()),2&e&&(u.xp6(5),u.Oqu(u.lcZ(6,1,"serviceAccountName")))}!function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit"}(Jt||(Jt={}));class Et{constructor(e,t,n,i,o){this.dialogRef=e,this.data=t,this.serviceAccountService=n,this.i18nService=i,this.platformUtilsService=o,this.formGroup=new _e.cw({name:new _e.NI("",[_e.kI.required])}),this.loading=!1,this.submit=()=>Nt(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const e=this.getServiceAccountView();let t;this.data.operation==Jt.Add?(yield this.serviceAccountService.create(this.data.organizationId,e),t=this.i18nService.t("serviceAccountCreated")):(yield this.serviceAccountService.update(this.data.serviceAccountId,this.data.organizationId,e),t=this.i18nService.t("serviceAccountUpdated")),this.platformUtilsService.showToast("success",null,t),this.dialogRef.close()}))}ngOnInit(){return Nt(this,void 0,void 0,(function*(){this.data.operation==Jt.Edit&&this.loadData()}))}loadData(){return Nt(this,void 0,void 0,(function*(){this.loading=!0;const e=yield this.serviceAccountService.getByServiceAccountId(this.data.serviceAccountId,this.data.organizationId);this.formGroup.patchValue({name:e.name}),this.loading=!1}))}getServiceAccountView(){const e=new kt;return e.organizationId=this.data.organizationId,e.name=this.formGroup.value.name,e}get title(){return this.data.operation===Jt.Add?"newServiceAccount":"editServiceAccount"}}Et.ɵfac=function(e){return new(e||Et)(u.Y36(Ue.zj),u.Y36(Ue.Kt),u.Y36(Dt),u.Y36(Be.D),u.Y36($e.P))},Et.ɵcmp=u.Xpm({type:Et,selectors:[["sm-service-account-dialog"]],decls:28,vars:13,consts:[[3,"formGroup","bitSubmit"],["dialogSize","small"],["bitDialogTitle",""],["bitDialogContent",""],["class","tw-text-center",4,"ngIf"],[4,"ngIf"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","primary","bitFormButton",""],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose",""],[1,"tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["formControlName","name","maxlength","1000","bitInput",""]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-dialog",1),u._uU(3,"\n    "),u.ynx(4,2),u._uU(5),u.ALo(6,"i18n"),u.BQk(),u._uU(7,"\n    "),u.TgZ(8,"div",3),u._uU(9,"\n      "),u.YNc(10,zt,4,0,"div",4),u._uU(11,"\n      "),u.YNc(12,Yt,11,3,"div",5),u._uU(13,"\n    "),u.qZA(),u._uU(14,"\n    "),u.TgZ(15,"div",6),u._uU(16,"\n      "),u.TgZ(17,"button",7),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n      "),u.TgZ(21,"button",8),u._uU(22),u.ALo(23,"i18n"),u.qZA(),u._uU(24,"\n    "),u.qZA(),u._uU(25,"\n  "),u.qZA(),u._uU(26,"\n"),u.qZA(),u._uU(27,"\n")),2&e&&(u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(5),u.Oqu(u.lcZ(6,7,t.title)),u.xp6(5),u.Q6J("ngIf",t.loading),u.xp6(2),u.Q6J("ngIf",!t.loading),u.xp6(6),u.hij("\n        ",u.lcZ(19,9,"save"),"\n      "),u.xp6(4),u.hij("\n        ",u.lcZ(23,11,"cancel"),"\n      "))},dependencies:[c.O5,_e._Y,_e.Fj,_e.JJ,_e.JL,_e.nD,_e.sg,_e.u,Ve.b,Ke.u,ye.r,Ze.a,be.f,We.d,Xe.G,et.u,ee.C],encapsulation:2});var Mt=n(81049),Qt=n(2138),Gt=n(66385),Rt=n(12492),Bt=n(73974),$t=n(26194),Ft=n(44234),Vt=n(97334);class Kt{set default(e){this._default=(0,Vt.Ig)(e)}constructor(e){this.table=e}ngOnInit(){this._default&&!this.isActive&&this.setActive()}get ariaSort(){if(this.isActive)return"asc"===this.sort.direction?"ascending":"descending"}setActive(){if(this.table.dataSource){const e=this.isActive&&"asc"===this.direction?"desc":"asc";this.table.dataSource.sort={column:this.bitSortable,direction:e,fn:this.fn}}}get sort(){var e;return null===(e=this.table.dataSource)||void 0===e?void 0:e.sort}get isActive(){var e;return(null===(e=this.sort)||void 0===e?void 0:e.column)===this.bitSortable}get direction(){var e;return null===(e=this.sort)||void 0===e?void 0:e.direction}get icon(){return this.isActive?"asc"===this.direction?"bwi-up-solid":"bwi-down-solid":"bwi-up-down-btn"}get classList(){return["tw-group","tw-min-w-max","-tw-m-1.5","tw-font-bold","tw-border","tw-border-solid","tw-rounded","tw-transition","hover:tw-no-underline","focus:tw-outline-none","tw-bg-transparent","!tw-text-muted","tw-border-transparent","hover:tw-bg-transparent-hover","hover:tw-border-primary-700","focus-visible:before:tw-ring-primary-700","disabled:tw-opacity-60","disabled:hover:tw-border-transparent","disabled:hover:tw-bg-transparent","tw-relative","before:tw-content-['']","before:tw-block","before:tw-absolute","before:-tw-inset-[3px]","before:tw-rounded-md","before:tw-transition","before:tw-ring","before:tw-ring-transparent","focus-visible:tw-z-10"]}}Kt.ɵfac=function(e){return new(e||Kt)(u.Y36(xe.a))},Kt.ɵcmp=u.Xpm({type:Kt,selectors:[["th","bitSortable",""]],hostVars:1,hostBindings:function(e,t){2&e&&u.uIk("aria-sort",t.ariaSort)},inputs:{bitSortable:"bitSortable",default:"default",fn:"fn"},attrs:["bitSortable",""],ngContentSelectors:["*"],decls:8,vars:3,consts:[[3,"ngClass","click"],[1,"bwi","tw-ml-2",3,"ngClass"]],template:function(e,t){1&e&&(u.F$t(),u._uU(0,"\n    "),u.TgZ(1,"button",0),u.NdJ("click",(function(){return t.setActive()})),u._uU(2,"\n      "),u.Hsn(3),u._uU(4,"\n      "),u._UZ(5,"i",1),u._uU(6,"\n    "),u.qZA(),u._uU(7,"\n  ")),2&e&&(u.xp6(1),u.Q6J("ngClass",t.classList),u.uIk("aria-pressed",t.isActive),u.xp6(4),u.Q6J("ngClass",t.icon))},dependencies:[c.mk],encapsulation:2});var Ht=n(83505);const Wt=[[["","slot","title"]],[["","slot","description"]],[["","slot","button"]]];class Xt{constructor(){this.icon=Ht.o}}Xt.ɵfac=function(e){return new(e||Xt)},Xt.ɵcmp=u.Xpm({type:Xt,selectors:[["bit-no-items"]],ngContentSelectors:["[slot=title]","[slot=description]","[slot=button]"],decls:23,vars:1,consts:[[1,"tw-mx-auto","tw-flex","tw-flex-col","tw-items-center","tw-justify-center","tw-pt-6","tw-text-center"],[1,"tw-max-w-sm"],["aria-hidden","true",3,"icon"],[1,"tw-font-semibold"],[1,"tw-space-x-2"]],template:function(e,t){1&e&&(u.F$t(Wt),u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"div",1),u._uU(3,"\n    "),u._UZ(4,"bit-icon",2),u._uU(5,"\n    "),u.TgZ(6,"h3",3),u._uU(7,"\n      "),u.Hsn(8),u._uU(9,"\n    "),u.qZA(),u._uU(10,"\n    "),u.TgZ(11,"p"),u._uU(12,"\n      "),u.Hsn(13,1),u._uU(14,"\n    "),u.qZA(),u._uU(15,"\n  "),u.qZA(),u._uU(16,"\n  "),u.TgZ(17,"div",4),u._uU(18,"\n    "),u.Hsn(19,2),u._uU(20,"\n  "),u.qZA(),u._uU(21,"\n"),u.qZA(),u._uU(22,"\n")),2&e&&(u.xp6(4),u.Q6J("icon",t.icon))},dependencies:[S.G],encapsulation:2});var en=n(55598);function tn(e,t){1&e&&(u.TgZ(0,"div",8),u._uU(1,"\n  "),u._UZ(2,"i",9),u._uU(3,"\n"),u.qZA())}function nn(e,t){1&e&&(u.TgZ(0,"bit-no-items"),u._uU(1,"\n    "),u.ynx(2,10),u._uU(3),u.ALo(4,"i18n"),u.BQk(),u._uU(5,"\n    "),u.ynx(6,11),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n  "),u.qZA()),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,2,"secretsNoItemsTitle")),u.xp6(4),u.Oqu(u.lcZ(8,4,"secretsTrashNoItemsMessage")))}function on(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-no-items"),u._uU(1,"\n    "),u.ynx(2,10),u._uU(3),u.ALo(4,"i18n"),u.BQk(),u._uU(5,"\n    "),u.ynx(6,11),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n    "),u.TgZ(10,"button",12),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.newSecretEvent.emit())})),u._uU(11,"\n      "),u._UZ(12,"i",13),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n  "),u.qZA()}2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,3,"secretsNoItemsTitle")),u.xp6(4),u.Oqu(u.lcZ(8,5,"secretsNoItemsMessage")),u.xp6(6),u.hij("\n      ",u.lcZ(14,7,"newSecret"),"\n    "))}function cn(e,t){if(1&e&&(u.ynx(0),u._uU(1,"\n  "),u.YNc(2,nn,10,6,"bit-no-items",1),u._uU(3,"\n  "),u.YNc(4,on,16,9,"bit-no-items",1),u._uU(5,"\n"),u.BQk()),2&e){const e=u.oxw();u.xp6(2),u.Q6J("ngIf",e.trash),u.xp6(2),u.Q6J("ngIf",!e.trash)}}function sn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",35),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,n=u.oxw(3);return u.KtG(n.editSecretEvent.emit(t.id))})),u._uU(1),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.xp6(1),u.hij("\n            ",e.name,"\n          ")}}function rn(e,t){if(1&e&&(u.TgZ(0,"div"),u._uU(1),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Oqu(e.name)}}function an(e,t){if(1&e&&(u.TgZ(0,"span",36),u._uU(1),u.ALo(2,"ellipsis"),u.qZA()),2&e){const e=t.$implicit;u.Q6J("title",e.name),u.xp6(1),u.hij("\n          ",u.xi3(2,2,e.name,32),"\n        ")}}function un(e,t){1&e&&(u.TgZ(0,"span",37),u._UZ(1,"i",38),u._uU(2),u.ALo(3,"i18n"),u.qZA()),2&e&&(u.xp6(2),u.Oqu(u.lcZ(3,1,"unassigned")))}function ln(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,n=u.oxw(3);return u.KtG(n.editSecretEvent.emit(t.id))})),u._uU(1,"\n          "),u._UZ(2,"i",39),u._uU(3),u.ALo(4,"i18n"),u.qZA()}2&e&&(u.xp6(3),u.hij("\n          ",u.lcZ(4,1,"editSecret"),"\n        "))}function dn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,n=u.oxw(3);return u.KtG(n.copySecretNameEvent.emit(t.name))})),u._uU(1,"\n          "),u._UZ(2,"i",40),u._uU(3),u.ALo(4,"i18n"),u.qZA()}2&e&&(u.xp6(3),u.hij("\n          ",u.lcZ(4,1,"copySecretName"),"\n        "))}function pn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,n=u.oxw(3);return u.KtG(n.copySecretValueEvent.emit(t.id))})),u._uU(1,"\n          "),u._UZ(2,"i",40),u._uU(3),u.ALo(4,"i18n"),u.qZA()}2&e&&(u.xp6(3),u.hij("\n          ",u.lcZ(4,1,"copySecretValue"),"\n        "))}function hn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,n=u.oxw(3);return u.KtG(n.restoreSecretsEvent.emit([t.id]))})),u._uU(1,"\n          "),u._UZ(2,"i",41),u._uU(3),u.ALo(4,"i18n"),u.qZA()}2&e&&(u.xp6(3),u.hij("\n          ",u.lcZ(4,1,"restoreSecret"),"\n        "))}function gn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw().$implicit,n=u.oxw(3);return u.KtG(n.deleteSecretsEvent.emit([t]))})),u._uU(1,"\n          "),u._UZ(2,"i",6),u._uU(3,"\n          "),u.TgZ(4,"span",7),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n        "),u.qZA()}if(2&e){const e=u.oxw(4);u.xp6(5),u.Oqu(u.lcZ(6,1,e.trash?"permanentlyDelete":"deleteSecret"))}}function vn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",25),u._uU(1,"\n      "),u.TgZ(2,"td",26),u._uU(3,"\n        "),u.TgZ(4,"input",27),u.NdJ("change",(function(t){const n=u.CHM(e).$implicit,i=u.oxw(3);return u.KtG(t?i.selection.toggle(n.id):null)})),u.qZA(),u._uU(5,"\n      "),u.qZA(),u._uU(6,"\n      "),u.TgZ(7,"td",26),u._uU(8,"\n        "),u.TgZ(9,"div",28),u._uU(10,"\n          "),u._UZ(11,"i",29),u._uU(12,"\n          "),u.YNc(13,sn,2,1,"button",30),u._uU(14,"\n          "),u.YNc(15,rn,2,1,"div",1),u._uU(16,"\n        "),u.qZA(),u._uU(17,"\n      "),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"td",26),u._uU(20,"\n        "),u.YNc(21,an,3,5,"span",31),u._uU(22,"\n        "),u.YNc(23,un,4,3,"span",32),u._uU(24,"\n      "),u.qZA(),u._uU(25,"\n      "),u.TgZ(26,"td",33),u._uU(27),u.ALo(28,"date"),u.qZA(),u._uU(29,"\n      "),u.TgZ(30,"td",26),u._uU(31,"\n        "),u._UZ(32,"button",22),u.ALo(33,"i18n"),u.ALo(34,"i18n"),u._uU(35,"\n      "),u.qZA(),u._uU(36,"\n\n      "),u.TgZ(37,"bit-menu",null,34),u._uU(39,"\n        "),u.YNc(40,ln,5,3,"button",4),u._uU(41,"\n        "),u.YNc(42,dn,5,3,"button",4),u._uU(43,"\n        "),u.YNc(44,pn,5,3,"button",4),u._uU(45,"\n        "),u.YNc(46,hn,5,3,"button",4),u._uU(47,"\n        "),u.YNc(48,gn,8,3,"button",4),u._uU(49,"\n      "),u.qZA(),u._uU(50,"\n    "),u.qZA()}if(2&e){const e=t.$implicit,n=u.MAs(38),i=u.oxw(3);u.xp6(4),u.Q6J("checked",i.selection.isSelected(e.id)),u.xp6(9),u.Q6J("ngIf",!i.trash),u.xp6(2),u.Q6J("ngIf",i.trash),u.xp6(6),u.Q6J("ngForOf",e.projects),u.xp6(2),u.Q6J("ngIf",0===e.projects.length),u.xp6(4),u.Oqu(u.xi3(28,14,e.revisionDate,"medium")),u.xp6(5),u.Q6J("title",u.lcZ(33,17,"options"))("bitMenuTriggerFor",n),u.uIk("aria-label",u.lcZ(34,19,"options")),u.xp6(8),u.Q6J("ngIf",e.write&&!i.trash),u.xp6(2),u.Q6J("ngIf",!i.trash),u.xp6(2),u.Q6J("ngIf",!i.trash),u.xp6(2),u.Q6J("ngIf",i.trash),u.xp6(2),u.Q6J("ngIf",e.write)}}function fn(e,t){if(1&e&&(u._uU(0,"\n    "),u.YNc(1,vn,51,21,"tr",24),u.ALo(2,"async"),u._uU(3,"\n  ")),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("ngForOf",u.lcZ(2,1,e))}}function mn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-table",14),u._uU(1,"\n  "),u.ynx(2,15),u._uU(3,"\n    "),u.TgZ(4,"tr"),u._uU(5,"\n      "),u.TgZ(6,"th",16),u._uU(7,"\n        "),u.TgZ(8,"label",17),u._uU(9,"\n          "),u.TgZ(10,"input",18),u.NdJ("change",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(t?n.toggleAll():null)})),u.qZA(),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.qZA(),u._uU(14,"\n      "),u.TgZ(15,"th",19),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"th",20),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"th",21),u._uU(24),u.ALo(25,"i18n"),u.qZA(),u._uU(26,"\n      "),u.TgZ(27,"th",16),u._uU(28,"\n        "),u._UZ(29,"button",22),u.ALo(30,"i18n"),u.ALo(31,"i18n"),u._uU(32,"\n      "),u.qZA(),u._uU(33,"\n    "),u.qZA(),u._uU(34,"\n  "),u.BQk(),u._uU(35,"\n  "),u.YNc(36,fn,4,3,"ng-template",23),u._uU(37,"\n"),u.qZA()}if(2&e){const e=u.oxw(),t=u.MAs(7);u.Q6J("dataSource",e.dataSource),u.xp6(10),u.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),u.xp6(1),u.hij("\n          ",u.lcZ(12,11,"all"),"\n        "),u.xp6(5),u.Oqu(u.lcZ(17,13,"name")),u.xp6(3),u.Q6J("fn",e.sortProjects),u.xp6(1),u.Oqu(u.lcZ(21,15,"project")),u.xp6(4),u.Oqu(u.lcZ(25,17,"lastEdited")),u.xp6(5),u.Q6J("title",u.lcZ(30,19,"options"))("bitMenuTriggerFor",t),u.uIk("aria-label",u.lcZ(31,21,"options"))}}function wn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.bulkRestoreSecrets())})),u._uU(1,"\n    "),u._UZ(2,"i",41),u._uU(3,"\n    "),u.TgZ(4,"span"),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n  "),u.qZA()}2&e&&(u.xp6(5),u.Oqu(u.lcZ(6,1,"restoreSelected")))}class An{get secrets(){return this._secrets}set secrets(e){this.selection.clear(),this._secrets=e,this.dataSource.data=e}set search(e){this.dataSource.filter=e}constructor(e,t){this.i18nService=e,this.platformUtilsService=t,this.dataSource=new Qt.G,this.editSecretEvent=new u.vpe,this.copySecretNameEvent=new u.vpe,this.copySecretValueEvent=new u.vpe,this.onSecretCheckedEvent=new u.vpe,this.deleteSecretsEvent=new u.vpe,this.newSecretEvent=new u.vpe,this.restoreSecretsEvent=new u.vpe,this.destroy$=new he.x,this.selection=new Mt.Ov(!0,[]),this.sortProjects=(e,t)=>{var n;const i=e.projects,o=t.projects;return i.length!==o.length?i.length-o.length:null===(n=i[0])||void 0===n?void 0:n.name.localeCompare(o[0].name)},this.selection.changed.pipe((0,ve.R)(this.destroy$)).subscribe((e=>this.onSecretCheckedEvent.emit(this.selection.selected)))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}isAllSelected(){return this.selection.selected.length===this.secrets.length}toggleAll(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.secrets.map((e=>e.id)))}bulkDeleteSecrets(){this.selection.selected.length>=1?this.deleteSecretsEvent.emit(this.secrets.filter((e=>this.selection.isSelected(e.id)))):this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nothingSelected"))}bulkRestoreSecrets(){this.selection.selected.length>=1?this.restoreSecretsEvent.emit(this.selection.selected):this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nothingSelected"))}static copySecretName(e,t,n){t.copyToClipboard(e),t.showToast("success",null,n.t("valueCopied",n.t("name")))}static copySecretValue(e,t,n,i){const o=i.getBySecretId(e).then((e=>e.value));An.copyToClipboardAsync(o,t).then((()=>{t.showToast("success",null,n.t("valueCopied",n.t("value")))}))}static copyToClipboardAsync(e,t){return t.isSafari()?navigator.clipboard.write([new ClipboardItem({"text/plain":e})]):e.then((e=>t.copyToClipboard(e)))}}An.ɵfac=function(e){return new(e||An)(u.Y36(Be.D),u.Y36($e.P))},An.ɵcmp=u.Xpm({type:An,selectors:[["sm-secrets-list"]],inputs:{secrets:"secrets",search:"search",trash:"trash"},outputs:{editSecretEvent:"editSecretEvent",copySecretNameEvent:"copySecretNameEvent",copySecretValueEvent:"copySecretValueEvent",onSecretCheckedEvent:"onSecretCheckedEvent",deleteSecretsEvent:"deleteSecretsEvent",newSecretEvent:"newSecretEvent",restoreSecretsEvent:"restoreSecretsEvent"},decls:21,vars:7,consts:[["class","tw-items-center tw-justify-center tw-pt-64 tw-text-center",4,"ngIf"],[4,"ngIf"],[3,"dataSource",4,"ngIf"],["tableMenu",""],["type","button","bitMenuItem","",3,"click",4,"ngIf"],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash","tw-text-danger"],[1,"tw-text-danger"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["slot","title"],["slot","description"],["type","button","slot","button","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"],[3,"dataSource"],["header",""],["bitCell","",1,"tw-w-0"],[1,"!tw-mb-0","tw-flex","tw-w-fit","tw-gap-2","!tw-font-bold","!tw-text-muted"],["type","checkbox",3,"checked","indeterminate","change"],["bitCell","","bitSortable","name","default",""],["bitCell","","bitSortable","projects",3,"fn"],["bitCell","","bitSortable","revisionDate"],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"title","bitMenuTriggerFor"],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell",""],["type","checkbox",3,"checked","change"],[1,"tw-flex","tw-items-center","tw-gap-4","tw-break-all"],["aria-hidden","true",1,"bwi","bwi-key","tw-text-muted"],["type","button","bitLink","",3,"click",4,"ngIf"],["bitBadge","","badgeType","secondary","class","tw-ml-1",3,"title",4,"ngFor","ngForOf"],["bitBadge","","badgeType","warning","class","tw-ml-1",4,"ngIf"],["bitCell","",1,"tw-whitespace-nowrap"],["secretMenu",""],["type","button","bitLink","",3,"click"],["bitBadge","","badgeType","secondary",1,"tw-ml-1",3,"title"],["bitBadge","","badgeType","warning",1,"tw-ml-1"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-exclamation-triangle","tw-mr-1"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-pencil"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-clone"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-refresh"]],template:function(e,t){1&e&&(u.YNc(0,tn,4,0,"div",0),u._uU(1,"\n\n"),u.YNc(2,cn,6,2,"ng-container",1),u._uU(3,"\n\n"),u.YNc(4,mn,38,23,"bit-table",2),u._uU(5,"\n\n"),u.TgZ(6,"bit-menu",null,3),u._uU(8,"\n  "),u.YNc(9,wn,8,3,"button",4),u._uU(10,"\n  "),u.TgZ(11,"button",5),u.NdJ("click",(function(){return t.bulkDeleteSecrets()})),u._uU(12,"\n    "),u._UZ(13,"i",6),u._uU(14,"\n    "),u.TgZ(15,"span",7),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n  "),u.qZA(),u._uU(19,"\n"),u.qZA(),u._uU(20,"\n")),2&e&&(u.Q6J("ngIf",!t.secrets),u.xp6(2),u.Q6J("ngIf",0==(null==t.secrets?null:t.secrets.length)),u.xp6(2),u.Q6J("ngIf",(null==t.secrets?null:t.secrets.length)>=1),u.xp6(5),u.Q6J("ngIf",t.trash),u.xp6(7),u.Oqu(u.lcZ(17,5,"deleteSecrets")))},dependencies:[c.sg,c.O5,Gt.l,ye.r,P.Q,Rt._,Bt.M,$t.t,Ft.e,xe.a,Se.Y,Te.v,Kt,xe.f,Xt,c.Ov,c.uU,en.p,ee.C],encapsulation:2});var Un=n(64184),_n=n(28315),yn=n(11518),Zn=n(12963),bn=n(14970),xn=n(91849),Sn=n(45202),Tn=n(19576);function In(e,t){if(1&e&&u._UZ(0,"i",16),2&e){const e=u.oxw(3);u.Gre("bwi ",e.icon,"")}}function Pn(e,t){if(1&e&&(u.TgZ(0,"h1",14),u.ALo(1,"i18n"),u._uU(2,"\n        "),u.YNc(3,In,1,3,"i",15),u._uU(4),u.ALo(5,"i18n"),u.qZA()),2&e){const e=u.oxw().ngIf,t=u.oxw();u.Q6J("title",t.title||u.lcZ(1,3,e.titleId)),u.xp6(3),u.Q6J("ngIf",t.icon),u.xp6(1),u.hij("\n        ",t.title||u.lcZ(5,5,e.titleId),"\n      ")}}function qn(e,t){if(1&e){const e=u.EpF();u.ynx(0),u._uU(1,"\n          "),u.TgZ(2,"button",17),u._uU(3,"\n            "),u._UZ(4,"bit-avatar",18),u.ALo(5,"userName"),u._uU(6,"\n          "),u.qZA(),u._uU(7,"\n\n          "),u.TgZ(8,"bit-menu",null,19),u._uU(10,"\n            "),u.TgZ(11,"div",20),u._uU(12,"\n              "),u.TgZ(13,"div",21),u._uU(14,"\n                "),u._UZ(15,"bit-avatar",22),u.ALo(16,"userName"),u._uU(17,"\n                "),u.TgZ(18,"div",23),u._uU(19,"\n                  "),u.TgZ(20,"span"),u._uU(21),u.ALo(22,"i18n"),u.qZA(),u._uU(23,"\n                  "),u.TgZ(24,"small",24),u._uU(25),u.ALo(26,"userName"),u.qZA(),u._uU(27,"\n                "),u.qZA(),u._uU(28,"\n              "),u.qZA(),u._uU(29,"\n\n              "),u._UZ(30,"bit-menu-divider"),u._uU(31,"\n\n              "),u.TgZ(32,"a",25),u._uU(33,"\n                "),u._UZ(34,"i",26),u._uU(35),u.ALo(36,"i18n"),u.qZA(),u._uU(37,"\n              "),u.TgZ(38,"a",27),u._uU(39,"\n                "),u._UZ(40,"i",28),u._uU(41),u.ALo(42,"i18n"),u.qZA(),u._uU(43,"\n              "),u.TgZ(44,"a",29),u._uU(45,"\n                "),u._UZ(46,"i",30),u._uU(47),u.ALo(48,"i18n"),u.qZA(),u._uU(49,"\n\n              "),u._UZ(50,"bit-menu-divider"),u._uU(51,"\n\n              "),u.TgZ(52,"button",31),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.lock())})),u._uU(53,"\n                "),u._UZ(54,"i",32),u._uU(55),u.ALo(56,"i18n"),u.qZA(),u._uU(57,"\n              "),u.TgZ(58,"button",31),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.logout())})),u._uU(59,"\n                "),u._UZ(60,"i",33),u._uU(61),u.ALo(62,"i18n"),u.qZA(),u._uU(63,"\n            "),u.qZA(),u._uU(64,"\n          "),u.qZA(),u._uU(65,"\n        "),u.BQk()}if(2&e){const e=t.ngIf,n=u.MAs(9);u.xp6(2),u.Q6J("bitMenuTriggerFor",n),u.xp6(2),u.Q6J("id",e.userId)("text",u.lcZ(5,12,e)),u.xp6(11),u.Q6J("text",u.lcZ(16,14,e))("id",e.userId),u.xp6(6),u.Oqu(u.lcZ(22,16,"loggedInAs")),u.xp6(4),u.hij("\n                    ",u.lcZ(26,18,e),"\n                  "),u.xp6(10),u.hij("\n                ",u.lcZ(36,20,"accountSettings"),"\n              "),u.xp6(6),u.hij("\n                ",u.lcZ(42,22,"getHelp"),"\n              "),u.xp6(6),u.hij("\n                ",u.lcZ(48,24,"getApps"),"\n              "),u.xp6(8),u.hij("\n                ",u.lcZ(56,26,"lockNow"),"\n              "),u.xp6(6),u.hij("\n                ",u.lcZ(62,28,"logOut"),"\n              ")}}const jn=function(e){return{"tw-border-0 tw-border-b tw-border-solid tw-border-secondary-300 tw-bg-background-alt tw-pb-0":e}},kn=function(e){return{"tw-hidden":e}};function Cn(e,t){if(1&e&&(u.TgZ(0,"header",1),u._uU(1,"\n  "),u.TgZ(2,"div",2),u._uU(3,"\n    "),u.TgZ(4,"div",3),u._uU(5,"\n      "),u.Hsn(6),u._uU(7,"\n      "),u.TgZ(8,"div",4,5),u._uU(10,"\n        "),u.Hsn(11,1),u._uU(12,"\n      "),u.qZA(),u._uU(13,"\n      "),u.YNc(14,Pn,6,7,"h1",6),u._uU(15,"\n    "),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"div",7),u._uU(18,"\n      "),u.TgZ(19,"div",8),u._uU(20,"\n        "),u.Hsn(21,2),u._uU(22,"\n        "),u._UZ(23,"product-switcher"),u._uU(24,"\n        "),u.YNc(25,qn,66,30,"ng-container",9),u.ALo(26,"async"),u._uU(27,"\n      "),u.qZA(),u._uU(28,"\n      "),u.TgZ(29,"div",10,11),u._uU(31,"\n        "),u.Hsn(32,3),u._uU(33,"\n      "),u.qZA(),u._uU(34,"\n    "),u.qZA(),u._uU(35,"\n  "),u.qZA(),u._uU(36,"\n  "),u.TgZ(37,"div",12,13),u._uU(39,"\n    "),u.Hsn(40,4),u._uU(41,"\n  "),u.qZA(),u._uU(42,"\n"),u.qZA()),2&e){const e=u.MAs(9),t=u.MAs(30),n=u.MAs(38),i=u.oxw();u.Q6J("ngClass",u.VKq(8,jn,0!==n.childElementCount)),u.xp6(8),u.Q6J("ngClass",u.VKq(10,kn,0===e.childElementCount)),u.xp6(6),u.Q6J("ngIf",0===e.childElementCount),u.xp6(11),u.Q6J("ngIf",u.lcZ(26,6,i.account$)),u.xp6(4),u.Q6J("ngClass",u.VKq(12,kn,0===t.childElementCount)),u.xp6(8),u.Q6J("ngClass",u.VKq(14,kn,0===n.childElementCount))}}const Ln=[[["","slot","breadcrumbs"]],[["","slot","title"]],"*",[["","slot","secondary"]],[["","slot","tabs"]]];class On{constructor(e,t,n){this.route=e,this.stateService=t,this.messagingService=n,this.routeData$=this.route.data.pipe((0,Z.U)((e=>({titleId:e.titleId})))),this.account$=(0,W.a)([this.stateService.activeAccount$,this.stateService.accounts$]).pipe((0,Z.U)((([e,t])=>{var n;return null===(n=t[e])||void 0===n?void 0:n.profile})))}lock(){this.messagingService.send("lockVault")}logout(){this.messagingService.send("logout")}}On.ɵfac=function(e){return new(e||On)(u.Y36(s.gz),u.Y36(Un.b),u.Y36(yn.o))},On.ɵcmp=u.Xpm({type:On,selectors:[["sm-header"]],inputs:{title:"title",icon:"icon"},ngContentSelectors:["[slot=breadcrumbs]","[slot=title]","*","[slot=secondary]","[slot=tabs]"],decls:3,vars:3,consts:[["class","-tw-m-6 tw-mb-3 tw-flex tw-flex-col tw-p-6",3,"ngClass",4,"ngIf"],[1,"-tw-m-6","tw-mb-3","tw-flex","tw-flex-col","tw-p-6",3,"ngClass"],[1,"tw-flex"],[1,"tw-flex","tw-min-w-0","tw-flex-1","tw-flex-col","tw-gap-2"],[3,"ngClass"],["titleContainer",""],["bitTypography","h1","noMargin","","class","tw-m-0 tw-mr-2 tw-truncate tw-leading-10",3,"title",4,"ngIf"],[1,"tw-ml-auto","tw-flex","tw-flex-col","tw-gap-4"],[1,"tw-flex","tw-min-w-max","tw-items-center","tw-justify-end","tw-gap-2"],[4,"ngIf"],[1,"tw-ml-auto",3,"ngClass"],["contentContainer",""],[1,"-tw-mx-4","-tw-mb-px",3,"ngClass"],["tabsContainer",""],["bitTypography","h1","noMargin","",1,"tw-m-0","tw-mr-2","tw-truncate","tw-leading-10",3,"title"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true"],["type","button",1,"tw-border-0","tw-bg-transparent","tw-p-0",3,"bitMenuTriggerFor"],[3,"id","text"],["accountMenu",""],[1,"tw-flex","tw-min-w-52","tw-max-w-72","tw-flex-col"],["appStopProp","",1,"tw-flex","tw-items-center","tw-py-1","tw-px-4","tw-leading-tight","tw-text-info"],[3,"text","id"],[1,"tw-ml-2","tw-block","tw-overflow-hidden","tw-whitespace-nowrap"],[1,"tw-block","tw-overflow-hidden","tw-whitespace-nowrap","tw-text-muted"],["bitMenuItem","","routerLink","/settings/account"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-user"],["bitMenuItem","","href","https://bitwarden.com/help/","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-question-circle"],["bitMenuItem","","href","https://bitwarden.com/download/","target","_blank","rel","noopener"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-download"],["bitMenuItem","","type","button",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-lock"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sign-out"]],template:function(e,t){1&e&&(u.F$t(Ln),u.YNc(0,Cn,43,16,"header",0),u.ALo(1,"async"),u._uU(2,"\n")),2&e&&u.Q6J("ngIf",u.lcZ(1,1,t.routeData$))},dependencies:[c.mk,c.O5,s.rH,Zn._,bn.A,Bt.M,$t.t,Ft.e,xn.n,_n.t,Sn.m,c.Ov,ee.C,Tn.z],encapsulation:2});class Dn{constructor(e,t){this.route=e,this.dialogService=t,this.destroy$=new he.x}ngOnInit(){this.route.params.pipe((0,ve.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.organizationId}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openSecretDialog(){this.dialogService.open(jt,{data:{organizationId:this.organizationId,operation:xt.Add}})}openProjectDialog(){this.dialogService.open(ut,{data:{organizationId:this.organizationId,operation:xt.Add}})}openServiceAccountDialog(){this.dialogService.open(Et,{data:{organizationId:this.organizationId,operation:xt.Add}})}}function Jn(e,t){1&e&&(u.TgZ(0,"div",7),u._uU(1,"\n  "),u._UZ(2,"i",8),u._uU(3,"\n"),u.qZA())}function Nn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-no-items"),u._uU(1,"\n  "),u.ynx(2,9),u._uU(3),u.ALo(4,"i18n"),u.BQk(),u._uU(5,"\n  "),u.ynx(6,10),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n  "),u.TgZ(10,"button",11),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.newProjectEvent.emit())})),u._uU(11,"\n    "),u._UZ(12,"i",12),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n"),u.qZA()}2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,3,"projectsNoItemsTitle")),u.xp6(4),u.Oqu(u.lcZ(8,5,"projectsNoItemsMessage")),u.xp6(6),u.hij("\n    ",u.lcZ(14,7,"newProject"),"\n  "))}Dn.ɵfac=function(e){return new(e||Dn)(u.Y36(s.gz),u.Y36(Fe.x))},Dn.ɵcmp=u.Xpm({type:Dn,selectors:[["sm-new-menu"]],decls:28,vars:13,consts:[["type","button","bitButton","","buttonType","primary",1,"tw-min-w-max",3,"bitMenuTriggerFor"],["aria-hidden","true",1,"bwi","bwi-angle-down"],["newMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-sitemap"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-key"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-wrench"]],template:function(e,t){if(1&e&&(u.TgZ(0,"button",0),u._uU(1),u.ALo(2,"i18n"),u._UZ(3,"i",1),u._uU(4,"\n"),u.qZA(),u._uU(5,"\n\n"),u.TgZ(6,"bit-menu",null,2),u._uU(8,"\n  "),u.TgZ(9,"button",3),u.NdJ("click",(function(){return t.openProjectDialog()})),u._uU(10,"\n    "),u._UZ(11,"i",4),u._uU(12),u.ALo(13,"i18n"),u.qZA(),u._uU(14,"\n  "),u.TgZ(15,"button",3),u.NdJ("click",(function(){return t.openSecretDialog()})),u._uU(16,"\n    "),u._UZ(17,"i",5),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n  "),u.TgZ(21,"button",3),u.NdJ("click",(function(){return t.openServiceAccountDialog()})),u._uU(22,"\n    "),u._UZ(23,"i",6),u._uU(24),u.ALo(25,"i18n"),u.qZA(),u._uU(26,"\n"),u.qZA(),u._uU(27,"\n")),2&e){const e=u.MAs(7);u.Q6J("bitMenuTriggerFor",e),u.xp6(1),u.hij("\n  ",u.lcZ(2,5,"new")," "),u.xp6(11),u.hij("\n    ",u.lcZ(13,7,"project"),"\n  "),u.xp6(6),u.hij("\n    ",u.lcZ(19,9,"secret"),"\n  "),u.xp6(6),u.hij("\n    ",u.lcZ(25,11,"serviceAccount"),"\n  ")}},dependencies:[ye.r,Bt.M,$t.t,Ft.e,ee.C],encapsulation:2});const zn=function(e,t){return["/sm",e,"projects",t]};function Yn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",23),u._uU(1,"\n      "),u.TgZ(2,"td",24),u._uU(3,"\n        "),u.TgZ(4,"input",25),u.NdJ("change",(function(t){const n=u.CHM(e).$implicit,i=u.oxw(3);return u.KtG(t?i.selection.toggle(n.id):null)})),u.qZA(),u._uU(5,"\n      "),u.qZA(),u._uU(6,"\n      "),u.TgZ(7,"td",24),u._uU(8,"\n        "),u.TgZ(9,"div",26),u._uU(10,"\n          "),u._UZ(11,"i",27),u._uU(12,"\n          "),u.TgZ(13,"a",28),u._uU(14),u.qZA(),u._uU(15,"\n        "),u.qZA(),u._uU(16,"\n      "),u.qZA(),u._uU(17,"\n      "),u.TgZ(18,"td",29),u._uU(19),u.ALo(20,"date"),u.qZA(),u._uU(21,"\n      "),u.TgZ(22,"td",24),u._uU(23,"\n        "),u._UZ(24,"button",20),u.ALo(25,"i18n"),u.ALo(26,"i18n"),u._uU(27,"\n      "),u.qZA(),u._uU(28,"\n      "),u.TgZ(29,"bit-menu",null,30),u._uU(31,"\n        "),u.TgZ(32,"button",4),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.editProjectEvent.emit(t.id))})),u._uU(33,"\n          "),u._UZ(34,"i",31),u._uU(35),u.ALo(36,"i18n"),u.qZA(),u._uU(37,"\n        "),u.TgZ(38,"a",32),u._uU(39,"\n          "),u._UZ(40,"i",33),u._uU(41),u.ALo(42,"i18n"),u.qZA(),u._uU(43,"\n        "),u.TgZ(44,"button",4),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.deleteProject(t.id))})),u._uU(45,"\n          "),u._UZ(46,"i",5),u._uU(47,"\n          "),u.TgZ(48,"span",6),u._uU(49),u.ALo(50,"i18n"),u.qZA(),u._uU(51,"\n        "),u.qZA(),u._uU(52,"\n      "),u.qZA(),u._uU(53,"\n    "),u.qZA()}if(2&e){const e=t.$implicit,n=u.MAs(30),i=u.oxw(3);u.xp6(4),u.Q6J("checked",i.selection.isSelected(e.id)),u.xp6(9),u.Q6J("routerLink",u.WLB(24,zn,e.organizationId,e.id)),u.xp6(1),u.Oqu(e.name),u.xp6(5),u.Oqu(u.xi3(20,11,e.revisionDate,"medium")),u.xp6(5),u.Q6J("bitMenuTriggerFor",n)("title",u.lcZ(25,14,"options")),u.uIk("aria-label",u.lcZ(26,16,"options")),u.xp6(11),u.hij("\n          ",u.lcZ(36,18,"editProject"),"\n        "),u.xp6(3),u.Q6J("routerLink",u.WLB(27,zn,e.organizationId,e.id)),u.xp6(3),u.hij("\n          ",u.lcZ(42,20,"viewProject"),"\n        "),u.xp6(8),u.Oqu(u.lcZ(50,22,"deleteProject"))}}function En(e,t){if(1&e&&(u._uU(0,"\n    "),u.YNc(1,Yn,54,30,"tr",22),u.ALo(2,"async"),u._uU(3,"\n  ")),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("ngForOf",u.lcZ(2,1,e))}}function Mn(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-table",13),u._uU(1,"\n  "),u.ynx(2,14),u._uU(3,"\n    "),u.TgZ(4,"tr"),u._uU(5,"\n      "),u.TgZ(6,"th",15),u._uU(7,"\n        "),u.TgZ(8,"label",16),u._uU(9,"\n          "),u.TgZ(10,"input",17),u.NdJ("change",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(t?n.toggleAll():null)})),u.qZA(),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.qZA(),u._uU(14,"\n      "),u.TgZ(15,"th",18),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"th",19),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"th",15),u._uU(24,"\n        "),u._UZ(25,"button",20),u.ALo(26,"i18n"),u.ALo(27,"i18n"),u._uU(28,"\n      "),u.qZA(),u._uU(29,"\n    "),u.qZA(),u._uU(30,"\n  "),u.BQk(),u._uU(31,"\n  "),u.YNc(32,En,4,3,"ng-template",21),u._uU(33,"\n"),u.qZA()}if(2&e){const e=u.oxw(),t=u.MAs(7);u.Q6J("dataSource",e.dataSource),u.xp6(10),u.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),u.xp6(1),u.hij("\n          ",u.lcZ(12,9,"all"),"\n        "),u.xp6(5),u.Oqu(u.lcZ(17,11,"name")),u.xp6(4),u.Oqu(u.lcZ(21,13,"lastEdited")),u.xp6(5),u.Q6J("bitMenuTriggerFor",t)("title",u.lcZ(26,15,"options")),u.uIk("aria-label",u.lcZ(27,17,"options"))}}class Qn{get projects(){return this._projects}set projects(e){this.selection.clear(),this._projects=e,this.dataSource.data=e}set search(e){this.dataSource.filter=e}constructor(e,t){this.i18nService=e,this.platformUtilsService=t,this.dataSource=new Qt.G,this.editProjectEvent=new u.vpe,this.deleteProjectEvent=new u.vpe,this.onProjectCheckedEvent=new u.vpe,this.newProjectEvent=new u.vpe,this.destroy$=new he.x,this.selection=new Mt.Ov(!0,[]),this.selection.changed.pipe((0,ve.R)(this.destroy$)).subscribe((e=>this.onProjectCheckedEvent.emit(this.selection.selected)))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}isAllSelected(){return this.selection.selected.length===this.projects.length}toggleAll(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.projects.map((e=>e.id)))}deleteProject(e){this.deleteProjectEvent.emit(this.projects.filter((t=>t.id==e)))}bulkDeleteProjects(){this.selection.selected.length>=1?this.deleteProjectEvent.emit(this.projects.filter((e=>this.selection.isSelected(e.id)))):this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nothingSelected"))}}Qn.ɵfac=function(e){return new(e||Qn)(u.Y36(Be.D),u.Y36($e.P))},Qn.ɵcmp=u.Xpm({type:Qn,selectors:[["sm-projects-list"]],inputs:{projects:"projects",search:"search"},outputs:{editProjectEvent:"editProjectEvent",deleteProjectEvent:"deleteProjectEvent",onProjectCheckedEvent:"onProjectCheckedEvent",newProjectEvent:"newProjectEvent"},decls:19,vars:6,consts:[["class","tw-items-center tw-justify-center tw-pt-64 tw-text-center",4,"ngIf"],[4,"ngIf"],[3,"dataSource",4,"ngIf"],["tableMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash","tw-text-danger"],[1,"tw-text-danger"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["slot","title"],["slot","description"],["type","button","slot","button","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"],[3,"dataSource"],["header",""],["bitCell","",1,"tw-w-0"],[1,"!tw-mb-0","tw-flex","tw-w-fit","tw-gap-2","!tw-font-bold","!tw-text-muted"],["type","checkbox",3,"checked","indeterminate","change"],["bitCell","","bitSortable","name","default",""],["bitCell","","bitSortable","revisionDate"],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"bitMenuTriggerFor","title"],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell",""],["type","checkbox",3,"checked","change"],[1,"tw-flex","tw-items-center","tw-gap-4","tw-break-all"],["aria-hidden","true",1,"bwi","bwi-collection","tw-text-muted"],["bitLink","",3,"routerLink"],["bitCell","",1,"tw-whitespace-nowrap"],["projectMenu",""],["aria-hidden","true",1,"bwi","bwi-fw","bwi-pencil"],["bitMenuItem","",3,"routerLink"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-eye"]],template:function(e,t){1&e&&(u.YNc(0,Jn,4,0,"div",0),u._uU(1,"\n\n"),u.YNc(2,Nn,16,9,"bit-no-items",1),u._uU(3,"\n\n"),u.YNc(4,Mn,34,19,"bit-table",2),u._uU(5,"\n\n"),u.TgZ(6,"bit-menu",null,3),u._uU(8,"\n  "),u.TgZ(9,"button",4),u.NdJ("click",(function(){return t.bulkDeleteProjects()})),u._uU(10,"\n    "),u._UZ(11,"i",5),u._uU(12,"\n    "),u.TgZ(13,"span",6),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n  "),u.qZA(),u._uU(17,"\n"),u.qZA(),u._uU(18,"\n")),2&e&&(u.Q6J("ngIf",!t.projects),u.xp6(2),u.Q6J("ngIf",0==(null==t.projects?null:t.projects.length)),u.xp6(2),u.Q6J("ngIf",(null==t.projects?null:t.projects.length)>=1),u.xp6(10),u.Oqu(u.lcZ(15,4,"deleteProjects")))},dependencies:[c.sg,c.O5,s.rH,ye.r,P.Q,Rt.r,Bt.M,$t.t,Ft.e,xe.a,Se.Y,Te.v,Kt,xe.f,Xt,c.Ov,c.uU,ee.C],encapsulation:2});const Gn=function(e){return{"tw-text-primary-700 tw-line-through tw-decoration-primary-700 tw-opacity-50":e}};function Rn(e,t){if(1&e&&(u._uU(0,"\n  "),u._UZ(1,"i",5),u.TgZ(2,"span",6),u._uU(3),u._UZ(4,"i",7),u.qZA(),u._uU(5,"\n")),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngClass",e.completed?"bwi-check tw-text-success":e.icon),u.xp6(1),u.Q6J("ngClass",u.VKq(3,Gn,e.completed)),u.xp6(1),u.Oqu(e.title)}}function Bn(e,t){1&e&&u.GkF(0)}function $n(e,t){if(1&e&&(u.TgZ(0,"a",8),u._uU(1,"\n    "),u.YNc(2,Bn,1,0,"ng-container",9),u._uU(3,"\n  "),u.qZA()),2&e){const e=u.oxw(),t=u.MAs(1);u.Q6J("routerLink",e.route),u.xp6(2),u.Q6J("ngTemplateOutlet",t)}}function Fn(e,t){1&e&&u.GkF(0)}function Vn(e,t){if(1&e&&(u.TgZ(0,"button",10),u._uU(1,"\n    "),u.YNc(2,Fn,1,0,"ng-container",9),u._uU(3,"\n  "),u.qZA()),2&e){u.oxw();const e=u.MAs(1);u.xp6(2),u.Q6J("ngTemplateOutlet",e)}}const Kn=function(e){return{"tw-opacity-50":e}};class Hn{constructor(){this.completed=!1,this.icon="bwi-info-circle"}handleClick(e){e.stopPropagation()}}function Wn(e,t){if(1&e&&(u.TgZ(0,"div",3),u._uU(1,"\n      "),u._uU(2,"\n      "),u.TgZ(3,"div",4),u._uU(4," "),u.qZA(),u._uU(5,"\n      "),u.TgZ(6,"div",5),u._uU(7),u.qZA(),u._uU(8,"\n    "),u.qZA()),2&e){const e=u.oxw();u.xp6(7),u.Oqu(e.textContent)}}Hn.ɵfac=function(e){return new(e||Hn)},Hn.ɵcmp=u.Xpm({type:Hn,selectors:[["sm-onboarding-task"]],hostAttrs:[1,"tw-max-w-max"],inputs:{completed:"completed",icon:"icon",title:"title",route:"route"},ngContentSelectors:["*"],decls:15,vars:5,consts:[["content",""],[1,"tw-list-none"],["bitLink","",3,"routerLink",4,"ngIf"],["type","button","bitLink","",4,"ngIf"],[1,"tw-ml-8","tw-mt-1","tw-text-sm",3,"ngClass","click"],[1,"bwi","bwi-fw","!tw-mr-4",3,"ngClass"],[3,"ngClass"],[1,"bwi","bwi-angle-right","tw-ml-1"],["bitLink","",3,"routerLink"],[4,"ngTemplateOutlet"],["type","button","bitLink",""]],template:function(e,t){1&e&&(u.F$t(),u.YNc(0,Rn,6,5,"ng-template",null,0,u.W1O),u._uU(2,"\n\n"),u.TgZ(3,"li",1),u._uU(4,"\n  "),u.YNc(5,$n,4,2,"a",2),u._uU(6,"\n  "),u.YNc(7,Vn,4,1,"button",3),u._uU(8,"\n  "),u.TgZ(9,"div",4),u.NdJ("click",(function(e){return t.handleClick(e)})),u._uU(10,"\n    "),u.Hsn(11),u._uU(12,"\n  "),u.qZA(),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n")),2&e&&(u.xp6(5),u.Q6J("ngIf",t.route),u.xp6(2),u.Q6J("ngIf",!t.route),u.xp6(2),u.Q6J("ngClass",u.VKq(3,Kn,t.completed)))},dependencies:[c.mk,c.O5,c.tP,s.rH,Rt.r,Rt._],encapsulation:2});const Xn=function(e){return{width:e}},ei={small:["tw-h-1"],default:["tw-h-4"],large:["tw-h-6"]},ti={danger:["tw-bg-danger-500"],primary:["tw-bg-primary-500"],success:["tw-bg-success-500"],warning:["tw-bg-warning-500"]};class ni{constructor(){this.barWidth=0,this.bgColor="primary",this.showText=!0,this.size="default"}get displayText(){return this.showText&&"small"!==this.size}get outerBarStyles(){return["tw-overflow-hidden","tw-rounded","tw-bg-secondary-100"].concat(ei[this.size])}get innerBarStyles(){return["tw-flex","tw-justify-center","tw-items-center","tw-whitespace-nowrap","tw-text-xs","tw-font-semibold","tw-text-contrast","tw-transition-all"].concat(ei[this.size]).concat(ti[this.bgColor])}get textContent(){return this.text||this.barWidth+"%"}}function ii(e,t){if(1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.hij("\n        ",u.Dn7(2,1,"complete",e.amountCompleted,e.tasks.length),"\n      ")}}function oi(e,t){1&e&&(u._uU(0,"\n  "),u._UZ(1,"i",13),u._uU(2,"\n"))}ni.ɵfac=function(e){return new(e||ni)},ni.ɵcmp=u.Xpm({type:ni,selectors:[["bit-progress"]],inputs:{barWidth:"barWidth",bgColor:"bgColor",showText:"showText",size:"size",text:"text"},decls:8,vars:7,consts:[[3,"ngClass"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngClass","ngStyle"],["class","tw-flex tw-h-full tw-flex-wrap tw-items-center tw-overflow-hidden",4,"ngIf"],[1,"tw-flex","tw-h-full","tw-flex-wrap","tw-items-center","tw-overflow-hidden"],[1,"tw-h-full"],[1,"tw-pr-1"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"div",1),u._uU(3,"\n    "),u.YNc(4,Wn,9,1,"div",2),u._uU(5,"\n  "),u.qZA(),u._uU(6,"\n"),u.qZA(),u._uU(7,"\n")),2&e&&(u.Q6J("ngClass",t.outerBarStyles),u.xp6(2),u.Q6J("ngClass",t.innerBarStyles)("ngStyle",u.VKq(5,Xn,t.barWidth+"%")),u.uIk("aria-valuenow",t.barWidth),u.xp6(2),u.Q6J("ngIf",t.displayText))},dependencies:[c.mk,c.O5,c.PC],encapsulation:2});class ci{constructor(){this.dismiss=new u.vpe,this.open=!0,this.visible=!1}get amountCompleted(){return this.tasks.filter((e=>e.completed)).length}get barWidth(){return 0===this.tasks.length?0:this.amountCompleted/this.tasks.length*100}toggle(){this.open=!this.open}}function si(e,t){if(1&e&&(u.TgZ(0,"div",3),u._uU(1,"\n    "),u.Hsn(2,1),u._uU(3,"\n  "),u.qZA()),2&e){const e=u.oxw();u.uIk("id",e.contentId)}}ci.ɵfac=function(e){return new(e||ci)},ci.ɵcmp=u.Xpm({type:ci,selectors:[["sm-onboarding"]],contentQueries:function(e,t,n){if(1&e&&u.Suo(n,Hn,4),2&e){let e;u.iGM(e=u.CRH())&&(t.tasks=e)}},inputs:{title:"title"},outputs:{dismiss:"dismiss"},ngContentSelectors:["*"],decls:36,vars:9,consts:[["open","",1,"tw-rounded-sm","tw-bg-background-alt","tw-text-main",3,"toggle"],["details",""],[1,"tw-list-none","tw-p-2","tw-px-4"],[1,"tw-flex","tw-select-none","tw-items-center","tw-gap-4"],["aria-hidden","true",1,"bwi","bwi-dashboard","tw-text-3xl","tw-text-primary-500"],[1,"tw-text-lg"],[1,"tw-flex-1",3,"showText","barWidth"],[4,"ngIf","ngIfElse"],["aria-hidden","true",1,"bwi","tw-my-auto",3,"ngClass"],[1,"tw-ml-6","tw-mb-0","tw-flex","tw-flex-col","tw-gap-4"],[1,"tw-p-4","tw-pt-0"],["bitLink","","type","button",1,"tw-ml-auto","tw-block",3,"click"],["spinner",""],[1,"bwi","bwi-spinner","bwi-spin"]],template:function(e,t){if(1&e&&(u.F$t(),u.TgZ(0,"details",0,1),u.NdJ("toggle",(function(){return t.toggle()})),u._uU(2,"\n  "),u.TgZ(3,"summary",2),u._uU(4,"\n    "),u.TgZ(5,"div",3),u._uU(6,"\n      "),u._UZ(7,"i",4),u._uU(8,"\n      "),u.TgZ(9,"div",5),u._uU(10),u.qZA(),u._uU(11,"\n      "),u._UZ(12,"bit-progress",6),u._uU(13,"\n      "),u.YNc(14,ii,3,5,"span",7),u._uU(15,"\n      "),u._UZ(16,"i",8),u._uU(17,"\n    "),u.qZA(),u._uU(18,"\n  "),u.qZA(),u._uU(19,"\n  "),u.TgZ(20,"ul",9),u._uU(21,"\n    "),u.Hsn(22),u._uU(23,"\n  "),u.qZA(),u._uU(24,"\n  "),u.TgZ(25,"div",10),u._uU(26,"\n    "),u.TgZ(27,"button",11),u.NdJ("click",(function(){return t.dismiss.emit()})),u._uU(28),u.ALo(29,"i18n"),u.qZA(),u._uU(30,"\n  "),u.qZA(),u._uU(31,"\n"),u.qZA(),u._uU(32,"\n\n"),u.YNc(33,oi,3,0,"ng-template",null,12,u.W1O),u._uU(35,"\n")),2&e){const e=u.MAs(34);u.xp6(10),u.Oqu(t.title),u.xp6(2),u.Q6J("showText",!1)("barWidth",t.barWidth),u.xp6(2),u.Q6J("ngIf",t.tasks.length>0)("ngIfElse",e),u.xp6(2),u.Q6J("ngClass",t.open?"bwi-angle-down":"bwi-angle-up"),u.xp6(12),u.hij("\n      ",u.lcZ(29,7,"dismiss"),"\n    ")}},dependencies:[c.mk,c.O5,Rt._,ni,ee.C],encapsulation:2});const ri=[[["","slot","summary"]],"*"];class ai{constructor(){this.open=!0,this.contentId=Math.random().toString(36).substring(2)}toggle(){this.open=!this.open}}ai.ɵfac=function(e){return new(e||ai)},ai.ɵcmp=u.Xpm({type:ai,selectors:[["sm-section"]],inputs:{open:"open"},ngContentSelectors:["[slot=summary]","*"],decls:13,vars:4,consts:[[1,"tw-flex","tw-max-w-min","tw-items-center","tw-gap-2"],["type","button",3,"bitIconButton","click"],["class","tw-mt-4",4,"ngIf"],[1,"tw-mt-4"]],template:function(e,t){1&e&&(u.F$t(ri),u.TgZ(0,"section"),u._uU(1,"\n  "),u.TgZ(2,"header",0),u._uU(3,"\n    "),u.TgZ(4,"div"),u.Hsn(5),u.qZA(),u._uU(6,"\n    "),u.TgZ(7,"button",1),u.NdJ("click",(function(){return t.toggle()})),u.qZA(),u._uU(8,"\n  "),u.qZA(),u._uU(9,"\n  "),u.YNc(10,si,4,1,"div",2),u._uU(11,"\n"),u.qZA(),u._uU(12,"\n")),2&e&&(u.xp6(7),u.Q6J("bitIconButton",t.open?"bwi-angle-up":"bwi-angle-down"),u.uIk("aria-expanded",t.open)("aria-controls",t.contentId),u.xp6(3),u.Q6J("ngIf",t.open))},dependencies:[c.O5,P.Q],encapsulation:2});var ui=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function li(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"sm-onboarding-task",16),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(3);return u.KtG(t.openNewProjectDialog())})),u.ALo(1,"i18n"),u.qZA()}if(2&e){const e=u.oxw(2).ngIf;u.Q6J("title",u.lcZ(1,2,"createProject"))("completed",e.tasks.createProject)}}const di=function(){return["settings","import"]};function pi(e,t){if(1&e&&(u._UZ(0,"sm-onboarding-task",17),u.ALo(1,"i18n")),2&e){const e=u.oxw(2).ngIf;u.Q6J("title",u.lcZ(1,3,"importSecrets"))("route",u.DdM(5,di))("completed",e.tasks.importSecrets)}}function hi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"sm-onboarding-task",18),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(3);return u.KtG(t.openSecretDialog())})),u.ALo(1,"i18n"),u.qZA()}if(2&e){const e=u.oxw(2).ngIf;u.Q6J("title",u.lcZ(1,2,"createSecret"))("completed",e.tasks.createSecret)}}function gi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"sm-onboarding",9),u.NdJ("dismiss",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.hideOnboarding())})),u.ALo(1,"i18n"),u._uU(2,"\n    "),u.TgZ(3,"sm-onboarding-task",10),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.openServiceAccountDialog())})),u.ALo(4,"i18n"),u._uU(5,"\n      "),u.TgZ(6,"span",11),u._uU(7),u.ALo(8,"i18n"),u.TgZ(9,"a",12),u._uU(10),u.ALo(11,"i18n"),u.qZA(),u._uU(12,"\n      "),u.qZA(),u._uU(13,"\n    "),u.qZA(),u._uU(14,"\n    "),u.YNc(15,li,2,4,"sm-onboarding-task",13),u._uU(16,"\n    "),u.YNc(17,pi,2,6,"sm-onboarding-task",14),u._uU(18,"\n    "),u.YNc(19,hi,2,4,"sm-onboarding-task",15),u._uU(20,"\n  "),u.qZA()}if(2&e){const e=u.oxw().ngIf,t=u.oxw();u.Q6J("title",u.lcZ(1,8,"getStarted")),u.xp6(3),u.Q6J("title",u.lcZ(4,10,"createServiceAccount"))("completed",e.tasks.createServiceAccount),u.xp6(4),u.hij("\n        ",u.lcZ(8,12,"downloadThe"),"\n        "),u.xp6(3),u.Oqu(u.lcZ(11,14,"smCLI")),u.xp6(5),u.Q6J("ngIf",t.userIsAdmin),u.xp6(2),u.Q6J("ngIf",t.userIsAdmin),u.xp6(2),u.Q6J("ngIf",e.tasks.createProject)}}function vi(e,t){if(1&e&&(u.TgZ(0,"div",19),u._uU(1),u.ALo(2,"i18n"),u.TgZ(3,"a",20),u._uU(4),u.ALo(5,"i18n"),u.qZA(),u._uU(6,"\n      "),u.qZA()),2&e){const e=u.oxw().ngIf;u.xp6(1),u.hij("\n        ",u.Dn7(2,2,"showingPortionOfTotal",e.latestProjects.length,e.allProjects.length),"\n        "),u.xp6(3),u.Oqu(u.lcZ(5,6,"viewAll"))}}function fi(e,t){if(1&e&&(u.TgZ(0,"div",19),u._uU(1),u.ALo(2,"i18n"),u.TgZ(3,"a",21),u._uU(4),u.ALo(5,"i18n"),u.qZA(),u._uU(6,"\n      "),u.qZA()),2&e){const e=u.oxw().ngIf;u.xp6(1),u.hij("\n        ",u.Dn7(2,2,"showingPortionOfTotal",e.latestSecrets.length,e.allSecrets.length),"\n        "),u.xp6(3),u.Oqu(u.lcZ(5,6,"viewAll"))}}function mi(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u._uU(1,"\n  "),u.YNc(2,gi,21,16,"sm-onboarding",3),u._uU(3,"\n\n  "),u.TgZ(4,"div",4),u._uU(5,"\n    "),u.TgZ(6,"sm-section"),u._uU(7,"\n      "),u.TgZ(8,"h2",5),u._uU(9),u.ALo(10,"i18n"),u.qZA(),u._uU(11,"\n      "),u.TgZ(12,"sm-projects-list",6),u.NdJ("newProjectEvent",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openNewProjectDialog())}))("editProjectEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openEditProject(t))}))("deleteProjectEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openDeleteProjectDialog(t))})),u.qZA(),u._uU(13,"\n      "),u.YNc(14,vi,7,8,"div",7),u._uU(15,"\n    "),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"sm-section"),u._uU(18,"\n      "),u.TgZ(19,"h2",5),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"sm-secrets-list",8),u.NdJ("deleteSecretsEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openDeleteSecret(t))}))("newSecretEvent",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openNewSecretDialog())}))("editSecretEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openEditSecret(t))}))("copySecretNameEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.copySecretName(t))}))("copySecretValueEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.copySecretValue(t))})),u.qZA(),u._uU(24,"\n      "),u.YNc(25,fi,7,8,"div",7),u._uU(26,"\n    "),u.qZA(),u._uU(27,"\n  "),u.qZA(),u._uU(28,"\n"),u.qZA()}if(2&e){const e=t.ngIf,n=u.oxw();u.xp6(2),u.Q6J("ngIf",n.showOnboarding),u.xp6(7),u.Oqu(u.lcZ(10,7,"projects")),u.xp6(3),u.Q6J("projects",e.latestProjects),u.xp6(2),u.Q6J("ngIf",e.allProjects.length>0),u.xp6(6),u.Oqu(u.lcZ(21,9,"secrets")),u.xp6(3),u.Q6J("secrets",e.latestSecrets),u.xp6(2),u.Q6J("ngIf",e.allSecrets.length>0)}}function wi(e,t){1&e&&(u._uU(0,"\n  "),u.TgZ(1,"div",22),u._uU(2,"\n    "),u._UZ(3,"i",23),u._uU(4,"\n  "),u.qZA(),u._uU(5,"\n"))}class Ai{constructor(e,t,n,i,o,c,s,r,a){this.route=e,this.projectService=t,this.secretService=n,this.serviceAccountService=i,this.dialogService=o,this.organizationService=c,this.stateService=s,this.platformUtilsService=r,this.i18nService=a,this.destroy$=new he.x,this.tableSize=10,this.showOnboarding=!1,this.loading=!0}ngOnInit(){const e=this.route.params.pipe((0,Z.U)((e=>e.organizationId)),(0,ge.x)());e.pipe((0,Z.U)((e=>this.organizationService.get(e))),(0,ve.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.id,this.organizationName=e.name,this.userIsAdmin=e.isAdmin,this.loading=!0}));const t=(0,W.a)([e,this.projectService.project$.pipe((0,fe.O)(null))]).pipe((0,me.w)((([e])=>this.projectService.getProjects(e))),(0,we.B)()),n=(0,W.a)([e,this.secretService.secret$.pipe((0,fe.O)(null)),this.projectService.project$.pipe((0,fe.O)(null))]).pipe((0,me.w)((([e])=>this.secretService.getSecrets(e))),(0,we.B)()),i=(0,W.a)([e,this.serviceAccountService.serviceAccount$.pipe((0,fe.O)(null))]).pipe((0,me.w)((([e])=>this.serviceAccountService.getServiceAccounts(e))),(0,we.B)());this.view$=e.pipe((0,me.w)((e=>(0,W.a)([t,n,i]).pipe((0,me.w)((([t,n,i])=>ui(this,void 0,void 0,(function*(){return{latestProjects:this.getRecentItems(t,this.tableSize),latestSecrets:this.getRecentItems(n,this.tableSize),allProjects:t,allSecrets:n,tasks:yield this.saveCompletedTasks(e,{importSecrets:n.length>0,createSecret:n.length>0,createProject:t.length>0,createServiceAccount:i.length>0})}})))))))),e.pipe((0,me.w)((()=>this.view$.pipe((0,Ae.q)(1)))),(0,ve.R)(this.destroy$)).subscribe((e=>{this.showOnboarding=Object.values(e.tasks).includes(!1),this.loading=!1}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getRecentItems(e,t){return e.sort(((e,t)=>new Date(t.revisionDate).getTime()-new Date(e.revisionDate).getTime())).slice(0,t)}saveCompletedTasks(e,t){return ui(this,void 0,void 0,(function*(){const n=(yield this.stateService.getSMOnboardingTasks())||{},i=Object.fromEntries(Object.entries(t).filter((([e,t])=>!0===t))),o=Object.assign(Object.assign({importSecrets:!1,createSecret:!1,createProject:!1,createServiceAccount:!1},n[e]),i);return this.stateService.setSMOnboardingTasks(Object.assign(Object.assign({},n),{[e]:o})),o}))}openEditProject(e){this.dialogService.open(ut,{data:{organizationId:this.organizationId,operation:xt.Edit,projectId:e}})}openNewProjectDialog(){this.dialogService.open(ut,{data:{organizationId:this.organizationId,operation:xt.Add}})}openServiceAccountDialog(){this.dialogService.open(Et,{data:{organizationId:this.organizationId,operation:xt.Add}})}openDeleteProjectDialog(e){this.dialogService.open(ot,{data:{projects:e}})}openSecretDialog(){this.dialogService.open(jt,{data:{organizationId:this.organizationId,operation:xt.Add}})}openEditSecret(e){this.dialogService.open(jt,{data:{organizationId:this.organizationId,operation:xt.Edit,secretId:e}})}openDeleteSecret(e){this.dialogService.open(bt,{data:{secrets:e}})}openNewSecretDialog(){this.dialogService.open(jt,{data:{organizationId:this.organizationId,operation:xt.Add}})}copySecretName(e){An.copySecretName(e,this.platformUtilsService,this.i18nService)}copySecretValue(e){An.copySecretValue(e,this.platformUtilsService,this.i18nService,this.secretService)}hideOnboarding(){this.showOnboarding=!1,this.saveCompletedTasks(this.organizationId,{importSecrets:!0,createSecret:!0,createProject:!0,createServiceAccount:!0})}}Ai.ɵfac=function(e){return new(e||Ai)(u.Y36(s.gz),u.Y36(Re),u.Y36(At),u.Y36(Dt),u.Y36(Fe.x),u.Y36(b.Mn),u.Y36(Un.b),u.Y36($e.P),u.Y36(Be.D))},Ai.ɵcmp=u.Xpm({type:Ai,selectors:[["sm-overview"]],decls:11,vars:5,consts:[[3,"title"],[4,"ngIf","ngIfElse"],["spinner",""],[3,"title","dismiss",4,"ngIf"],[1,"tw-mt-6","tw-flex","tw-flex-col","tw-gap-6"],["slot","summary","bitTypography","h2","noMargin","",1,"tw-mb-0"],[3,"projects","newProjectEvent","editProjectEvent","deleteProjectEvent"],["class","tw-ml-auto tw-mt-4 tw-max-w-max",4,"ngIf"],["baseRoute","secrets",3,"secrets","deleteSecretsEvent","newSecretEvent","editSecretEvent","copySecretNameEvent","copySecretValueEvent"],[3,"title","dismiss"],["icon","bwi-cli",3,"title","completed","click"],[1,"tw-pl-1"],["bitLink","","href","https://bitwarden.com/help/secrets-manager-cli/","target","_blank"],["icon","bwi-collection",3,"title","completed","click",4,"ngIf"],["icon","bwi-download",3,"title","route","completed",4,"ngIf"],["icon","bwi-key",3,"title","completed","click",4,"ngIf"],["icon","bwi-collection",3,"title","completed","click"],["icon","bwi-download",3,"title","route","completed"],["icon","bwi-key",3,"title","completed","click"],[1,"tw-ml-auto","tw-mt-4","tw-max-w-max"],["bitLink","","routerLink","projects",1,"tw-ml-2"],["bitLink","","routerLink","secrets",1,"tw-ml-2"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"]],template:function(e,t){if(1&e&&(u.TgZ(0,"sm-header",0),u._uU(1,"\n  "),u._UZ(2,"sm-new-menu"),u._uU(3,"\n"),u.qZA(),u._uU(4,"\n\n"),u.YNc(5,mi,29,11,"div",1),u.ALo(6,"async"),u._uU(7,"\n\n"),u.YNc(8,wi,6,0,"ng-template",null,2,u.W1O),u._uU(10,"\n")),2&e){const e=u.MAs(9);u.Q6J("title",t.organizationName),u.xp6(5),u.Q6J("ngIf",u.lcZ(6,3,!t.loading&&t.view$))("ngIfElse",e)}},dependencies:[c.O5,s.rH,Rt.r,_n.t,On,Dn,Qn,An,ci,Hn,ai,c.Ov,ee.C],encapsulation:2});const Ui=[{path:"",component:Ai}];class _i{}_i.ɵfac=function(e){return new(e||_i)},_i.ɵmod=u.oAB({type:_i}),_i.ɵinj=u.cJS({imports:[s.Bz.forChild(Ui),s.Bz]});class yi{}yi.ɵfac=function(e){return new(e||yi)},yi.ɵmod=u.oAB({type:yi}),yi.ɵinj=u.cJS({imports:[w,_i,pe]});var Zi=n(40857);class bi{}class xi extends bi{}class Si extends bi{}class Ti extends bi{}class Ii extends bi{}class Pi extends bi{}class qi{}class ji{}class ki{}class Ci{}class Li extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.read=this.getResponseProperty("Read"),this.write=this.getResponseProperty("Write"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class Oi extends Li{constructor(e){super(e),this.organizationUserId=this.getResponseProperty("OrganizationUserId"),this.organizationUserName=this.getResponseProperty("OrganizationUserName"),this.grantedProjectId=this.getResponseProperty("GrantedProjectId"),this.userId=this.getResponseProperty("UserId")}}class Di extends Li{constructor(e){super(e),this.organizationUserId=this.getResponseProperty("OrganizationUserId"),this.organizationUserName=this.getResponseProperty("OrganizationUserName"),this.grantedServiceAccountId=this.getResponseProperty("GrantedServiceAccountId"),this.userId=this.getResponseProperty("UserId")}}class Ji extends Li{constructor(e){super(e),this.groupId=this.getResponseProperty("GroupId"),this.groupName=this.getResponseProperty("GroupName"),this.grantedProjectId=this.getResponseProperty("GrantedProjectId"),this.currentUserInGroup=this.getResponseProperty("CurrentUserInGroup")}}class Ni extends Li{constructor(e){super(e),this.groupId=this.getResponseProperty("GroupId"),this.groupName=this.getResponseProperty("GroupName"),this.grantedServiceAccountId=this.getResponseProperty("GrantedServiceAccountId"),this.currentUserInGroup=this.getResponseProperty("CurrentUserInGroup")}}class zi extends Li{constructor(e){super(e),this.serviceAccountId=this.getResponseProperty("ServiceAccountId"),this.serviceAccountName=this.getResponseProperty("ServiceAccountName"),this.grantedProjectId=this.getResponseProperty("GrantedProjectId"),this.grantedProjectName=this.getResponseProperty("GrantedProjectName")}}class Yi extends Je.c{constructor(e){super(e);const t=this.getResponseProperty("UserAccessPolicies");this.userAccessPolicies=t.map((e=>new Oi(e)));const n=this.getResponseProperty("GroupAccessPolicies");this.groupAccessPolicies=n.map((e=>new Ji(e)));const i=this.getResponseProperty("ServiceAccountAccessPolicies");this.serviceAccountAccessPolicies=i.map((e=>new zi(e)))}}class Ei extends Je.c{constructor(e){super(e);const t=this.getResponseProperty("UserAccessPolicies");this.userAccessPolicies=t.map((e=>new Di(e)));const n=this.getResponseProperty("GroupAccessPolicies");this.groupAccessPolicies=n.map((e=>new Ni(e)))}}class Mi{}class Qi{}class Gi{}class Ri extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.type=this.getResponseProperty("Type"),this.email=this.getResponseProperty("Email")}}var Bi=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class $i{constructor(e,t,n,i){this.cryptoService=e,this.organizationService=t,this.apiService=n,this.encryptService=i,this._projectAccessPolicyChanges$=new he.x,this._serviceAccountAccessPolicyChanges$=new he.x,this._serviceAccountGrantedPolicyChanges$=new he.x,this.projectAccessPolicyChanges$=this._projectAccessPolicyChanges$.asObservable(),this.serviceAccountAccessPolicyChanges$=this._serviceAccountAccessPolicyChanges$.asObservable(),this.serviceAccountGrantedPolicyChanges$=this._serviceAccountGrantedPolicyChanges$.asObservable()}refreshProjectAccessPolicyChanges(){this._projectAccessPolicyChanges$.next(null)}refreshServiceAccountAccessPolicyChanges(){this._serviceAccountAccessPolicyChanges$.next(null)}getGrantedPolicies(e,t){return Bi(this,void 0,void 0,(function*(){const n=yield this.apiService.send("GET","/service-accounts/"+e+"/granted-policies",null,!0,!0),i=new Ce.L(n,zi);return yield this.createServiceAccountProjectAccessPolicyViews(i.data,t)}))}createGrantedPolicies(e,t,n){return Bi(this,void 0,void 0,(function*(){const i=this.getGrantedPoliciesCreateRequest(n),o=yield this.apiService.send("POST","/service-accounts/"+t+"/granted-policies",i,!0,!0),c=new Ce.L(o,zi),s=yield this.createServiceAccountProjectAccessPolicyViews(c.data,e);return this._serviceAccountGrantedPolicyChanges$.next(s),s}))}getProjectAccessPolicies(e,t){return Bi(this,void 0,void 0,(function*(){const n=yield this.apiService.send("GET","/projects/"+t+"/access-policies",null,!0,!0),i=new Yi(n);return yield this.createProjectAccessPoliciesView(e,i)}))}getServiceAccountAccessPolicies(e){return Bi(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/service-accounts/"+e+"/access-policies",null,!0,!0),n=new Ei(t);return yield this.createServiceAccountAccessPoliciesView(n)}))}createProjectAccessPolicies(e,t,n){return Bi(this,void 0,void 0,(function*(){const i=this.getAccessPoliciesCreateRequest(n),o=yield this.apiService.send("POST","/projects/"+t+"/access-policies",i,!0,!0),c=new Yi(o),s=yield this.createProjectAccessPoliciesView(e,c);return this._projectAccessPolicyChanges$.next(s),s}))}createServiceAccountAccessPolicies(e,t){return Bi(this,void 0,void 0,(function*(){const n=this.getServiceAccountAccessPoliciesCreateRequest(t),i=yield this.apiService.send("POST","/service-accounts/"+e+"/access-policies",n,!0,!0),o=new Ei(i),c=yield this.createServiceAccountAccessPoliciesView(o);return this._serviceAccountAccessPolicyChanges$.next(c),c}))}deleteAccessPolicy(e){return Bi(this,void 0,void 0,(function*(){yield this.apiService.send("DELETE","/access-policies/"+e,null,!0,!1),this._projectAccessPolicyChanges$.next(null),this._serviceAccountAccessPolicyChanges$.next(null),this._serviceAccountGrantedPolicyChanges$.next(null)}))}updateAccessPolicy(e){return Bi(this,void 0,void 0,(function*(){const t=new Mi;t.read=e.read,t.write=e.write,yield this.apiService.send("PUT","/access-policies/"+e.id,t,!0,!0)}))}needToShowAccessRemovalWarning(e,t,n){return Bi(this,void 0,void 0,(function*(){const i=this.organizationService.get(e);if(i.isOwner||i.isAdmin)return!1;const o=i.userId,c=n.filter((e=>e.accessPolicyId!=t.accessPolicyId)).filter((e=>e.currentUserInGroup&&e.read&&e.write)).length,s=n.filter((e=>e.accessPolicyId!=t.accessPolicyId)).filter((e=>e.userId==o&&e.read&&e.write)).length;return"user"===t.type&&t.userId==o&&0==c||!("group"!==t.type||!t.currentUserInGroup||0!=s||0!=c)}))}createProjectAccessPoliciesView(e,t){return Bi(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e),i=new qi;return i.userAccessPolicies=t.userAccessPolicies.map((e=>this.createUserProjectAccessPolicyView(e))),i.groupAccessPolicies=t.groupAccessPolicies.map((e=>this.createGroupProjectAccessPolicyView(e))),i.serviceAccountAccessPolicies=yield Promise.all(t.serviceAccountAccessPolicies.map((e=>Bi(this,void 0,void 0,(function*(){return yield this.createServiceAccountProjectAccessPolicyView(n,e)}))))),i}))}getAccessPoliciesCreateRequest(e){var t,n,i;const o=new Ci;return(null===(t=e.userAccessPolicies)||void 0===t?void 0:t.length)>0&&(o.userAccessPolicyRequests=e.userAccessPolicies.map((e=>this.getAccessPolicyRequest(e.organizationUserId,e)))),(null===(n=e.groupAccessPolicies)||void 0===n?void 0:n.length)>0&&(o.groupAccessPolicyRequests=e.groupAccessPolicies.map((e=>this.getAccessPolicyRequest(e.groupId,e)))),(null===(i=e.serviceAccountAccessPolicies)||void 0===i?void 0:i.length)>0&&(o.serviceAccountAccessPolicyRequests=e.serviceAccountAccessPolicies.map((e=>this.getAccessPolicyRequest(e.serviceAccountId,e)))),o}createUserProjectAccessPolicyView(e){return Object.assign(Object.assign({},this.createBaseAccessPolicyView(e)),{grantedProjectId:e.grantedProjectId,organizationUserId:e.organizationUserId,organizationUserName:e.organizationUserName,userId:e.userId})}createGroupProjectAccessPolicyView(e){return Object.assign(Object.assign({},this.createBaseAccessPolicyView(e)),{grantedProjectId:e.grantedProjectId,groupId:e.groupId,groupName:e.groupName,currentUserInGroup:e.currentUserInGroup})}createServiceAccountProjectAccessPolicyView(e,t){return Bi(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},this.createBaseAccessPolicyView(t)),{grantedProjectId:t.grantedProjectId,serviceAccountId:t.serviceAccountId,grantedProjectName:t.grantedProjectName?yield this.encryptService.decryptToUtf8(new ke._(t.grantedProjectName),e):null,serviceAccountName:yield this.encryptService.decryptToUtf8(new ke._(t.serviceAccountName),e)})}))}getServiceAccountAccessPoliciesCreateRequest(e){var t,n;const i=new Ci;return(null===(t=e.userAccessPolicies)||void 0===t?void 0:t.length)>0&&(i.userAccessPolicyRequests=e.userAccessPolicies.map((e=>this.getAccessPolicyRequest(e.organizationUserId,e)))),(null===(n=e.groupAccessPolicies)||void 0===n?void 0:n.length)>0&&(i.groupAccessPolicyRequests=e.groupAccessPolicies.map((e=>this.getAccessPolicyRequest(e.groupId,e)))),i}createServiceAccountAccessPoliciesView(e){return Bi(this,void 0,void 0,(function*(){const t=new ji;return t.userAccessPolicies=e.userAccessPolicies.map((e=>this.createUserServiceAccountAccessPolicyView(e))),t.groupAccessPolicies=e.groupAccessPolicies.map((e=>this.createGroupServiceAccountAccessPolicyView(e))),t}))}createUserServiceAccountAccessPolicyView(e){return Object.assign(Object.assign({},this.createBaseAccessPolicyView(e)),{grantedServiceAccountId:e.grantedServiceAccountId,organizationUserId:e.organizationUserId,organizationUserName:e.organizationUserName,userId:e.userId})}createGroupServiceAccountAccessPolicyView(e){return Object.assign(Object.assign({},this.createBaseAccessPolicyView(e)),{grantedServiceAccountId:e.grantedServiceAccountId,groupId:e.groupId,groupName:e.groupName,currentUserInGroup:e.currentUserInGroup})}getPeoplePotentialGrantees(e){return Bi(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/access-policies/people/potential-grantees",null,!0,!0),n=new Ce.L(t,Ri);return yield this.createPotentialGranteeViews(e,n.data)}))}getServiceAccountsPotentialGrantees(e){return Bi(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/access-policies/service-accounts/potential-grantees",null,!0,!0),n=new Ce.L(t,Ri);return yield this.createPotentialGranteeViews(e,n.data)}))}getProjectsPotentialGrantees(e){return Bi(this,void 0,void 0,(function*(){const t=yield this.apiService.send("GET","/organizations/"+e+"/access-policies/projects/potential-grantees",null,!0,!0),n=new Ce.L(t,Ri);return yield this.createPotentialGranteeViews(e,n.data)}))}getOrganizationKey(e){return Bi(this,void 0,void 0,(function*(){return yield this.cryptoService.getOrgKey(e)}))}getAccessPolicyRequest(e,t){const n=new Qi;return n.granteeId=e,n.read=t.read,n.write=t.write,n}createBaseAccessPolicyView(e){return{id:e.id,read:e.read,write:e.write,creationDate:e.creationDate,revisionDate:e.revisionDate}}createPotentialGranteeViews(e,t){return Bi(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e);return yield Promise.all(t.map((e=>Bi(this,void 0,void 0,(function*(){const t=new ki;return t.id=e.id,t.type=e.type,t.email=e.email,"serviceAccount"===e.type||"project"===e.type?t.name=yield this.encryptService.decryptToUtf8(new ke._(e.name),n):t.name=e.name,t})))))}))}getGrantedPoliciesCreateRequest(e){return e.map((e=>{const t=new Gi;return t.grantedId=e.grantedProjectId,t.read=e.read,t.write=e.write,t}))}createServiceAccountProjectAccessPolicyViews(e,t){return Bi(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(t);return yield Promise.all(e.map((e=>Bi(this,void 0,void 0,(function*(){const t=new Pi;return t.id=e.id,t.read=e.read,t.write=e.write,t.creationDate=e.creationDate,t.revisionDate=e.revisionDate,t.serviceAccountId=e.serviceAccountId,t.grantedProjectId=e.grantedProjectId,t.serviceAccountName=e.serviceAccountName?yield this.encryptService.decryptToUtf8(new ke._(e.serviceAccountName),n):null,t.grantedProjectName=e.grantedProjectName?yield this.encryptService.decryptToUtf8(new ke._(e.grantedProjectName),n):null,t})))))}))}}$i.ɵfac=function(e){return new(e||$i)(u.LFG(Ee.$),u.LFG(b.Mn),u.LFG(Me.s),u.LFG(Qe.U))},$i.ɵprov=u.Yz7({token:$i,factory:$i.ɵfac,providedIn:"root"});var Fi=n(80060),Vi=n(99042),Ki=n(85339),Hi=n(6378),Wi=n(44358),Xi=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function eo(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-form-field",19),u._uU(1,"\n              "),u.TgZ(2,"select",20),u.NdJ("change",(function(t){u.CHM(e);const n=u.oxw().$implicit,i=u.oxw(4);return u.KtG(i.update(t.target,n))})),u._uU(3,"\n                "),u.TgZ(4,"option",21),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n                "),u.TgZ(8,"option",22),u._uU(9),u.ALo(10,"i18n"),u.qZA(),u._uU(11,"\n              "),u.qZA(),u._uU(12,"\n            "),u.qZA()}if(2&e){const e=u.oxw().$implicit;u.xp6(2),u.Q6J("disabled",e.static),u.xp6(2),u.Q6J("selected",e.read&&1!=e.write),u.xp6(1),u.hij("\n                  ",u.lcZ(6,5,"canRead"),"\n                "),u.xp6(3),u.Q6J("selected",e.read&&e.write),u.xp6(1),u.hij("\n                  ",u.lcZ(10,7,"canReadWrite"),"\n                ")}}function to(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"canRead")))}function no(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"canWrite")))}function io(e,t){1&e&&(u.TgZ(0,"span"),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e&&(u.xp6(1),u.Oqu(u.lcZ(2,1,"canReadWrite")))}function oo(e,t){if(1&e&&(u._uU(0,"\n              "),u.YNc(1,to,3,3,"span",23),u._uU(2,"\n              "),u.YNc(3,no,3,3,"span",23),u._uU(4,"\n              "),u.YNc(5,io,3,3,"span",23),u._uU(6,"\n            ")),2&e){const e=u.oxw().$implicit;u.xp6(1),u.Q6J("ngIf",e.read&&1!=e.write),u.xp6(2),u.Q6J("ngIf",1!=e.read&&e.write),u.xp6(2),u.Q6J("ngIf",e.read&&e.write)}}function co(e,t){if(1&e&&(u.TgZ(0,"tr",11),u._uU(1,"\n          "),u.TgZ(2,"td",12),u._uU(3,"\n            "),u._UZ(4,"i",13),u._uU(5,"\n          "),u.qZA(),u._uU(6,"\n          "),u.TgZ(7,"td",14),u._uU(8),u.qZA(),u._uU(9,"\n          "),u.TgZ(10,"td",8),u._uU(11,"\n            "),u.YNc(12,eo,13,9,"bit-form-field",15),u._uU(13,"\n            "),u.YNc(14,oo,7,3,"ng-template",null,16,u.W1O),u._uU(16,"\n          "),u.qZA(),u._uU(17,"\n          "),u.TgZ(18,"td",17),u._uU(19,"\n            "),u._UZ(20,"button",18),u.ALo(21,"i18n"),u.ALo(22,"i18n"),u._uU(23,"\n          "),u.qZA(),u._uU(24,"\n        "),u.qZA()),2&e){const e=t.$implicit,n=u.MAs(15),i=u.oxw(4);u.xp6(4),u.Gre("bwi ",e.icon," tw-text-muted"),u.xp6(4),u.Oqu(e.name),u.xp6(4),u.Q6J("ngIf",!e.static)("ngIfElse",n),u.xp6(8),u.Q6J("bitAction",i.delete(e)),u.uIk("title",u.lcZ(21,9,"remove"))("aria-label",u.lcZ(22,11,"remove"))}}function so(e,t){if(1&e&&(u.ynx(0),u._uU(1,"\n        "),u.YNc(2,co,25,13,"tr",10),u._uU(3,"\n      "),u.BQk()),2&e){const e=u.oxw(2).ngIf;u.xp6(2),u.Q6J("ngForOf",e)}}function ro(e,t){if(1&e&&(u._uU(0,"\n      "),u.YNc(1,so,4,1,"ng-container",3),u._uU(2,"\n    ")),2&e){const e=u.oxw().ngIf;u.oxw();const t=u.MAs(26);u.xp6(1),u.Q6J("ngIf",e.length>0)("ngIfElse",t)}}function ao(e,t){if(1&e&&(u.TgZ(0,"bit-table"),u._uU(1,"\n    "),u.ynx(2,6),u._uU(3,"\n      "),u.TgZ(4,"tr"),u._uU(5,"\n        "),u.TgZ(6,"th",7),u._uU(7),u.qZA(),u._uU(8,"\n        "),u.TgZ(9,"th",8),u._uU(10),u.ALo(11,"i18n"),u.qZA(),u._uU(12,"\n      "),u.qZA(),u._uU(13,"\n    "),u.BQk(),u._uU(14,"\n\n    "),u.YNc(15,ro,3,2,"ng-template",9),u._uU(16,"\n  "),u.qZA()),2&e){const e=u.oxw();u.xp6(7),u.Oqu(e.columnTitle),u.xp6(3),u.Oqu(u.lcZ(11,2,"permissions"))}}function uo(e,t){if(1&e&&(u._uU(0,"\n  "),u.TgZ(1,"div",24),u._uU(2),u.qZA(),u._uU(3,"\n")),2&e){const e=u.oxw();u.xp6(2),u.hij("\n    ",e.emptyMessage,"\n  ")}}function lo(e,t){1&e&&(u._uU(0,"\n  "),u.TgZ(1,"div",25),u._uU(2,"\n    "),u._UZ(3,"i",26),u._uU(4,"\n  "),u.qZA(),u._uU(5,"\n"))}class po{set rows(e){this.rows$.next(e)}constructor(e,t){this.accessPolicyService=e,this.route=t,this.onCreateAccessPolicies=new u.vpe,this.onDeleteAccessPolicy=new u.vpe,this.onUpdateAccessPolicy=new u.vpe,this.rows$=new he.x,this.maxLength=15,this.formGroup=new _e.cw({multiSelect:new _e.NI([],[_e.kI.required,_e.kI.maxLength(this.maxLength)])}),this.loading=!0,this.selectItems$=(0,W.a)([this.rows$,this.route.params]).pipe((0,me.w)((([e,t])=>this.getPotentialGrantees(t.organizationId).then((t=>t.filter((t=>!e.some((e=>e.id===t.id)))).map((e=>{let t,n=e.name,i=e.name;return"user"===e.type?(t=po.userIcon,Ki.c.isNullOrWhitespace(e.name)?(n=e.email,i=e.email):n=`${e.name} (${e.email})`):"group"===e.type?t=po.groupIcon:"serviceAccount"===e.type?t=po.serviceAccountIcon:"project"===e.type&&(t=po.projectIcon),{icon:t,id:e.id,labelName:i,listName:n}})))))),(0,Z.U)((e=>e.sort(((e,t)=>e.listName.localeCompare(t.listName))))),(0,Fi.b)((()=>{this.loading=!1,this.formGroup.reset(),this.formGroup.enable()})),(0,we.B)()),this.submit=()=>Xi(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),!this.formGroup.invalid)return this.formGroup.disable(),this.loading=!0,this.onCreateAccessPolicies.emit(this.formGroup.value.multiSelect),(0,Vi.z)(this.selectItems$)})),this.delete=e=>()=>Xi(this,void 0,void 0,(function*(){return this.loading=!0,this.formGroup.disable(),this.onDeleteAccessPolicy.emit(e),(0,Vi.z)(this.selectItems$)}))}ngOnInit(){this.formGroup.disable()}update(e,t){return Xi(this,void 0,void 0,(function*(){"canRead"===e.value?(t.read=!0,t.write=!1):"canReadWrite"===e.value&&(t.read=!0,t.write=!0),this.onUpdateAccessPolicy.emit(t)}))}getPotentialGrantees(e){switch(this.granteeType){case"people":return this.accessPolicyService.getPeoplePotentialGrantees(e);case"serviceAccounts":return this.accessPolicyService.getServiceAccountsPotentialGrantees(e);case"projects":return this.accessPolicyService.getProjectsPotentialGrantees(e)}}static getAccessItemType(e){switch(e.icon){case po.userIcon:return"user";case po.groupIcon:return"group";case po.serviceAccountIcon:return"serviceAccount";case po.projectIcon:return"project"}}static getBaseAccessPolicyView(e){const t=new bi;return t.id=e.accessPolicyId,t.read=e.read,t.write=e.write,t}}po.userIcon="bwi-user",po.groupIcon="bwi-family",po.serviceAccountIcon="bwi-wrench",po.projectIcon="bwi-collection",po.ɵfac=function(e){return new(e||po)(u.Y36($i),u.Y36(s.gz))},po.ɵcmp=u.Xpm({type:po,selectors:[["sm-access-selector"]],inputs:{label:"label",hint:"hint",columnTitle:"columnTitle",emptyMessage:"emptyMessage",granteeType:"granteeType",rows:"rows"},outputs:{onCreateAccessPolicies:"onCreateAccessPolicies",onDeleteAccessPolicy:"onDeleteAccessPolicy",onUpdateAccessPolicy:"onUpdateAccessPolicy"},decls:31,vars:15,consts:[[1,"tw-mt-5",3,"formGroup","bitSubmit"],["formControlName","multiSelect",1,"tw-mr-4","tw-w-full",3,"baseItems","loading"],["type","submit","bitButton","","buttonType","primary","bitFormButton",""],[4,"ngIf","ngIfElse"],["empty",""],["spinner",""],["header",""],["bitCell","","colspan","2"],["bitCell",""],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-w-0","tw-pr-0"],["aria-hidden","true"],["bitCell","",1,"tw-max-w-sm","tw-truncate"],["class","tw-mb-auto tw-inline-block tw-w-auto",4,"ngIf","ngIfElse"],["staticPermissions",""],["bitCell","",1,"tw-w-0"],["type","button","bitIconButton","bwi-close","buttonType","main","size","default",3,"bitAction"],[1,"tw-mb-auto","tw-inline-block","tw-w-auto"],["bitInput","",3,"disabled","change"],["value","canRead",3,"selected"],["value","canReadWrite",3,"selected"],[4,"ngIf"],[1,"tw-mt-4","tw-text-center"],[1,"tw-items-center","tw-justify-center","tw-pt-10","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"]],template:function(e,t){if(1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-form-field"),u._uU(3,"\n    "),u.TgZ(4,"bit-label"),u._uU(5),u.qZA(),u._uU(6,"\n    "),u._UZ(7,"bit-multi-select",1),u.ALo(8,"async"),u._uU(9,"\n    "),u.TgZ(10,"bit-hint"),u._uU(11),u.qZA(),u._uU(12,"\n    "),u.TgZ(13,"button",2),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n  "),u.qZA(),u._uU(17,"\n"),u.qZA(),u._uU(18,"\n\n"),u.ynx(19),u._uU(20,"\n  "),u.YNc(21,ao,17,4,"bit-table",3),u.ALo(22,"async"),u._uU(23,"\n"),u.BQk(),u._uU(24,"\n\n"),u.YNc(25,uo,4,1,"ng-template",null,4,u.W1O),u._uU(27,"\n\n"),u.YNc(28,lo,6,0,"ng-template",null,5,u.W1O),u._uU(30,"\n")),2&e){const e=u.MAs(29);u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(5),u.Oqu(t.label),u.xp6(2),u.Q6J("baseItems",u.lcZ(8,9,t.selectItems$))("loading",t.loading),u.xp6(4),u.Oqu(t.hint),u.xp6(3),u.hij("\n      ",u.lcZ(15,11,"add"),"\n    "),u.xp6(7),u.Q6J("ngIf",u.lcZ(22,13,t.rows$))("ngIfElse",e)}},dependencies:[c.sg,c.O5,_e._Y,_e.YN,_e.Kr,_e.JJ,_e.JL,_e.sg,_e.u,Ut.Q,Ve.b,Ke.u,ye.r,We.d,Xe.G,Hi.O,et.u,Wi.M,P.Q,xe.a,Se.Y,Te.v,xe.f,c.Ov,ee.C],encapsulation:2});var ho=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class go{constructor(e,t,n,i){this.dialogRef=e,this.router=t,this.accessPolicyService=n,this.data=i,this.removeAccess=()=>ho(this,void 0,void 0,(function*(){yield this.router.navigate(this.data.returnRoute),"delete"===this.data.operation?yield this.accessPolicyService.deleteAccessPolicy(this.data.policy.accessPolicyId):"update"==this.data.operation&&(yield this.accessPolicyService.updateAccessPolicy(po.getBaseAccessPolicyView(this.data.policy))),this.dialogRef.close()})),this.cancel=()=>{"project"==this.data.type?this.accessPolicyService.refreshProjectAccessPolicyChanges():"service-account"==this.data.type&&this.accessPolicyService.refreshServiceAccountAccessPolicyChanges(),this.dialogRef.close()}}ngOnInit(){if(!(this.data.message&&this.data.title&&this.data.operation&&this.data.returnRoute&&this.data.policy))throw this.dialogRef.close(),new Error("The access removal dialog was not called with the appropriate operation values.")}}go.ɵfac=function(e){return new(e||go)(u.Y36(Ue.zj),u.Y36(s.F0),u.Y36($i),u.Y36(Ue.Kt))},go.ɵcmp=u.Xpm({type:go,selectors:[["sm-access-removal-dialog"]],decls:22,vars:14,consts:[["bitDialogTitle",""],["bitDialogContent",""],["bitDialogFooter","",1,"tw-flex","tw-flex-row","tw-gap-2"],["type","button","bitButton","","buttonType","danger",3,"bitAction"],["type","button","bitButton","","buttonType","secondary",3,"bitAction"]],template:function(e,t){1&e&&(u.TgZ(0,"bit-simple-dialog"),u._uU(1,"\n  "),u.TgZ(2,"span",0),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"span",1),u._uU(7),u.ALo(8,"i18n"),u.qZA(),u._uU(9,"\n  "),u.TgZ(10,"div",2),u._uU(11,"\n    "),u.TgZ(12,"button",3),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n    "),u.TgZ(16,"button",4),u._uU(17),u.ALo(18,"i18n"),u.qZA(),u._uU(19,"\n  "),u.qZA(),u._uU(20,"\n"),u.qZA(),u._uU(21,"\n")),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,6,t.data.title)),u.xp6(4),u.hij("\n    ",u.lcZ(8,8,t.data.message),"\n  "),u.xp6(5),u.Q6J("bitAction",t.removeAccess),u.xp6(1),u.hij("\n      ",u.lcZ(14,10,"removeAccess"),"\n    "),u.xp6(3),u.Q6J("bitAction",t.cancel),u.xp6(1),u.hij("\n      ",u.lcZ(18,12,"cancel"),"\n    "))},dependencies:[Ut.Q,ye.r,_t.r,ee.C],encapsulation:2});var vo=n(37202),fo=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class mo{handleCreateAccessPolicies(e){const t=new qi;return t.userAccessPolicies=e.filter((e=>"user"===po.getAccessItemType(e))).map((e=>{const t=new xi;return t.grantedProjectId=this.projectId,t.organizationUserId=e.id,t.read=!0,t.write=!1,t})),t.groupAccessPolicies=e.filter((e=>"group"===po.getAccessItemType(e))).map((e=>{const t=new Ti;return t.grantedProjectId=this.projectId,t.groupId=e.id,t.read=!0,t.write=!1,t})),this.accessPolicyService.createProjectAccessPolicies(this.organizationId,this.projectId,t)}handleDeleteAccessPolicy(e){return fo(this,void 0,void 0,(function*(){if(yield this.accessPolicyService.needToShowAccessRemovalWarning(this.organizationId,e,this.rows))this.launchDeleteWarningDialog(e);else try{yield this.accessPolicyService.deleteAccessPolicy(e.accessPolicyId)}catch(t){this.validationService.showError(t)}}))}handleUpdateAccessPolicy(e){return fo(this,void 0,void 0,(function*(){if(!0===e.read&&!1===e.write&&(yield this.accessPolicyService.needToShowAccessRemovalWarning(this.organizationId,e,this.rows)))this.launchUpdateWarningDialog(e);else try{return yield this.accessPolicyService.updateAccessPolicy(po.getBaseAccessPolicyView(e))}catch(t){this.validationService.showError(t)}}))}constructor(e,t,n,i){this.route=e,this.dialogService=t,this.validationService=n,this.accessPolicyService=i,this.destroy$=new he.x,this.rows$=this.accessPolicyService.projectAccessPolicyChanges$.pipe((0,fe.O)(null),(0,me.w)((()=>this.accessPolicyService.getProjectAccessPolicies(this.organizationId,this.projectId))),(0,Z.U)((e=>{const t=[];return e.userAccessPolicies.forEach((e=>{t.push({type:"user",name:e.organizationUserName,id:e.organizationUserId,accessPolicyId:e.id,read:e.read,write:e.write,userId:e.userId,icon:po.userIcon})})),e.groupAccessPolicies.forEach((e=>{t.push({type:"group",name:e.groupName,id:e.groupId,accessPolicyId:e.id,read:e.read,write:e.write,currentUserInGroup:e.currentUserInGroup,icon:po.groupIcon})})),t})),(0,we.B)())}ngOnInit(){this.route.params.pipe((0,ve.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.organizationId,this.projectId=e.projectId})),this.rows$.pipe((0,ve.R)(this.destroy$)).subscribe((e=>{this.rows=e}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}launchDeleteWarningDialog(e){return fo(this,void 0,void 0,(function*(){this.dialogService.open(go,{data:{title:"smAccessRemovalWarningProjectTitle",message:"smAccessRemovalWarningProjectMessage",operation:"delete",type:"project",returnRoute:["sm",this.organizationId,"projects"],policy:e}})}))}launchUpdateWarningDialog(e){this.dialogService.open(go,{data:{title:"smAccessRemovalWarningProjectTitle",message:"smAccessRemovalWarningProjectMessage",operation:"update",type:"project",returnRoute:["sm",this.organizationId,"projects"],policy:e}})}}mo.ɵfac=function(e){return new(e||mo)(u.Y36(s.gz),u.Y36(Fe.x),u.Y36(vo.R),u.Y36($i))},mo.ɵcmp=u.Xpm({type:mo,selectors:[["sm-project-people"]],decls:15,vars:18,consts:[[1,"tw-w-2/5"],[1,"tw-mt-8"],["granteeType","people",3,"rows","label","hint","columnTitle","emptyMessage","onCreateAccessPolicies","onDeleteAccessPolicy","onUpdateAccessPolicy"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"p",1),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"sm-access-selector",2),u.NdJ("onCreateAccessPolicies",(function(e){return t.handleCreateAccessPolicies(e)}))("onDeleteAccessPolicy",(function(e){return t.handleDeleteAccessPolicy(e)}))("onUpdateAccessPolicy",(function(e){return t.handleUpdateAccessPolicy(e)})),u.ALo(7,"async"),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.ALo(10,"i18n"),u.ALo(11,"i18n"),u._uU(12,"\n  "),u.qZA(),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n")),2&e&&(u.xp6(3),u.hij("\n    ",u.lcZ(4,6,"projectPeopleDescription"),"\n  "),u.xp6(3),u.Q6J("rows",u.lcZ(7,8,t.rows$))("label",u.lcZ(8,10,"people"))("hint",u.lcZ(9,12,"projectPeopleSelectHint"))("columnTitle",u.lcZ(10,14,"groupSlashUser"))("emptyMessage",u.lcZ(11,16,"projectEmptyPeopleAccessPolicies")))},dependencies:[po,c.Ov,ee.C],encapsulation:2});var wo=n(67775),Ao=n(37260),Uo=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function _o(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",4),u._uU(1,"\n    "),u.TgZ(2,"button",5),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.openNewSecretDialog())})),u._uU(3,"\n      "),u._UZ(4,"i",6),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n  "),u.qZA()}2&e&&(u.xp6(5),u.hij("\n      ",u.lcZ(6,1,"newSecret"),"\n    "))}function yo(e,t){if(1&e){const e=u.EpF();u.ynx(0),u._uU(1,"\n  "),u.YNc(2,_o,8,3,"div",2),u._uU(3,"\n  "),u.TgZ(4,"sm-secrets-list",3),u.NdJ("deleteSecretsEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openDeleteSecret(t))}))("newSecretEvent",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openNewSecretDialog())}))("editSecretEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.openEditSecret(t))}))("copySecretNameEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.copySecretName(t))}))("copySecretValueEvent",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(n.copySecretValue(t))})),u.qZA(),u._uU(5,"\n"),u.BQk()}if(2&e){const e=t.ngIf;u.xp6(2),u.Q6J("ngIf",e.length>0),u.xp6(2),u.Q6J("secrets",e)}}function Zo(e,t){1&e&&(u._uU(0,"\n  "),u.TgZ(1,"div",7),u._uU(2,"\n    "),u._UZ(3,"i",8),u._uU(4,"\n  "),u.qZA(),u._uU(5,"\n"))}class bo{constructor(e,t,n,i,o,c){this.route=e,this.projectService=t,this.secretService=n,this.dialogService=i,this.platformUtilsService=o,this.i18nService=c}ngOnInit(){const e=this.projectService.project$.pipe((0,wo.h)((e=>(null==e?void 0:e.id)===this.projectId)),(0,fe.O)(null));this.secrets$=this.secretService.secret$.pipe((0,fe.O)(null),(0,Ao.V)(this.route.params,e),(0,me.w)((([e,t])=>Uo(this,void 0,void 0,(function*(){return this.organizationId=t.organizationId,this.projectId=t.projectId,yield this.getSecretsByProject()})))))}getSecretsByProject(){return Uo(this,void 0,void 0,(function*(){return yield this.secretService.getSecretsByProject(this.organizationId,this.projectId)}))}openEditSecret(e){this.dialogService.open(jt,{data:{organizationId:this.organizationId,operation:xt.Edit,secretId:e}})}openDeleteSecret(e){this.dialogService.open(bt,{data:{secrets:e}})}openNewSecretDialog(){this.dialogService.open(jt,{data:{organizationId:this.organizationId,operation:xt.Add,projectId:this.projectId}})}copySecretName(e){An.copySecretName(e,this.platformUtilsService,this.i18nService)}copySecretValue(e){An.copySecretValue(e,this.platformUtilsService,this.i18nService,this.secretService)}}bo.ɵfac=function(e){return new(e||bo)(u.Y36(s.gz),u.Y36(Re),u.Y36(At),u.Y36(Fe.x),u.Y36($e.P),u.Y36(Be.D))},bo.ɵcmp=u.Xpm({type:bo,selectors:[["sm-project-secrets"]],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["spinner",""],["class","float-right tw-mt-3 tw-items-center",4,"ngIf"],[3,"secrets","deleteSecretsEvent","newSecretEvent","editSecretEvent","copySecretNameEvent","copySecretValueEvent"],[1,"float-right","tw-mt-3","tw-items-center"],["type","button","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"]],template:function(e,t){if(1&e&&(u.YNc(0,yo,6,2,"ng-container",0),u.ALo(1,"async"),u._uU(2,"\n\n"),u.YNc(3,Zo,6,0,"ng-template",null,1,u.W1O),u._uU(5,"\n")),2&e){const e=u.MAs(4);u.Q6J("ngIf",u.lcZ(1,2,t.secrets$))("ngIfElse",e)}},dependencies:[c.O5,ye.r,An,c.Ov,ee.C],encapsulation:2});var xo=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class So{handleCreateAccessPolicies(e){const t=new qi;return t.serviceAccountAccessPolicies=e.filter((e=>"serviceAccount"===po.getAccessItemType(e))).map((e=>{const t=new Pi;return t.grantedProjectId=this.projectId,t.serviceAccountId=e.id,t.read=!0,t.write=!1,t})),this.accessPolicyService.createProjectAccessPolicies(this.organizationId,this.projectId,t)}handleDeleteAccessPolicy(e){return xo(this,void 0,void 0,(function*(){try{yield this.accessPolicyService.deleteAccessPolicy(e.accessPolicyId)}catch(t){this.validationService.showError(t)}}))}constructor(e,t,n){this.route=e,this.validationService=t,this.accessPolicyService=n,this.destroy$=new he.x,this.rows$=this.accessPolicyService.projectAccessPolicyChanges$.pipe((0,fe.O)(null),(0,me.w)((()=>this.accessPolicyService.getProjectAccessPolicies(this.organizationId,this.projectId))),(0,Z.U)((e=>e.serviceAccountAccessPolicies.map((e=>({type:"serviceAccount",name:e.serviceAccountName,id:e.serviceAccountId,accessPolicyId:e.id,read:e.read,write:e.write,icon:po.serviceAccountIcon,static:!0}))))))}ngOnInit(){this.route.params.pipe((0,ve.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.organizationId,this.projectId=e.projectId}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}So.ɵfac=function(e){return new(e||So)(u.Y36(s.gz),u.Y36(vo.R),u.Y36($i))},So.ɵcmp=u.Xpm({type:So,selectors:[["sm-project-service-accounts"]],decls:15,vars:18,consts:[[1,"tw-w-2/5"],[1,"tw-mt-8"],["granteeType","serviceAccounts",3,"rows","label","hint","columnTitle","emptyMessage","onCreateAccessPolicies","onDeleteAccessPolicy"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"p",1),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"sm-access-selector",2),u.NdJ("onCreateAccessPolicies",(function(e){return t.handleCreateAccessPolicies(e)}))("onDeleteAccessPolicy",(function(e){return t.handleDeleteAccessPolicy(e)})),u.ALo(7,"async"),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.ALo(10,"i18n"),u.ALo(11,"i18n"),u._uU(12,"\n  "),u.qZA(),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n")),2&e&&(u.xp6(3),u.hij("\n    ",u.lcZ(4,6,"projectServiceAccountsDescription"),"\n  "),u.xp6(3),u.Q6J("rows",u.lcZ(7,8,t.rows$))("label",u.lcZ(8,10,"serviceAccounts"))("hint",u.lcZ(9,12,"projectServiceAccountsSelectHint"))("columnTitle",u.lcZ(10,14,"serviceAccounts"))("emptyMessage",u.lcZ(11,16,"projectEmptyServiceAccountAccessPolicies")))},dependencies:[po,c.Ov,ee.C],encapsulation:2});var To=n(14677),Io=n(36835),Po=n(8427),qo=n(93814),jo=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};const ko=function(){return["people"]},Co=function(){return["service-accounts"]};function Lo(e,t){1&e&&(u.ynx(0),u._uU(1,"\n      "),u.TgZ(2,"bit-tab-link",5),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n      "),u.TgZ(6,"bit-tab-link",5),u._uU(7),u.ALo(8,"i18n"),u.qZA(),u._uU(9,"\n    "),u.BQk()),2&e&&(u.xp6(2),u.Q6J("route",u.DdM(8,ko)),u.xp6(1),u.Oqu(u.lcZ(4,4,"people")),u.xp6(3),u.Q6J("route",u.DdM(9,Co)),u.xp6(1),u.Oqu(u.lcZ(8,6,"serviceAccounts")))}function Oo(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",8),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw(2);return u.KtG(t.openEditDialog())})),u._uU(1),u.ALo(2,"i18n"),u.qZA()}2&e&&(u.xp6(1),u.hij("\n    ",u.lcZ(2,1,"editProject"),"\n  "))}const Do=function(){return[".."]},Jo=function(){return["secrets"]};function No(e,t){if(1&e&&(u.TgZ(0,"sm-header",1),u._uU(1,"\n  "),u.TgZ(2,"bit-breadcrumbs",2),u._uU(3,"\n    "),u.TgZ(4,"bit-breadcrumb",3),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n  "),u.qZA(),u._uU(8,"\n  "),u.TgZ(9,"bit-tab-nav-bar",4),u._uU(10,"\n    "),u.TgZ(11,"bit-tab-link",5),u._uU(12),u.ALo(13,"i18n"),u.qZA(),u._uU(14,"\n    "),u.YNc(15,Lo,10,10,"ng-container",6),u._uU(16,"\n  "),u.qZA(),u._uU(17,"\n  "),u._UZ(18,"sm-new-menu"),u._uU(19,"\n  "),u.YNc(20,Oo,3,3,"button",7),u._uU(21,"\n"),u.qZA()),2&e){const e=t.ngIf;u.Q6J("title",e.name),u.xp6(4),u.Q6J("route",u.DdM(11,Do)),u.xp6(1),u.Oqu(u.lcZ(6,7,"projects")),u.xp6(6),u.Q6J("route",u.DdM(12,Jo)),u.xp6(1),u.Oqu(u.lcZ(13,9,"secrets")),u.xp6(3),u.Q6J("ngIf",e.write),u.xp6(5),u.Q6J("ngIf",e.write)}}class zo{constructor(e,t,n){this.route=e,this.projectService=t,this.dialogService=n,this.destroy$=new he.x}ngOnInit(){const e=this.projectService.project$.pipe((0,wo.h)((e=>(null==e?void 0:e.id)===this.projectId)),(0,fe.O)(null));this.project$=(0,W.a)([this.route.params,e]).pipe((0,me.w)((([e,t])=>this.projectService.getByProjectId(e.projectId)))),this.route.params.pipe((0,ve.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.organizationId,this.projectId=e.projectId}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openEditDialog(){return jo(this,void 0,void 0,(function*(){this.dialogService.open(ut,{data:{organizationId:this.organizationId,operation:ct.Edit,projectId:this.projectId}})}))}}zo.ɵfac=function(e){return new(e||zo)(u.Y36(s.gz),u.Y36(Re),u.Y36(Fe.x))},zo.ɵcmp=u.Xpm({type:zo,selectors:[["sm-project"]],decls:5,vars:3,consts:[["icon","bwi-collection",3,"title",4,"ngIf"],["icon","bwi-collection",3,"title"],["slot","breadcrumbs"],["icon","bwi-angle-left",3,"route"],["label","Main","slot","tabs"],[3,"route"],[4,"ngIf"],["type","button","slot","secondary","bitButton","","buttonType","secondary",3,"click",4,"ngIf"],["type","button","slot","secondary","bitButton","","buttonType","secondary",3,"click"]],template:function(e,t){1&e&&(u.YNc(0,No,22,13,"sm-header",0),u.ALo(1,"async"),u._uU(2,"\n"),u._UZ(3,"router-outlet"),u._uU(4,"\n")),2&e&&u.Q6J("ngIf",u.lcZ(1,1,t.project$))},dependencies:[c.O5,s.lC,ye.r,To.f,Io.G,On,Dn,Po.n,qo.L,c.Ov,ee.C],encapsulation:2});var Yo=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class Eo{constructor(e,t,n,i){this.route=e,this.projectService=t,this.accessPolicyService=n,this.dialogService=i}ngOnInit(){this.projects$=(0,W.a)([this.route.params,this.projectService.project$.pipe((0,fe.O)(null)),this.accessPolicyService.projectAccessPolicyChanges$.pipe((0,fe.O)(null))]).pipe((0,me.w)((([e])=>Yo(this,void 0,void 0,(function*(){return this.organizationId=e.organizationId,yield this.getProjects()})))))}getProjects(){return Yo(this,void 0,void 0,(function*(){return yield this.projectService.getProjects(this.organizationId)}))}openEditProject(e){this.dialogService.open(ut,{data:{organizationId:this.organizationId,operation:ct.Edit,projectId:e}})}openNewProjectDialog(){this.dialogService.open(ut,{data:{organizationId:this.organizationId,operation:ct.Add}})}openDeleteProjectDialog(e){this.dialogService.open(ot,{data:{projects:e}})}}Eo.ɵfac=function(e){return new(e||Eo)(u.Y36(s.gz),u.Y36(Re),u.Y36($i),u.Y36(Fe.x))},Eo.ɵcmp=u.Xpm({type:Eo,selectors:[["sm-projects"]],decls:12,vars:8,consts:[["bitInput","",1,"tw-w-80",3,"placeholder","ngModel","ngModelChange"],[3,"projects","search","newProjectEvent","editProjectEvent","deleteProjectEvent"]],template:function(e,t){1&e&&(u.TgZ(0,"sm-header"),u._uU(1,"\n  "),u.TgZ(2,"input",0),u.NdJ("ngModelChange",(function(e){return t.search=e})),u.ALo(3,"i18n"),u.qZA(),u._uU(4,"\n  "),u._UZ(5,"sm-new-menu"),u._uU(6,"\n"),u.qZA(),u._uU(7,"\n"),u.TgZ(8,"sm-projects-list",1),u.NdJ("newProjectEvent",(function(){return t.openNewProjectDialog()}))("editProjectEvent",(function(e){return t.openEditProject(e)}))("deleteProjectEvent",(function(e){return t.openDeleteProjectDialog(e)})),u.ALo(9,"async"),u._uU(10,"\n"),u.qZA(),u._uU(11,"\n")),2&e&&(u.xp6(2),u.Q6J("placeholder",u.lcZ(3,4,"searchProjects"))("ngModel",t.search),u.xp6(6),u.Q6J("projects",u.lcZ(9,6,t.projects$))("search",t.search))},dependencies:[_e.Fj,_e.JJ,_e.On,Xe.G,On,Dn,Qn,c.Ov,ee.C],encapsulation:2});const Mo=[{path:"",component:Eo},{path:":projectId",component:zo,children:[{path:"",pathMatch:"full",redirectTo:"secrets"},{path:"secrets",component:bo},{path:"people",component:mo},{path:"service-accounts",component:So}]}];class Qo{}Qo.ɵfac=function(e){return new(e||Qo)},Qo.ɵmod=u.oAB({type:Qo}),Qo.ɵinj=u.cJS({imports:[s.Bz.forChild(Mo),s.Bz]});class Go{}Go.ɵfac=function(e){return new(e||Go)},Go.ɵmod=u.oAB({type:Go}),Go.ɵinj=u.cJS({imports:[w,Qo,Zi.J]});var Ro=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class Bo{constructor(e,t,n,i,o){this.route=e,this.secretService=t,this.dialogService=n,this.platformUtilsService=i,this.i18nService=o}ngOnInit(){this.secrets$=this.secretService.secret$.pipe((0,fe.O)(null),(0,Ao.V)(this.route.params),(0,me.w)((([e,t])=>Ro(this,void 0,void 0,(function*(){return this.organizationId=t.organizationId,yield this.getSecrets()}))))),this.route.snapshot.queryParams.search&&(this.search=this.route.snapshot.queryParams.search)}getSecrets(){return Ro(this,void 0,void 0,(function*(){return yield this.secretService.getSecrets(this.organizationId)}))}openEditSecret(e){this.dialogService.open(jt,{data:{organizationId:this.organizationId,operation:xt.Edit,secretId:e}})}openDeleteSecret(e){this.dialogService.open(bt,{data:{secrets:e}})}openNewSecretDialog(){this.dialogService.open(jt,{data:{organizationId:this.organizationId,operation:xt.Add}})}copySecretName(e){An.copySecretName(e,this.platformUtilsService,this.i18nService)}copySecretValue(e){An.copySecretValue(e,this.platformUtilsService,this.i18nService,this.secretService)}}Bo.ɵfac=function(e){return new(e||Bo)(u.Y36(s.gz),u.Y36(At),u.Y36(Fe.x),u.Y36($e.P),u.Y36(Be.D))},Bo.ɵcmp=u.Xpm({type:Bo,selectors:[["sm-secrets"]],decls:11,vars:8,consts:[["bitInput","",1,"tw-w-80",3,"placeholder","ngModel","ngModelChange"],[3,"secrets","search","deleteSecretsEvent","newSecretEvent","editSecretEvent","copySecretNameEvent","copySecretValueEvent"]],template:function(e,t){1&e&&(u.TgZ(0,"sm-header"),u._uU(1,"\n  "),u.TgZ(2,"input",0),u.NdJ("ngModelChange",(function(e){return t.search=e})),u.ALo(3,"i18n"),u.qZA(),u._uU(4,"\n  "),u._UZ(5,"sm-new-menu"),u._uU(6,"\n"),u.qZA(),u._uU(7,"\n"),u.TgZ(8,"sm-secrets-list",1),u.NdJ("deleteSecretsEvent",(function(e){return t.openDeleteSecret(e)}))("newSecretEvent",(function(){return t.openNewSecretDialog()}))("editSecretEvent",(function(e){return t.openEditSecret(e)}))("copySecretNameEvent",(function(e){return t.copySecretName(e)}))("copySecretValueEvent",(function(e){return t.copySecretValue(e)})),u.ALo(9,"async"),u.qZA(),u._uU(10,"\n")),2&e&&(u.xp6(2),u.Q6J("placeholder",u.lcZ(3,4,"searchSecrets"))("ngModel",t.search),u.xp6(6),u.Q6J("secrets",u.lcZ(9,6,t.secrets$))("search",t.search))},dependencies:[_e.Fj,_e.JJ,_e.On,Xe.G,On,Dn,An,c.Ov,ee.C],encapsulation:2});const $o=[{path:"",component:Bo}];class Fo{}Fo.ɵfac=function(e){return new(e||Fo)},Fo.ɵmod=u.oAB({type:Fo}),Fo.ɵinj=u.cJS({imports:[s.Bz.forChild($o),s.Bz]});class Vo{}Vo.ɵfac=function(e){return new(e||Vo)},Vo.ɵmod=u.oAB({type:Vo}),Vo.ɵinj=u.cJS({imports:[w,Fo]});var Ko=n(77494),Ho=n(22089),Wo=n(13992);class Xo{}class ec{}class tc extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.clientSecret=this.getResponseProperty("ClientSecret"),this.expireAt=this.getResponseProperty("ExpireAt"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class nc extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name"),this.scopes=this.getResponseProperty("Scopes"),this.expireAt=this.getResponseProperty("ExpireAt"),this.creationDate=this.getResponseProperty("CreationDate"),this.revisionDate=this.getResponseProperty("RevisionDate")}}class ic{}var oc=n(75966),cc=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class sc{constructor(e,t,n,i){this.cryptoService=e,this.apiService=t,this.cryptoFunctionService=n,this.encryptService=i,this._accessTokenVersion="0",this._accessToken=new he.x,this.accessToken$=this._accessToken.asObservable()}getAccessTokens(e,t){return cc(this,void 0,void 0,(function*(){const n=yield this.apiService.send("GET","/service-accounts/"+t+"/access-tokens",null,!0,!0),i=new Ce.L(n,nc);return yield this.createAccessTokenViews(e,i.data)}))}createAccessToken(e,t,n){return cc(this,void 0,void 0,(function*(){const i=yield this.cryptoFunctionService.randomBytes(16),o=yield this.cryptoFunctionService.hkdf(i,"bitwarden-accesstoken","sm-access-token",64,"sha256"),c=new Wo.N(o),s=yield this.createAccessTokenRequest(e,c,n),r=yield this.apiService.send("POST","/service-accounts/"+t+"/access-tokens",s,!0,!0),a=new tc(r);this._accessToken.next(null);const u=Ki.c.fromBufferToB64(i);return`${this._accessTokenVersion}.${a.id}.${a.clientSecret}:${u}`}))}revokeAccessTokens(e,t){return cc(this,void 0,void 0,(function*(){const n=new ec;n.ids=t,yield this.apiService.send("POST","/service-accounts/"+e+"/access-tokens/revoke",n,!0,!1),this._accessToken.next(null)}))}createAccessTokenRequest(e,t,n){return cc(this,void 0,void 0,(function*(){const i=yield this.getOrganizationKey(e),o=new Xo,[c,s,r]=yield Promise.all([yield this.encryptService.encrypt(n.name,i),yield this.encryptService.encrypt(JSON.stringify({encryptionKey:i.keyB64}),t),yield this.encryptService.encrypt(t.keyB64,i)]);return o.name=c,o.encryptedPayload=s,o.key=r,o.expireAt=n.expireAt,o}))}getOrganizationKey(e){return cc(this,void 0,void 0,(function*(){return yield this.cryptoService.getOrgKey(e)}))}createAccessTokenViews(e,t){return cc(this,void 0,void 0,(function*(){const n=yield this.getOrganizationKey(e);return yield Promise.all(t.map((e=>cc(this,void 0,void 0,(function*(){const t=new ic;return t.id=e.id,t.name=yield this.encryptService.decryptToUtf8(new ke._(e.name),n),t.scopes=e.scopes,t.expireAt=e.expireAt?new Date(e.expireAt):null,t.creationDate=new Date(e.creationDate),t.revisionDate=new Date(e.revisionDate),t})))))}))}}sc.ɵfac=function(e){return new(e||sc)(u.LFG(Ee.$),u.LFG(Me.s),u.LFG(oc.O),u.LFG(Qe.U))},sc.ɵprov=u.Yz7({token:sc,factory:sc.ɵfac,providedIn:"root"});class rc{constructor(e,t,n,i){this.dialogRef=e,this.data=t,this.platformUtilsService=n,this.i18nService=i,this.dialogRef.disableClose=!0}ngOnInit(){if(!this.data.subTitle||!this.data.accessToken)throw this.dialogRef.close(),new Error("The access token dialog was not called with the appropriate values.")}copyAccessToken(){this.platformUtilsService.copyToClipboard(this.data.accessToken),this.platformUtilsService.showToast("success",null,this.i18nService.t("accessTokenCreatedAndCopied")),this.dialogRef.close()}}rc.ɵfac=function(e){return new(e||rc)(u.Y36(Ue.zj),u.Y36(Ue.Kt),u.Y36($e.P),u.Y36(Be.D))},rc.ɵcmp=u.Xpm({type:rc,selectors:[["sm-access-token-dialog"]],decls:48,vars:35,consts:[["dialogSize","default"],["bitDialogTitle",""],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitDialogContent",""],["type","info",3,"title"],[1,"tw-mb-0"],["bitInput","","disabled","","rows","4"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","button","bitButton","","buttonType","primary",3,"click"],["aria-hidden","true",1,"bwi","bwi-clone"]],template:function(e,t){1&e&&(u.TgZ(0,"bit-dialog",0),u._uU(1,"\n  "),u.ynx(2,1),u._uU(3,"\n    "),u.TgZ(4,"span"),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n    "),u.TgZ(8,"span",2),u._uU(9),u.qZA(),u._uU(10,"\n  "),u.BQk(),u._uU(11,"\n\n  "),u.TgZ(12,"div",3),u._uU(13,"\n    "),u.TgZ(14,"bit-callout",4),u.ALo(15,"i18n"),u._uU(16),u.ALo(17,"i18n"),u._UZ(18,"br"),u._uU(19),u.ALo(20,"i18n"),u.ALo(21,"i18n"),u.ALo(22,"date"),u.qZA(),u._uU(23,"\n\n    "),u.TgZ(24,"bit-form-field",5),u._uU(25,"\n      "),u.TgZ(26,"bit-label"),u._uU(27),u.ALo(28,"i18n"),u.qZA(),u._uU(29,"\n      "),u.TgZ(30,"textarea",6),u._uU(31),u.qZA(),u._uU(32,"\n    "),u.qZA(),u._uU(33),u.ALo(34,"i18n"),u.ALo(35,"i18n"),u.ALo(36,"date"),u.qZA(),u._uU(37,"\n\n  "),u.TgZ(38,"div",7),u._uU(39,"\n    "),u.TgZ(40,"button",8),u.NdJ("click",(function(){return t.copyAccessToken()})),u._uU(41,"\n      "),u._UZ(42,"i",9),u._uU(43),u.ALo(44,"i18n"),u.qZA(),u._uU(45,"\n  "),u.qZA(),u._uU(46,"\n"),u.qZA(),u._uU(47,"\n")),2&e&&(u.xp6(5),u.Oqu(u.lcZ(6,11,"newAccessToken")),u.xp6(4),u.hij("\n      ",t.data.subTitle,"\n    "),u.xp6(5),u.Q6J("title",u.lcZ(15,13,"accessTokenCallOutTitle")),u.xp6(2),u.hij("\n      ",u.lcZ(17,15,"downloadAccessToken"),""),u.xp6(3),u.AsE("\n      ",u.lcZ(20,17,"expiresOnAccessToken"),"\n      ",null===t.data.expirationDate?u.lcZ(21,19,"never"):u.xi3(22,21,t.data.expirationDate,"medium"),"\n    "),u.xp6(8),u.Oqu(u.lcZ(28,24,"accessToken")),u.xp6(4),u.Oqu(t.data.accessToken),u.xp6(2),u.AsE("\n    ",u.lcZ(34,26,"expiresOnAccessToken"),"\n    ",null===t.data.expirationDate?u.lcZ(35,28,"never"):u.xi3(36,30,t.data.expirationDate,"medium"),"\n  "),u.xp6(10),u.hij("\n      ",u.lcZ(44,33,"copyToken"),"\n    "))},dependencies:[ye.r,He.O,Ze.a,We.d,Xe.G,et.u,c.uU,ee.C],encapsulation:2});var ac=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function uc(e,t){if(1&e&&(u.TgZ(0,"option",6),u._uU(1),u.ALo(2,"i18n"),u.qZA()),2&e){const e=t.$implicit;u.Q6J("ngValue",e),u.xp6(1),u.hij("\n        ",u.xi3(2,2,"days",e),"\n      ")}}function lc(e,t){if(1&e&&(u.TgZ(0,"bit-form-field"),u._uU(1,"\n    "),u.TgZ(2,"bit-label"),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n    "),u._UZ(6,"input",7),u.ALo(7,"date"),u._uU(8,"\n  "),u.qZA()),2&e){const e=u.oxw();u.xp6(3),u.Oqu(u.lcZ(4,2,"expirationDate")),u.xp6(3),u.Q6J("min",u.xi3(7,4,e.currentDate,"YYYY-MM-ddThh:mm"))}}class dc{set touched(e){e&&this.form.markAllAsTouched()}constructor(e){this.datePipe=e,this.destroy$=new he.x,this.currentDate=new Date,this.form=new _e.cw({expires:new _e.NI("never",[_e.kI.required]),expireDateTime:new _e.NI("",[_e.kI.required])}),this._onChange=e=>{},this.onTouched=()=>{}}ngOnInit(){return ac(this,void 0,void 0,(function*(){this.form.valueChanges.pipe((0,ve.R)(this.destroy$)).subscribe((()=>{this._onChange(this.getExpiresDate())}))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}registerOnChange(e){this._onChange=e}registerOnTouched(e){this.onTouched=e}validate(e){return"custom"==this.form.value.expires&&this.form.value.expireDateTime||"custom"!==this.form.value.expires?null:{required:!0}}writeValue(e){null==e&&this.form.setValue({expires:"never",expireDateTime:null}),e&&this.form.setValue({expires:"custom",expireDateTime:this.datePipe.transform(e,"YYYY-MM-ddThh:mm")})}setDisabledState(e){e?this.form.disable():this.form.enable()}getExpiresDate(){if("never"==this.form.value.expires)return null;if("custom"==this.form.value.expires)return new Date(this.form.value.expireDateTime);const e=new Date;return e.setDate(e.getDate()+Number(this.form.value.expires)),e}}dc.ɵfac=function(e){return new(e||dc)(u.Y36(c.uU))},dc.ɵcmp=u.Xpm({type:dc,selectors:[["sm-expiration-options"]],inputs:{expirationDayOptions:"expirationDayOptions",touched:"touched"},features:[u._Bn([{provide:_e.JU,multi:!0,useExisting:dc},{provide:_e.Cf,multi:!0,useExisting:dc}])],decls:25,vars:12,consts:[[3,"formGroup"],["bitInput","","formControlName","expires"],["ngValue","never"],[3,"ngValue",4,"ngFor","ngForOf"],["ngValue","custom"],[4,"ngIf"],[3,"ngValue"],["bitInput","","type","datetime-local","formControlName","expireDateTime",3,"min"]],template:function(e,t){1&e&&(u.ynx(0,0),u._uU(1,"\n  "),u.TgZ(2,"bit-form-field"),u._uU(3,"\n    "),u.TgZ(4,"bit-label"),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n    "),u.TgZ(8,"select",1),u._uU(9,"\n      "),u.TgZ(10,"option",2),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.YNc(14,uc,3,5,"option",3),u._uU(15,"\n      "),u.TgZ(16,"option",4),u._uU(17),u.ALo(18,"i18n"),u.qZA(),u._uU(19,"\n    "),u.qZA(),u._uU(20,"\n  "),u.qZA(),u._uU(21,"\n  "),u.YNc(22,lc,9,7,"bit-form-field",5),u._uU(23,"\n"),u.BQk(),u._uU(24,"\n")),2&e&&(u.Q6J("formGroup",t.form),u.xp6(5),u.Oqu(u.lcZ(6,6,"expires")),u.xp6(6),u.Oqu(u.lcZ(12,8,"never")),u.xp6(3),u.Q6J("ngForOf",t.expirationDayOptions),u.xp6(3),u.Oqu(u.lcZ(18,10,"custom")),u.xp6(5),u.Q6J("ngIf","custom"===t.form.value.expires))},dependencies:[c.sg,c.O5,_e.YN,_e.Kr,_e.Fj,_e.EJ,_e.JJ,_e.JL,_e.sg,_e.u,We.d,Xe.G,et.u,c.uU,ee.C],encapsulation:2});var pc=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class hc{constructor(e,t,n,i){this.dialogRef=e,this.data=t,this.dialogService=n,this.accessService=i,this.formGroup=new _e.cw({name:new _e.NI("",[_e.kI.required,_e.kI.maxLength(80)]),expirationDateControl:new _e.NI(null)}),this.loading=!1,this.expirationDayOptions=[7,30,60],this.submit=()=>pc(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const e=new ic;e.name=this.formGroup.value.name,e.expireAt=this.formGroup.value.expirationDateControl;const t=yield this.accessService.createAccessToken(this.data.organizationId,this.data.serviceAccountView.id,e);this.openAccessTokenDialog(this.data.serviceAccountView.name,t,e.expireAt),this.dialogRef.close()}))}ngOnInit(){var e,t;return pc(this,void 0,void 0,(function*(){if(!this.data.organizationId||!(null===(e=this.data.serviceAccountView)||void 0===e?void 0:e.id)||!(null===(t=this.data.serviceAccountView)||void 0===t?void 0:t.name))throw this.dialogRef.close(),new Error("The access token create dialog was not called with the appropriate operation values.")}))}openAccessTokenDialog(e,t,n){this.dialogService.open(rc,{data:{subTitle:e,expirationDate:n,accessToken:t}})}static openNewAccessTokenDialog(e,t,n){const i=new kt;return i.id=t,i.name="placeholder",e.open(hc,{data:{organizationId:n,serviceAccountView:i}})}}function gc(e,t){1&e&&(u.TgZ(0,"div",6),u._uU(1,"\n  "),u._UZ(2,"i",7),u._uU(3,"\n"),u.qZA())}function vc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-no-items"),u._uU(1,"\n  "),u.ynx(2,8),u._uU(3),u.ALo(4,"i18n"),u.BQk(),u._uU(5,"\n  "),u.ynx(6,9),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n  "),u.TgZ(10,"button",10),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.newAccessTokenEvent.emit())})),u._uU(11,"\n    "),u._UZ(12,"i",11),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n"),u.qZA()}2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,3,"accessTokensNoItemsTitle")),u.xp6(4),u.Oqu(u.lcZ(8,5,"accessTokensNoItemsDesc")),u.xp6(6),u.hij("\n    ",u.lcZ(14,7,"newAccessToken"),"\n  "))}function fc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",20),u._uU(1,"\n      "),u.TgZ(2,"td",16),u._uU(3,"\n        "),u.TgZ(4,"input",21),u.NdJ("change",(function(t){const n=u.CHM(e).$implicit,i=u.oxw(3);return u.KtG(t?i.selection.toggle(n.id):null)})),u.qZA(),u._uU(5,"\n      "),u.qZA(),u._uU(6,"\n      "),u.TgZ(7,"td",16),u._uU(8),u.qZA(),u._uU(9,"\n      "),u.TgZ(10,"td",16),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.TgZ(14,"td",16),u._uU(15),u.ALo(16,"i18n"),u.ALo(17,"date"),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"td",16),u._uU(20),u.ALo(21,"date"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"td",16),u._uU(24,"\n        "),u._UZ(25,"button",22),u.ALo(26,"i18n"),u.ALo(27,"i18n"),u._uU(28,"\n      "),u.qZA(),u._uU(29,"\n\n      "),u.TgZ(30,"bit-menu",null,23),u._uU(32,"\n        "),u.TgZ(33,"button",3),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.revokeAccessTokensEvent.emit([t]))})),u._uU(34,"\n          "),u.TgZ(35,"span",5),u._uU(36,"\n            "),u._UZ(37,"i",4),u._uU(38),u.ALo(39,"i18n"),u.qZA(),u._uU(40,"\n        "),u.qZA(),u._uU(41,"\n      "),u.qZA(),u._uU(42,"\n    "),u.qZA()}if(2&e){const e=t.$implicit,n=u.MAs(31),i=u.oxw(3);u.xp6(4),u.Q6J("checked",i.selection.isSelected(e.id)),u.xp6(4),u.Oqu(e.name),u.xp6(3),u.Oqu(u.lcZ(12,9,i.permission(e))),u.xp6(4),u.hij("\n        ",null===e.expireAt?u.lcZ(16,11,"never"):u.xi3(17,13,e.expireAt,"medium"),"\n      "),u.xp6(5),u.Oqu(u.xi3(21,16,e.revisionDate,"medium")),u.xp6(5),u.Q6J("title",u.lcZ(26,19,"options"))("bitMenuTriggerFor",n),u.uIk("aria-label",u.lcZ(27,21,"options")),u.xp6(13),u.hij("\n            ",u.lcZ(39,23,"revokeAccessToken"),"\n          ")}}function mc(e,t){if(1&e&&(u._uU(0,"\n    "),u.YNc(1,fc,43,25,"tr",19),u._uU(2,"\n  ")),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",e.tokens)}}function wc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-table"),u._uU(1,"\n  "),u.ynx(2,12),u._uU(3,"\n    "),u.TgZ(4,"tr"),u._uU(5,"\n      "),u.TgZ(6,"th",13),u._uU(7,"\n        "),u.TgZ(8,"label",14),u._uU(9,"\n          "),u.TgZ(10,"input",15),u.NdJ("change",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(t?n.toggleAll():null)})),u.qZA(),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.qZA(),u._uU(14,"\n      "),u.TgZ(15,"th",16),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"th",16),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"th",16),u._uU(24),u.ALo(25,"i18n"),u.qZA(),u._uU(26,"\n      "),u.TgZ(27,"th",16),u._uU(28),u.ALo(29,"i18n"),u.qZA(),u._uU(30,"\n      "),u.TgZ(31,"th",13),u._uU(32,"\n        "),u._UZ(33,"button",17),u.ALo(34,"i18n"),u.ALo(35,"i18n"),u._uU(36,"\n      "),u.qZA(),u._uU(37,"\n    "),u.qZA(),u._uU(38,"\n  "),u.BQk(),u._uU(39,"\n  "),u.YNc(40,mc,3,1,"ng-template",18),u._uU(41,"\n"),u.qZA()}if(2&e){const e=u.oxw(),t=u.MAs(7);u.xp6(10),u.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),u.xp6(1),u.hij("\n          ",u.lcZ(12,10,"all"),"\n        "),u.xp6(5),u.Oqu(u.lcZ(17,12,"name")),u.xp6(4),u.Oqu(u.lcZ(21,14,"permissions")),u.xp6(4),u.Oqu(u.lcZ(25,16,"expires")),u.xp6(4),u.Oqu(u.lcZ(29,18,"lastEdited")),u.xp6(5),u.Q6J("bitMenuTriggerFor",t)("title",u.lcZ(34,20,"options")),u.uIk("aria-label",u.lcZ(35,22,"options"))}}hc.ɵfac=function(e){return new(e||hc)(u.Y36(Ue.zj),u.Y36(Ue.Kt),u.Y36(Fe.x),u.Y36(sc))},hc.ɵcmp=u.Xpm({type:hc,selectors:[["sm-access-token-create-dialog"]],decls:62,vars:26,consts:[[3,"formGroup","bitSubmit"],["dialogSize","default"],["bitDialogTitle",""],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],["bitDialogContent",""],["bitInput","","formControlName","name"],[1,"tw-mb-6"],[1,"tw-mb-0"],["bitInput","","disabled",""],["selected","","value","canRead"],[1,"tw-text-sm","tw-text-muted"],["formControlName","expirationDateControl",3,"expirationDayOptions","touched"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","primary","bitFormButton","",1,"tw-normal-case"],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-dialog",1),u._uU(3,"\n    "),u.ynx(4,2),u._uU(5,"\n      "),u.TgZ(6,"span"),u._uU(7),u.ALo(8,"i18n"),u.qZA(),u._uU(9,"\n      "),u.TgZ(10,"span",3),u._uU(11),u.qZA(),u._uU(12,"\n    "),u.BQk(),u._uU(13,"\n\n    "),u.TgZ(14,"div",4),u._uU(15,"\n      "),u.TgZ(16,"bit-form-field"),u._uU(17,"\n        "),u.TgZ(18,"bit-label"),u._uU(19),u.ALo(20,"i18n"),u.qZA(),u._uU(21,"\n        "),u._UZ(22,"input",5),u._uU(23,"\n      "),u.qZA(),u._uU(24,"\n      "),u.TgZ(25,"div",6),u._uU(26,"\n        "),u.TgZ(27,"bit-form-field",7),u._uU(28,"\n          "),u.TgZ(29,"bit-label"),u._uU(30),u.ALo(31,"i18n"),u.qZA(),u._uU(32,"\n          "),u.TgZ(33,"select",8),u._uU(34,"\n            "),u.TgZ(35,"option",9),u._uU(36),u.ALo(37,"i18n"),u.qZA(),u._uU(38,"\n          "),u.qZA(),u._uU(39,"\n        "),u.qZA(),u._uU(40,"\n        "),u.TgZ(41,"span",10),u._uU(42),u.ALo(43,"i18n"),u.qZA(),u._uU(44,"\n      "),u.qZA(),u._uU(45,"\n      "),u._UZ(46,"sm-expiration-options",11),u._uU(47,"\n    "),u.qZA(),u._uU(48,"\n\n    "),u.TgZ(49,"div",12),u._uU(50,"\n      "),u.TgZ(51,"button",13),u._uU(52),u.ALo(53,"i18n"),u.qZA(),u._uU(54,"\n      "),u.TgZ(55,"button",14),u._uU(56),u.ALo(57,"i18n"),u.qZA(),u._uU(58,"\n    "),u.qZA(),u._uU(59,"\n  "),u.qZA(),u._uU(60,"\n"),u.qZA(),u._uU(61,"\n")),2&e&&(u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(7),u.Oqu(u.lcZ(8,12,"newAccessToken")),u.xp6(4),u.hij("\n        ",t.data.serviceAccountView.name,"\n      "),u.xp6(8),u.Oqu(u.lcZ(20,14,"name")),u.xp6(11),u.Oqu(u.lcZ(31,16,"permissions")),u.xp6(6),u.hij("\n              ",u.lcZ(37,18,"canRead"),"\n            "),u.xp6(6),u.hij("\n          ",u.lcZ(43,20,"accessTokenPermissionsBetaNotification"),"\n        "),u.xp6(4),u.Q6J("expirationDayOptions",t.expirationDayOptions)("touched",t.formGroup.controls.expirationDateControl.touched),u.xp6(6),u.hij("\n        ",u.lcZ(53,22,"newAccessToken"),"\n      "),u.xp6(4),u.hij("\n        ",u.lcZ(57,24,"cancel"),"\n      "))},dependencies:[_e._Y,_e.YN,_e.Kr,_e.Fj,_e.JJ,_e.JL,_e.sg,_e.u,Ve.b,Ke.u,ye.r,Ze.a,be.f,We.d,Xe.G,et.u,dc,ee.C],encapsulation:2});class Ac{constructor(){this.newAccessTokenEvent=new u.vpe,this.revokeAccessTokensEvent=new u.vpe,this.selection=new Mt.Ov(!0,[])}get tokens(){return this._tokens}set tokens(e){this.selection.clear(),this._tokens=e}isAllSelected(){return this.selection.selected.length===this.tokens.length}toggleAll(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.tokens.map((e=>e.id)))}revokeSelected(){const e=this.tokens.filter((e=>this.selection.selected.includes(e.id)));this.revokeAccessTokensEvent.emit(e)}permission(e){return"canRead"}}Ac.ɵfac=function(e){return new(e||Ac)},Ac.ɵcmp=u.Xpm({type:Ac,selectors:[["sm-access-list"]],inputs:{tokens:"tokens"},outputs:{newAccessTokenEvent:"newAccessTokenEvent",revokeAccessTokensEvent:"revokeAccessTokensEvent"},decls:19,vars:6,consts:[["class","tw-items-center tw-justify-center tw-pt-64 tw-text-center",4,"ngIf"],[4,"ngIf"],["tableMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-minus-circle"],[1,"tw-text-danger"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["slot","title"],["slot","description"],["type","button","slot","button","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"],["header",""],["bitCell","",1,"tw-w-0"],[1,"tw-m-0","tw-flex","tw-w-fit","tw-gap-2","!tw-font-bold","!tw-text-muted"],["type","checkbox",3,"checked","indeterminate","change"],["bitCell",""],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"bitMenuTriggerFor","title"],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["type","checkbox",3,"checked","change"],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"title","bitMenuTriggerFor"],["tokenMenu",""]],template:function(e,t){1&e&&(u.YNc(0,gc,4,0,"div",0),u._uU(1,"\n\n"),u.YNc(2,vc,16,9,"bit-no-items",1),u._uU(3,"\n\n"),u.YNc(4,wc,42,24,"bit-table",1),u._uU(5,"\n\n"),u.TgZ(6,"bit-menu",null,2),u._uU(8,"\n  "),u.TgZ(9,"button",3),u.NdJ("click",(function(){return t.revokeSelected()})),u._uU(10,"\n    "),u._UZ(11,"i",4),u._uU(12,"\n    "),u.TgZ(13,"span",5),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n  "),u.qZA(),u._uU(17,"\n"),u.qZA(),u._uU(18,"\n")),2&e&&(u.Q6J("ngIf",!t.tokens),u.xp6(2),u.Q6J("ngIf",0==(null==t.tokens?null:t.tokens.length)),u.xp6(2),u.Q6J("ngIf",(null==t.tokens?null:t.tokens.length)>=1),u.xp6(10),u.Oqu(u.lcZ(15,4,"revokeAccessTokens")))},dependencies:[c.sg,c.O5,ye.r,P.Q,Bt.M,$t.t,Ft.e,xe.a,Se.Y,Te.v,xe.f,Xt,c.uU,ee.C],encapsulation:2});var Uc=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class _c{constructor(e,t,n,i,o){this.route=e,this.accessService=t,this.dialogService=n,this.modalService=i,this.platformUtilsService=o}ngOnInit(){this.accessTokens$=this.accessService.accessToken$.pipe((0,fe.O)(null),(0,Ao.V)(this.route.params),(0,me.w)((([e,t])=>Uc(this,void 0,void 0,(function*(){return this.organizationId=t.organizationId,this.serviceAccountId=t.serviceAccountId,yield this.getAccessTokens()})))))}revoke(e){return Uc(this,void 0,void 0,(function*(){(yield this.verifyUser())&&(yield this.accessService.revokeAccessTokens(this.serviceAccountId,e.map((e=>e.id))),this.platformUtilsService.showToast("success",null,"Access tokens revoked."))}))}openNewAccessTokenDialog(){hc.openNewAccessTokenDialog(this.dialogService,this.serviceAccountId,this.organizationId)}verifyUser(){const e=this.modalService.open(Ho.i,{allowMultipleModals:!0,data:{confirmDescription:"revokeAccessTokenDesc",confirmButtonText:"revokeAccessToken",modalTitle:"revokeAccessToken"}});if(null!=e)return e.onClosedPromise()}getAccessTokens(){return Uc(this,void 0,void 0,(function*(){return yield this.accessService.getAccessTokens(this.organizationId,this.serviceAccountId)}))}}_c.ɵfac=function(e){return new(e||_c)(u.Y36(s.gz),u.Y36(sc),u.Y36(Fe.x),u.Y36(Ko.Z),u.Y36($e.P))},_c.ɵcmp=u.Xpm({type:_c,selectors:[["sm-access-tokens"]],decls:3,vars:3,consts:[[3,"tokens","newAccessTokenEvent","revokeAccessTokensEvent"]],template:function(e,t){1&e&&(u.TgZ(0,"sm-access-list",0),u.NdJ("newAccessTokenEvent",(function(){return t.openNewAccessTokenDialog()}))("revokeAccessTokensEvent",(function(e){return t.revoke(e)})),u.ALo(1,"async"),u.qZA(),u._uU(2,"\n")),2&e&&u.Q6J("tokens",u.lcZ(1,1,t.accessTokens$))},dependencies:[Ac,c.Ov],encapsulation:2});var yc=n(21326),Zc=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class bc{handleCreateAccessPolicies(e){const t=new ji;return t.userAccessPolicies=e.filter((e=>"user"===po.getAccessItemType(e))).map((e=>{const t=new Si;return t.grantedServiceAccountId=this.serviceAccountId,t.organizationUserId=e.id,t.read=!0,t.write=!0,t})),t.groupAccessPolicies=e.filter((e=>"group"===po.getAccessItemType(e))).map((e=>{const t=new Ii;return t.grantedServiceAccountId=this.serviceAccountId,t.groupId=e.id,t.read=!0,t.write=!0,t})),this.accessPolicyService.createServiceAccountAccessPolicies(this.serviceAccountId,t)}handleDeleteAccessPolicy(e){return Zc(this,void 0,void 0,(function*(){if(yield this.accessPolicyService.needToShowAccessRemovalWarning(this.organizationId,e,this.rows))this.launchDeleteWarningDialog(e);else try{yield this.accessPolicyService.deleteAccessPolicy(e.accessPolicyId);const t={title:this.i18nService.t("saPeopleWarningTitle"),content:this.i18nService.t("saPeopleWarningMessage"),type:yc.r.WARNING,acceptButtonText:this.i18nService.t("close"),cancelButtonText:null};this.dialogService.openSimpleDialog(t)}catch(t){this.validationService.showError(t)}}))}constructor(e,t,n,i,o){this.route=e,this.dialogService=t,this.i18nService=n,this.validationService=i,this.accessPolicyService=o,this.destroy$=new he.x,this.rows$=this.accessPolicyService.serviceAccountAccessPolicyChanges$.pipe((0,fe.O)(null),(0,Ao.V)(this.route.params),(0,me.w)((([e,t])=>this.accessPolicyService.getServiceAccountAccessPolicies(t.serviceAccountId))),(0,Z.U)((e=>{const t=[];return e.userAccessPolicies.forEach((e=>{t.push({type:"user",name:e.organizationUserName,id:e.organizationUserId,accessPolicyId:e.id,read:e.read,write:e.write,userId:e.userId,icon:po.userIcon,static:!0})})),e.groupAccessPolicies.forEach((e=>{t.push({type:"group",name:e.groupName,id:e.groupId,accessPolicyId:e.id,read:e.read,write:e.write,currentUserInGroup:e.currentUserInGroup,icon:po.groupIcon,static:!0})})),t})),(0,we.B)())}ngOnInit(){this.route.params.pipe((0,ve.R)(this.destroy$)).subscribe((e=>{this.serviceAccountId=e.serviceAccountId,this.organizationId=e.organizationId})),this.rows$.pipe((0,ve.R)(this.destroy$)).subscribe((e=>{this.rows=e}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}launchDeleteWarningDialog(e){this.dialogService.open(go,{data:{title:"smAccessRemovalWarningSaTitle",message:"smAccessRemovalWarningSaMessage",operation:"delete",type:"service-account",returnRoute:["sm",this.organizationId,"service-accounts"],policy:e}})}}bc.ɵfac=function(e){return new(e||bc)(u.Y36(s.gz),u.Y36(Fe.x),u.Y36(Be.D),u.Y36(vo.R),u.Y36($i))},bc.ɵcmp=u.Xpm({type:bc,selectors:[["sm-service-account-people"]],decls:15,vars:18,consts:[[1,"tw-mt-4","tw-w-2/5"],[1,"tw-mt-6"],["granteeType","people",3,"rows","label","hint","columnTitle","emptyMessage","onCreateAccessPolicies","onDeleteAccessPolicy"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"p",1),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"sm-access-selector",2),u.NdJ("onCreateAccessPolicies",(function(e){return t.handleCreateAccessPolicies(e)}))("onDeleteAccessPolicy",(function(e){return t.handleDeleteAccessPolicy(e)})),u.ALo(7,"async"),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.ALo(10,"i18n"),u.ALo(11,"i18n"),u._uU(12,"\n  "),u.qZA(),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n")),2&e&&(u.xp6(3),u.hij("\n    ",u.lcZ(4,6,"serviceAccountPeopleDescription"),"\n  "),u.xp6(3),u.Q6J("rows",u.lcZ(7,8,t.rows$))("label",u.lcZ(8,10,"people"))("hint",u.lcZ(9,12,"projectPeopleSelectHint"))("columnTitle",u.lcZ(10,14,"groupSlashUser"))("emptyMessage",u.lcZ(11,16,"projectEmptyPeopleAccessPolicies")))},dependencies:[po,c.Ov,ee.C],encapsulation:2});var xc=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class Sc{handleCreateAccessPolicies(e){const t=e.filter((e=>"project"===po.getAccessItemType(e))).map((e=>{const t=new Pi;return t.serviceAccountId=this.serviceAccountId,t.grantedProjectId=e.id,t.read=!0,t.write=!1,t}));return this.accessPolicyService.createGrantedPolicies(this.organizationId,this.serviceAccountId,t)}handleDeleteAccessPolicy(e){return xc(this,void 0,void 0,(function*(){try{yield this.accessPolicyService.deleteAccessPolicy(e.accessPolicyId)}catch(t){this.validationService.showError(t)}}))}constructor(e,t,n){this.route=e,this.validationService=t,this.accessPolicyService=n,this.destroy$=new he.x,this.rows$=this.accessPolicyService.serviceAccountGrantedPolicyChanges$.pipe((0,fe.O)(null),(0,Ao.V)(this.route.params),(0,me.w)((([e,t])=>this.accessPolicyService.getGrantedPolicies(t.serviceAccountId,t.organizationId))),(0,Z.U)((e=>e.map((e=>({type:"project",name:e.grantedProjectName,id:e.grantedProjectId,accessPolicyId:e.id,read:e.read,write:e.write,icon:po.projectIcon,static:!0}))))))}ngOnInit(){this.route.params.pipe((0,ve.R)(this.destroy$)).subscribe((e=>{this.organizationId=e.organizationId,this.serviceAccountId=e.serviceAccountId}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}Sc.ɵfac=function(e){return new(e||Sc)(u.Y36(s.gz),u.Y36(vo.R),u.Y36($i))},Sc.ɵcmp=u.Xpm({type:Sc,selectors:[["sm-service-account-projects"]],decls:15,vars:18,consts:[[1,"tw-mt-4","tw-w-2/5"],[1,"tw-mt-6"],["granteeType","projects",3,"rows","label","hint","columnTitle","emptyMessage","onCreateAccessPolicies","onDeleteAccessPolicy"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._uU(1,"\n  "),u.TgZ(2,"p",1),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"sm-access-selector",2),u.NdJ("onCreateAccessPolicies",(function(e){return t.handleCreateAccessPolicies(e)}))("onDeleteAccessPolicy",(function(e){return t.handleDeleteAccessPolicy(e)})),u.ALo(7,"async"),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.ALo(10,"i18n"),u.ALo(11,"i18n"),u._uU(12,"\n  "),u.qZA(),u._uU(13,"\n"),u.qZA(),u._uU(14,"\n")),2&e&&(u.xp6(3),u.hij("\n    ",u.lcZ(4,6,"serviceAccountProjectsDescription"),"\n  "),u.xp6(3),u.Q6J("rows",u.lcZ(7,8,t.rows$))("label",u.lcZ(8,10,"projects"))("hint",u.lcZ(9,12,"newSaSelectAccess"))("columnTitle",u.lcZ(10,14,"projects"))("emptyMessage",u.lcZ(11,16,"serviceAccountEmptyProjectAccesspolicies")))},dependencies:[po,c.Ov,ee.C],encapsulation:2});const Tc=function(){return[".."]},Ic=function(){return["projects"]},Pc=function(){return["people"]},qc=function(){return["access"]};function jc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"sm-header",1),u._uU(1,"\n  "),u.TgZ(2,"bit-breadcrumbs",2),u._uU(3,"\n    "),u.TgZ(4,"bit-breadcrumb",3),u._uU(5),u.ALo(6,"i18n"),u.qZA(),u._uU(7,"\n  "),u.qZA(),u._uU(8,"\n  "),u._UZ(9,"sm-new-menu"),u._uU(10,"\n  "),u.TgZ(11,"bit-tab-nav-bar",4),u._uU(12,"\n    "),u.TgZ(13,"bit-tab-link",5),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"bit-tab-link",5),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n    "),u.TgZ(21,"bit-tab-link",5),u._uU(22),u.ALo(23,"i18n"),u.qZA(),u._uU(24,"\n  "),u.qZA(),u._uU(25,"\n  "),u.TgZ(26,"button",6),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.openNewAccessTokenDialog())})),u._uU(27,"\n    "),u._UZ(28,"i",7),u._uU(29),u.ALo(30,"i18n"),u.qZA(),u._uU(31,"\n"),u.qZA()}if(2&e){const e=t.ngIf;u.Q6J("title",e.name),u.xp6(4),u.Q6J("route",u.DdM(20,Tc)),u.xp6(1),u.Oqu(u.lcZ(6,10,"serviceAccounts")),u.xp6(8),u.Q6J("route",u.DdM(21,Ic)),u.xp6(1),u.Oqu(u.lcZ(15,12,"projects")),u.xp6(3),u.Q6J("route",u.DdM(22,Pc)),u.xp6(1),u.Oqu(u.lcZ(19,14,"people")),u.xp6(3),u.Q6J("route",u.DdM(23,qc)),u.xp6(1),u.Oqu(u.lcZ(23,16,"accessTokens")),u.xp6(7),u.hij("\n    ",u.lcZ(30,18,"newAccessToken"),"\n  ")}}class kc{constructor(e,t,n){this.route=e,this.serviceAccountService=t,this.dialogService=n,this.serviceAccount$=this.route.params.pipe((0,me.w)((e=>(this.serviceAccountId=e.serviceAccountId,this.organizationId=e.organizationId,this.serviceAccountService.getServiceAccounts(e.organizationId).then((t=>t.find((t=>t.id===e.serviceAccountId))))))))}openNewAccessTokenDialog(){hc.openNewAccessTokenDialog(this.dialogService,this.serviceAccountId,this.organizationId)}}kc.ɵfac=function(e){return new(e||kc)(u.Y36(s.gz),u.Y36(Dt),u.Y36(Fe.x))},kc.ɵcmp=u.Xpm({type:kc,selectors:[["sm-service-account"]],decls:5,vars:3,consts:[["icon","bwi-wrench",3,"title",4,"ngIf"],["icon","bwi-wrench",3,"title"],["slot","breadcrumbs"],["icon","bwi-angle-left",3,"route"],["label","Main","slot","tabs"],[3,"route"],["type","button","slot","secondary","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"]],template:function(e,t){1&e&&(u.YNc(0,jc,32,24,"sm-header",0),u.ALo(1,"async"),u._uU(2,"\n"),u._UZ(3,"router-outlet"),u._uU(4,"\n")),2&e&&u.Q6J("ngIf",u.lcZ(1,1,t.serviceAccount$))},dependencies:[c.O5,s.lC,ye.r,To.f,Io.G,On,Dn,Po.n,qo.L,c.Ov,ee.C],encapsulation:2});var Cc=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function Lc(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){const e=u.oxw();u.xp6(1),u.hij("\n          ",e.data.serviceAccounts[0].name,"\n        ")}}function Oc(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.ALo(2,"i18n"),u.BQk()),2&e){const e=u.oxw();u.xp6(1),u.AsE("\n          ",e.data.serviceAccounts.length,"\n          ",u.lcZ(2,2,"serviceAccounts"),"\n        ")}}class Dc{constructor(e,t,n,i,o,c){this.dialogRef=e,this.data=t,this.serviceAccountService=n,this.i18nService=i,this.platformUtilsService=o,this.dialogService=c,this.formGroup=new _e.cw({confirmDelete:new _e.NI("",[this.matchConfirmationMessageValidator()])}),this.submit=()=>Cc(this,void 0,void 0,(function*(){this.formGroup.markAllAsTouched(),this.formGroup.invalid||(yield this.delete(),this.dialogRef.close())}))}get title(){return 1===this.data.serviceAccounts.length?this.i18nService.t("deleteServiceAccount"):this.i18nService.t("deleteServiceAccounts")}get dialogContent(){return 1===this.data.serviceAccounts.length?this.i18nService.t("deleteServiceAccountDialogMessage",this.data.serviceAccounts[0].name):this.i18nService.t("deleteServiceAccountsDialogMessage")}get dialogConfirmationLabel(){return this.i18nService.t("deleteProjectInputLabel",this.dialogConfirmationMessage)}delete(){return Cc(this,void 0,void 0,(function*(){const e=(yield this.serviceAccountService.delete(this.data.serviceAccounts)).filter((e=>e.errorMessage));if(e.length>0)return void this.openBulkStatusDialog(e);const t=1===this.data.serviceAccounts.length?"deleteServiceAccountToast":"deleteServiceAccountsToast";this.platformUtilsService.showToast("success",null,this.i18nService.t(t))}))}openBulkStatusDialog(e){this.dialogService.open(je,{data:{title:"deleteServiceAccounts",subTitle:"serviceAccounts",columnTitle:"serviceAccountName",message:"bulkDeleteProjectsErrorMessage",details:e}})}get dialogConfirmationMessage(){var e,t;return 1===(null===(e=this.data.serviceAccounts)||void 0===e?void 0:e.length)?this.i18nService.t("deleteProjectConfirmMessage",this.data.serviceAccounts[0].name):this.i18nService.t("deleteServiceAccountsConfirmMessage",null===(t=this.data.serviceAccounts)||void 0===t?void 0:t.length.toString())}matchConfirmationMessageValidator(){return e=>this.dialogConfirmationMessage.toLowerCase()==e.value.toLowerCase()?null:{confirmationDoesntMatchError:{message:this.i18nService.t("smConfirmationRequired")}}}}function Jc(e,t){1&e&&(u.TgZ(0,"div",7),u._uU(1,"\n  "),u._UZ(2,"i",8),u._uU(3,"\n"),u.qZA())}function Nc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-no-items"),u._uU(1,"\n  "),u.ynx(2,9),u._uU(3),u.ALo(4,"i18n"),u.BQk(),u._uU(5,"\n  "),u.ynx(6,10),u._uU(7),u.ALo(8,"i18n"),u.BQk(),u._uU(9,"\n  "),u.TgZ(10,"button",11),u.NdJ("click",(function(){u.CHM(e);const t=u.oxw();return u.KtG(t.newServiceAccountEvent.emit())})),u._uU(11,"\n    "),u._UZ(12,"i",12),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15,"\n"),u.qZA()}2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,3,"serviceAccountsNoItemsTitle")),u.xp6(4),u.Oqu(u.lcZ(8,5,"serviceAccountsNoItemsMessage")),u.xp6(6),u.hij("\n    ",u.lcZ(14,7,"newServiceAccount"),"\n  "))}function zc(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"tr",24),u._uU(1,"\n      "),u.TgZ(2,"td",19),u._uU(3,"\n        "),u.TgZ(4,"input",25),u.NdJ("change",(function(t){const n=u.CHM(e).$implicit,i=u.oxw(3);return u.KtG(t?i.selection.toggle(n.id):null)})),u.qZA(),u._uU(5,"\n      "),u.qZA(),u._uU(6,"\n      "),u.TgZ(7,"td",26),u._uU(8,"\n        "),u._UZ(9,"i",27),u._uU(10,"\n      "),u.qZA(),u._uU(11,"\n      "),u.TgZ(12,"td",28),u._uU(13,"\n        "),u.TgZ(14,"a",29),u._uU(15),u.qZA(),u._uU(16,"\n      "),u.qZA(),u._uU(17,"\n      "),u.TgZ(18,"td",19),u._uU(19,"\n        "),u._uU(20,"\n        "),u.TgZ(21,"span"),u._uU(22," 0 "),u.qZA(),u._uU(23,"\n      "),u.qZA(),u._uU(24,"\n      "),u.TgZ(25,"td",19),u._uU(26),u.ALo(27,"date"),u.qZA(),u._uU(28,"\n      "),u.TgZ(29,"td",19),u._uU(30,"\n        "),u._UZ(31,"button",21),u.ALo(32,"i18n"),u.ALo(33,"i18n"),u._uU(34,"\n      "),u.qZA(),u._uU(35,"\n      "),u.TgZ(36,"bit-menu",null,30),u._uU(38,"\n        "),u.TgZ(39,"a",31),u._uU(40,"\n          "),u._UZ(41,"i",32),u._uU(42),u.ALo(43,"i18n"),u.qZA(),u._uU(44,"\n        "),u.TgZ(45,"button",4),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.editServiceAccountEvent.emit(t.id))})),u._uU(46,"\n          "),u._UZ(47,"i",33),u._uU(48),u.ALo(49,"i18n"),u.qZA(),u._uU(50,"\n        "),u.TgZ(51,"button",4),u.NdJ("click",(function(){const t=u.CHM(e).$implicit,n=u.oxw(3);return u.KtG(n.delete(t))})),u._uU(52,"\n          "),u._UZ(53,"i",5),u._uU(54,"\n          "),u.TgZ(55,"span",6),u._uU(56),u.ALo(57,"i18n"),u.qZA(),u._uU(58,"\n        "),u.qZA(),u._uU(59,"\n      "),u.qZA(),u._uU(60,"\n    "),u.qZA()}if(2&e){const e=t.$implicit,n=u.MAs(37),i=u.oxw(3);u.xp6(4),u.Q6J("checked",i.selection.isSelected(e.id)),u.xp6(10),u.Q6J("routerLink",e.id),u.xp6(1),u.hij("\n          ",e.name,"\n        "),u.xp6(11),u.Oqu(u.xi3(27,11,e.revisionDate,"medium")),u.xp6(5),u.Q6J("title",u.lcZ(32,14,"options"))("bitMenuTriggerFor",n),u.uIk("aria-label",u.lcZ(33,16,"options")),u.xp6(8),u.Q6J("routerLink",e.id),u.xp6(3),u.hij("\n          ",u.lcZ(43,18,"viewServiceAccount"),"\n        "),u.xp6(6),u.hij("\n          ",u.lcZ(49,20,"editServiceAccount"),"\n        "),u.xp6(8),u.hij("\n            ",u.lcZ(57,22,"deleteServiceAccount"),"\n          ")}}function Yc(e,t){if(1&e&&(u._uU(0,"\n    "),u.YNc(1,zc,61,24,"tr",23),u.ALo(2,"async"),u._uU(3,"\n  ")),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("ngForOf",u.lcZ(2,1,e))}}function Ec(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"bit-table",13),u._uU(1,"\n  "),u.ynx(2,14),u._uU(3,"\n    "),u.TgZ(4,"tr"),u._uU(5,"\n      "),u.TgZ(6,"th",15),u._uU(7,"\n        "),u.TgZ(8,"label",16),u._uU(9,"\n          "),u.TgZ(10,"input",17),u.NdJ("change",(function(t){u.CHM(e);const n=u.oxw();return u.KtG(t?n.toggleAll():null)})),u.qZA(),u._uU(11),u.ALo(12,"i18n"),u.qZA(),u._uU(13,"\n      "),u.qZA(),u._uU(14,"\n      "),u.TgZ(15,"th",18),u._uU(16),u.ALo(17,"i18n"),u.qZA(),u._uU(18,"\n      "),u.TgZ(19,"th",19),u._uU(20),u.ALo(21,"i18n"),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"th",20),u._uU(24),u.ALo(25,"i18n"),u.qZA(),u._uU(26,"\n      "),u.TgZ(27,"th",15),u._uU(28,"\n        "),u._UZ(29,"button",21),u.ALo(30,"i18n"),u.ALo(31,"i18n"),u._uU(32,"\n      "),u.qZA(),u._uU(33,"\n    "),u.qZA(),u._uU(34,"\n  "),u.BQk(),u._uU(35,"\n  "),u.YNc(36,Yc,4,3,"ng-template",22),u._uU(37,"\n"),u.qZA()}if(2&e){const e=u.oxw(),t=u.MAs(7);u.Q6J("dataSource",e.dataSource),u.xp6(10),u.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected()),u.xp6(1),u.hij("\n          ",u.lcZ(12,10,"all"),"\n        "),u.xp6(5),u.Oqu(u.lcZ(17,12,"name")),u.xp6(4),u.Oqu(u.lcZ(21,14,"secrets")),u.xp6(4),u.Oqu(u.lcZ(25,16,"lastEdited")),u.xp6(5),u.Q6J("title",u.lcZ(30,18,"options"))("bitMenuTriggerFor",t),u.uIk("aria-label",u.lcZ(31,20,"options"))}}Dc.ɵfac=function(e){return new(e||Dc)(u.Y36(Ue.zj),u.Y36(Ue.Kt),u.Y36(Dt),u.Y36(Be.D),u.Y36($e.P),u.Y36(Fe.x))},Dc.ɵcmp=u.Xpm({type:Dc,selectors:[["sm-service-account-delete-dialog"]],decls:44,vars:14,consts:[[3,"formGroup","bitSubmit"],["dialogSize","small"],["bitDialogTitle",""],[1,"tw-text-sm","tw-normal-case","tw-text-muted"],[4,"ngIf"],["bitDialogContent",""],["type","warning",3,"title"],["bitInput","","formControlName","confirmDelete"],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","submit","bitButton","","buttonType","danger","bitFormButton",""],["type","button","bitButton","","buttonType","secondary","bitFormButton","","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"form",0),u._uU(1,"\n  "),u.TgZ(2,"bit-dialog",1),u._uU(3,"\n    "),u.ynx(4,2),u._uU(5,"\n      "),u.TgZ(6,"span"),u._uU(7),u.qZA(),u._uU(8,"\n      "),u.TgZ(9,"span",3),u._uU(10,"\n        "),u.YNc(11,Lc,2,1,"ng-container",4),u._uU(12,"\n        "),u.YNc(13,Oc,3,4,"ng-container",4),u._uU(14,"\n      "),u.qZA(),u._uU(15,"\n    "),u.BQk(),u._uU(16,"\n\n    "),u.TgZ(17,"div",5),u._uU(18,"\n      "),u.TgZ(19,"bit-callout",6),u.ALo(20,"i18n"),u._uU(21),u.qZA(),u._uU(22,"\n      "),u.TgZ(23,"bit-form-field"),u._uU(24,"\n        "),u.TgZ(25,"bit-label"),u._uU(26),u.qZA(),u._uU(27,"\n        "),u._UZ(28,"input",7),u._uU(29,"\n      "),u.qZA(),u._uU(30,"\n    "),u.qZA(),u._uU(31,"\n\n    "),u.TgZ(32,"div",8),u._uU(33,"\n      "),u.TgZ(34,"button",9),u._uU(35),u.qZA(),u._uU(36,"\n      "),u.TgZ(37,"button",10),u._uU(38),u.ALo(39,"i18n"),u.qZA(),u._uU(40,"\n    "),u.qZA(),u._uU(41,"\n  "),u.qZA(),u._uU(42,"\n"),u.qZA(),u._uU(43,"\n")),2&e&&(u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(7),u.Oqu(t.title),u.xp6(4),u.Q6J("ngIf",1==t.data.serviceAccounts.length),u.xp6(2),u.Q6J("ngIf",t.data.serviceAccounts.length>1),u.xp6(6),u.Q6J("title",u.lcZ(20,10,"warning")),u.xp6(2),u.hij("\n        ",t.dialogContent,"\n      "),u.xp6(5),u.Oqu(t.dialogConfirmationLabel),u.xp6(9),u.hij("\n        ",t.title,"\n      "),u.xp6(3),u.hij("\n        ",u.lcZ(39,12,"cancel"),"\n      "))},dependencies:[c.O5,_e._Y,_e.Fj,_e.JJ,_e.JL,_e.sg,_e.u,Ve.b,Ke.u,ye.r,He.O,Ze.a,be.f,We.d,Xe.G,et.u,ee.C],encapsulation:2});class Mc{get serviceAccounts(){return this._serviceAccounts}set serviceAccounts(e){this.selection.clear(),this._serviceAccounts=e,this.dataSource.data=e}set search(e){this.dataSource.filter=e}constructor(e,t){this.i18nService=e,this.platformUtilsService=t,this.dataSource=new Qt.G,this.newServiceAccountEvent=new u.vpe,this.deleteServiceAccountsEvent=new u.vpe,this.onServiceAccountCheckedEvent=new u.vpe,this.editServiceAccountEvent=new u.vpe,this.destroy$=new he.x,this.selection=new Mt.Ov(!0,[]),this.selection.changed.pipe((0,ve.R)(this.destroy$)).subscribe((e=>this.onServiceAccountCheckedEvent.emit(this.selection.selected)))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}isAllSelected(){return this.selection.selected.length===this.serviceAccounts.length}toggleAll(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.serviceAccounts.map((e=>e.id)))}delete(e){this.deleteServiceAccountsEvent.emit([e])}bulkDeleteServiceAccounts(){this.selection.selected.length>=1?this.deleteServiceAccountsEvent.emit(this.serviceAccounts.filter((e=>this.selection.isSelected(e.id)))):this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("nothingSelected"))}}Mc.ɵfac=function(e){return new(e||Mc)(u.Y36(Be.D),u.Y36($e.P))},Mc.ɵcmp=u.Xpm({type:Mc,selectors:[["sm-service-accounts-list"]],inputs:{serviceAccounts:"serviceAccounts",search:"search"},outputs:{newServiceAccountEvent:"newServiceAccountEvent",deleteServiceAccountsEvent:"deleteServiceAccountsEvent",onServiceAccountCheckedEvent:"onServiceAccountCheckedEvent",editServiceAccountEvent:"editServiceAccountEvent"},decls:19,vars:6,consts:[["class","tw-items-center tw-justify-center tw-pt-64 tw-text-center",4,"ngIf"],[4,"ngIf"],[3,"dataSource",4,"ngIf"],["tableMenu",""],["type","button","bitMenuItem","",3,"click"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-trash","tw-text-danger"],[1,"tw-text-danger"],[1,"tw-items-center","tw-justify-center","tw-pt-64","tw-text-center"],[1,"bwi","bwi-spinner","bwi-spin","bwi-3x"],["slot","title"],["slot","description"],["slot","button","type","button","bitButton","","buttonType","secondary",3,"click"],["aria-hidden","true",1,"bwi","bwi-plus"],[3,"dataSource"],["header",""],["bitCell","",1,"tw-w-0"],[1,"!tw-mb-0","tw-flex","tw-w-fit","tw-gap-2","!tw-font-bold","!tw-text-muted"],["type","checkbox",3,"checked","indeterminate","change"],["bitCell","","colspan","2","bitSortable","name","default",""],["bitCell",""],["bitCell","","bitSortable","revisionDate"],["type","button","bitIconButton","bwi-ellipsis-v","buttonType","main",3,"title","bitMenuTriggerFor"],["body",""],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["type","checkbox",3,"checked","change"],["bitCell","",1,"tw-w-0","tw-pr-0"],["aria-hidden","true",1,"bwi","bwi-wrench","tw-text-muted"],["bitCell","",1,"tw-break-all"],["bitLink","",3,"routerLink"],["serviceAccountMenu",""],["type","button","bitMenuItem","",3,"routerLink"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-eye"],["aria-hidden","true",1,"bwi","bwi-fw","bwi-pencil"]],template:function(e,t){1&e&&(u.YNc(0,Jc,4,0,"div",0),u._uU(1,"\n\n"),u.YNc(2,Nc,16,9,"bit-no-items",1),u._uU(3,"\n\n"),u.YNc(4,Ec,38,22,"bit-table",2),u._uU(5,"\n\n"),u.TgZ(6,"bit-menu",null,3),u._uU(8,"\n  "),u.TgZ(9,"button",4),u.NdJ("click",(function(){return t.bulkDeleteServiceAccounts()})),u._uU(10,"\n    "),u._UZ(11,"i",5),u._uU(12,"\n    "),u.TgZ(13,"span",6),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n  "),u.qZA(),u._uU(17,"\n"),u.qZA(),u._uU(18,"\n")),2&e&&(u.Q6J("ngIf",!t.serviceAccounts),u.xp6(2),u.Q6J("ngIf",0==(null==t.serviceAccounts?null:t.serviceAccounts.length)),u.xp6(2),u.Q6J("ngIf",(null==t.serviceAccounts?null:t.serviceAccounts.length)>=1),u.xp6(10),u.hij("\n      ",u.lcZ(15,4,"deleteServiceAccounts"),"\n    "))},dependencies:[c.sg,c.O5,s.rH,ye.r,P.Q,Rt.r,Bt.M,$t.t,Ft.e,xe.a,Se.Y,Te.v,Kt,xe.f,Xt,c.Ov,c.uU,ee.C],encapsulation:2});var Qc=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class Gc{constructor(e,t,n,i){this.route=e,this.dialogService=t,this.accessPolicyService=n,this.serviceAccountService=i}ngOnInit(){this.serviceAccounts$=(0,W.a)([this.route.params,this.serviceAccountService.serviceAccount$.pipe((0,fe.O)(null)),this.accessPolicyService.serviceAccountAccessPolicyChanges$.pipe((0,fe.O)(null))]).pipe((0,me.w)((([e])=>Qc(this,void 0,void 0,(function*(){return this.organizationId=e.organizationId,yield this.getServiceAccounts()})))))}openNewServiceAccountDialog(){this.dialogService.open(Et,{data:{organizationId:this.organizationId,operation:Jt.Add}})}openEditServiceAccountDialog(e){this.dialogService.open(Et,{data:{organizationId:this.organizationId,serviceAccountId:e,operation:Jt.Edit}})}openDeleteDialog(e){this.dialogService.open(Dc,{data:{serviceAccounts:e}})}getServiceAccounts(){return Qc(this,void 0,void 0,(function*(){return yield this.serviceAccountService.getServiceAccounts(this.organizationId)}))}}Gc.ɵfac=function(e){return new(e||Gc)(u.Y36(s.gz),u.Y36(Fe.x),u.Y36($i),u.Y36(Dt))},Gc.ɵcmp=u.Xpm({type:Gc,selectors:[["sm-service-accounts"]],decls:11,vars:8,consts:[["bitInput","",1,"tw-w-80",3,"placeholder","ngModel","ngModelChange"],[3,"serviceAccounts","search","newServiceAccountEvent","editServiceAccountEvent","deleteServiceAccountsEvent"]],template:function(e,t){1&e&&(u.TgZ(0,"sm-header"),u._uU(1,"\n  "),u.TgZ(2,"input",0),u.NdJ("ngModelChange",(function(e){return t.search=e})),u.ALo(3,"i18n"),u.qZA(),u._uU(4,"\n  "),u._UZ(5,"sm-new-menu"),u._uU(6,"\n"),u.qZA(),u._uU(7,"\n"),u.TgZ(8,"sm-service-accounts-list",1),u.NdJ("newServiceAccountEvent",(function(){return t.openNewServiceAccountDialog()}))("editServiceAccountEvent",(function(e){return t.openEditServiceAccountDialog(e)}))("deleteServiceAccountsEvent",(function(e){return t.openDeleteDialog(e)})),u.ALo(9,"async"),u.qZA(),u._uU(10,"\n")),2&e&&(u.xp6(2),u.Q6J("placeholder",u.lcZ(3,4,"searchServiceAccounts"))("ngModel",t.search),u.xp6(6),u.Q6J("serviceAccounts",u.lcZ(9,6,t.serviceAccounts$))("search",t.search))},dependencies:[_e.Fj,_e.JJ,_e.On,Xe.G,On,Dn,Mc,c.Ov,ee.C],encapsulation:2});const Rc=[{path:"",component:Gc},{path:":serviceAccountId",component:kc,children:[{path:"",pathMatch:"full",redirectTo:"projects"},{path:"access",component:_c},{path:"people",component:bc},{path:"projects",component:Sc}]}];class Bc{}Bc.ɵfac=function(e){return new(e||Bc)},Bc.ɵmod=u.oAB({type:Bc}),Bc.ɵinj=u.cJS({imports:[s.Bz.forChild(Rc),s.Bz]});class $c{}$c.ɵfac=function(e){return new(e||$c)},$c.ɵmod=u.oAB({type:$c}),$c.ɵinj=u.cJS({imports:[w,Bc,Zi.J]});var Fc=n(25679);class Vc extends Error{constructor(e){super(e)}}class Kc{}class Hc{}class Wc{}class Xc extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.name=this.getResponseProperty("Name")}}class es extends Je.c{constructor(e){super(e),this.id=this.getResponseProperty("Id"),this.key=this.getResponseProperty("Key"),this.value=this.getResponseProperty("Value"),this.note=this.getResponseProperty("Note");const t=this.getResponseProperty("ProjectIds");this.projectIds=null==t?void 0:t.map((e=>e.toString()))}}class ts extends Je.c{constructor(e){super(e);const t=this.getResponseProperty("Projects"),n=this.getResponseProperty("Secrets");this.projects=null==t?void 0:t.map((e=>new Xc(e))),this.secrets=null==n?void 0:n.map((e=>new es(e)))}}class ns{}class is{}class os{}var cs=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class ss{constructor(e,t,n,i){this.apiService=e,this.encryptService=t,this.cryptoService=n,this.i18nService=i}export(e,t="json"){return cs(this,void 0,void 0,(function*(){const n=yield this.apiService.send("GET","/sm/"+e+"/export?format="+t,null,!0,!0);return JSON.stringify(yield this.decryptExport(e,new ts(n)),null,"  ")}))}import(e,t){return cs(this,void 0,void 0,(function*(){let n={};try{n=JSON.parse(t);const i=yield this.encryptImport(e,n);yield this.apiService.send("POST","/sm/"+e+"/import",i,!0,!0)}catch(i){const e=new Fc.i(i,400);return this.handleServerError(e,n)}}))}encryptImport(e,t){return cs(this,void 0,void 0,(function*(){const n=new Kc;try{const i=yield this.cryptoService.getOrgKey(e);n.projects=[],n.secrets=[],n.projects=yield Promise.all(t.projects.map((e=>cs(this,void 0,void 0,(function*(){const t=new Hc;return t.id=e.id,t.name=yield this.encryptService.encrypt(e.name,i),t}))))),n.secrets=yield Promise.all(t.secrets.map((e=>cs(this,void 0,void 0,(function*(){const t=new Wc;return[t.key,t.value,t.note]=yield Promise.all([this.encryptService.encrypt(e.key,i),this.encryptService.encrypt(e.value,i),this.encryptService.encrypt(e.note,i)]),t.id=e.id,t.projectIds=e.projectIds,t})))))}catch(i){return null}return n}))}decryptExport(e,t){return cs(this,void 0,void 0,(function*(){const n=yield this.cryptoService.getOrgKey(e),i=new ns;return i.projects=[],i.secrets=[],i.projects=yield Promise.all(t.projects.map((e=>cs(this,void 0,void 0,(function*(){const t=new is;return t.id=e.id,t.name=yield this.encryptService.decryptToUtf8(new ke._(e.name),n),t}))))),i.secrets=yield Promise.all(t.secrets.map((e=>cs(this,void 0,void 0,(function*(){const t=new os;return[t.key,t.value,t.note]=yield Promise.all([this.encryptService.decryptToUtf8(new ke._(e.key),n),this.encryptService.decryptToUtf8(new ke._(e.value),n),this.encryptService.decryptToUtf8(new ke._(e.note),n)]),t.id=e.id,t.projectIds=e.projectIds,t}))))),i}))}handleServerError(e,t){if(null==e.validationErrors)return new Vc(e.message);const n=new Vc;return n.lines=[],Object.entries(e.validationErrors).forEach((([e,i],o)=>{let c,s;const r=Number(e.match(/[0-9]+/)[0]);switch(e.match(/^\w+/)[0]){case"Projects":c=t.projects[r],s="Project";break;case"Secrets":c=t.secrets[r],s="Secret";break;default:return}n.lines.push({id:r+1,type:"Project"==s?"Project":"Secret",key:c.key,errorMessage:i.length>0?i[0]:""})})),n}}ss.ɵfac=function(e){return new(e||ss)(u.LFG(Me.s),u.LFG(Qe.U),u.LFG(Ee.$),u.LFG(Be.D))},ss.ɵprov=u.Yz7({token:ss,factory:ss.ɵfac,providedIn:"root"});var rs=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class as{constructor(e){this.i18nService=e}getFileName(e=null,t="json"){return rs(this,void 0,void 0,(function*(){const n=yield(0,Vi.z)(this.i18nService.locale$),i=(0,c.p6)(new Date,"yyyyMMddHHmmss",n);return"bitwarden"+(e?"_"+e:"")+"_export_"+i+"."+t}))}}as.ɵfac=function(e){return new(e||as)(u.LFG(Be.D))},as.ɵprov=u.Yz7({token:as,factory:as.ɵfac,providedIn:"root"});var us=n(86290),ls=n(27885),ds=n(53707),ps=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function hs(e,t){if(1&e&&(u.TgZ(0,"option",7),u._uU(1),u.qZA()),2&e){const e=t.$implicit,n=t.index;u.Q6J("value",n),u.xp6(1),u.hij("\n        ",e.name,"\n      ")}}class gs{constructor(e,t,n,i,o,c,s,r,a){this.route=e,this.i18nService=t,this.organizationService=n,this.platformUtilsService=i,this.smPortingService=o,this.fileDownloadService=c,this.logService=s,this.modalService=r,this.secretsManagerApiService=a,this.destroy$=new he.x,this.exportFormats=[{name:"Bitwarden (json)",fileExtension:"json"}],this.formGroup=new _e.cw({format:new _e.NI(0,[_e.kI.required])}),this.submit=()=>ps(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;(yield this.verifyUser())&&(yield this.doExport())}))}ngOnInit(){return ps(this,void 0,void 0,(function*(){this.route.params.pipe((0,me.w)((e=>ps(this,void 0,void 0,(function*(){return yield this.organizationService.get(e.organizationId)})))),(0,ve.R)(this.destroy$)).subscribe((e=>{this.orgName=e.name,this.orgId=e.id})),this.formGroup.get("format").disable()}))}ngOnDestroy(){return ps(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete()}))}doExport(){return ps(this,void 0,void 0,(function*(){const e=this.exportFormats[this.formGroup.get("format").value].fileExtension,t=yield this.secretsManagerApiService.export(this.orgId,e);yield this.downloadFile(t,e),this.platformUtilsService.showToast("success",null,this.i18nService.t("dataExportSuccess"))}))}downloadFile(e,t){return ps(this,void 0,void 0,(function*(){const n=yield this.smPortingService.getFileName(null,t);this.fileDownloadService.download({fileName:n,blobData:e,blobOptions:{type:"text/plain"}})}))}verifyUser(){const e=this.modalService.open(Ho.i,{allowMultipleModals:!0,data:{confirmDescription:"exportWarningDesc",confirmButtonText:"exportVault",modalTitle:"confirmVaultExport"}});if(null!=e)return e.onClosedPromise()}}function vs(e,t){if(1&e&&(u.TgZ(0,"tr",8),u._uU(1,"\n          "),u.TgZ(2,"td",9),u._uU(3),u.qZA(),u._uU(4,"\n          "),u.TgZ(5,"td",3),u._uU(6),u.qZA(),u._uU(7,"\n        "),u.qZA()),2&e){const e=t.$implicit;u.xp6(3),u.lnq("[",e.id,"] [",e.type,"] ",e.key,""),u.xp6(3),u.Oqu(e.errorMessage)}}function fs(e,t){if(1&e&&(u._uU(0,"\n        "),u.YNc(1,vs,8,4,"tr",7),u._uU(2,"\n      ")),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.errorLines)}}gs.ɵfac=function(e){return new(e||gs)(u.Y36(s.gz),u.Y36(Be.D),u.Y36(b.Mn),u.Y36($e.P),u.Y36(as),u.Y36(us._),u.Y36(ls.$),u.Y36(Ko.Z),u.Y36(ss))},gs.ɵcmp=u.Xpm({type:gs,selectors:[["sm-export"]],decls:29,vars:16,consts:[[3,"formGroup","bitSubmit"],[1,"tw-my-4","tw-max-w-xl"],["type","info",3,"title"],[1,"tw-max-w-sm"],["bitInput","","formControlName","format"],[3,"value",4,"ngFor","ngForOf"],["bitButton","","bitFormButton","","type","submit","buttonType","primary"],[3,"value"]],template:function(e,t){1&e&&(u._UZ(0,"sm-header"),u._uU(1,"\n\n"),u.TgZ(2,"form",0),u._uU(3,"\n  "),u.TgZ(4,"div",1),u._uU(5,"\n    "),u.TgZ(6,"app-callout",2),u.ALo(7,"i18n"),u._uU(8),u.ALo(9,"i18n"),u.qZA(),u._uU(10,"\n  "),u.qZA(),u._uU(11,"\n\n  "),u.TgZ(12,"bit-form-field",3),u._uU(13,"\n    "),u.TgZ(14,"bit-label"),u._uU(15),u.ALo(16,"i18n"),u.qZA(),u._uU(17,"\n    "),u.TgZ(18,"select",4),u._uU(19,"\n      "),u.YNc(20,hs,2,2,"option",5),u._uU(21,"\n    "),u.qZA(),u._uU(22,"\n  "),u.qZA(),u._uU(23,"\n\n  "),u.TgZ(24,"button",6),u._uU(25),u.ALo(26,"i18n"),u.qZA(),u._uU(27,"\n"),u.qZA(),u._uU(28,"\n")),2&e&&(u.xp6(2),u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(4),u.s9C("title",u.lcZ(7,7,"exportingOrganizationSecretDataTitle")),u.xp6(2),u.hij("\n      ",u.xi3(9,9,"exportingOrganizationSecretDataDescription",t.orgName),"\n    "),u.xp6(7),u.Oqu(u.lcZ(16,12,"fileFormat")),u.xp6(5),u.Q6J("ngForOf",t.exportFormats),u.xp6(5),u.hij("\n    ",u.lcZ(26,14,"exportData"),"\n  "))},dependencies:[c.sg,_e._Y,_e.YN,_e.Kr,_e.EJ,_e.JJ,_e.JL,_e.sg,_e.u,ds.O,Ve.b,Ke.u,ye.r,We.d,Xe.G,et.u,On,ee.C],encapsulation:2});class ms{constructor(e,t,n){this.dialogRef=e,this.i18nService=t,this.data=n,this.errorLines=n.error.lines}}ms.ɵfac=function(e){return new(e||ms)(u.Y36(Ue.zj),u.Y36(Be.D),u.Y36(Ue.Kt))},ms.ɵcmp=u.Xpm({type:ms,selectors:[["sm-import-error-dialog"]],decls:40,vars:15,consts:[["bitDialogTitle",""],["bitDialogContent",""],["header",""],["bitCell",""],["body",""],["bitDialogFooter",""],["bitButton","","bitDialogClose","","buttonType","primary","type","button"],["bitRow","",4,"ngFor","ngForOf"],["bitRow",""],["bitCell","",1,"tw-break-all"]],template:function(e,t){1&e&&(u.TgZ(0,"bit-dialog"),u._uU(1,"\n  "),u.TgZ(2,"span",0),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"span",1),u._uU(7,"\n    "),u.TgZ(8,"div"),u._uU(9),u.ALo(10,"i18n"),u.qZA(),u._uU(11,"\n    "),u.TgZ(12,"bit-table"),u._uU(13,"\n      "),u.ynx(14,2),u._uU(15,"\n        "),u.TgZ(16,"tr"),u._uU(17,"\n          "),u.TgZ(18,"th",3),u._uU(19),u.ALo(20,"i18n"),u.qZA(),u._uU(21,"\n          "),u.TgZ(22,"th",3),u._uU(23),u.ALo(24,"i18n"),u.qZA(),u._uU(25,"\n        "),u.qZA(),u._uU(26,"\n      "),u.BQk(),u._uU(27,"\n      "),u.YNc(28,fs,3,1,"ng-template",4),u._uU(29,"\n    "),u.qZA(),u._uU(30,"\n  "),u.qZA(),u._uU(31,"\n  "),u.TgZ(32,"div",5),u._uU(33,"\n    "),u.TgZ(34,"button",6),u._uU(35),u.ALo(36,"i18n"),u.qZA(),u._uU(37,"\n  "),u.qZA(),u._uU(38,"\n"),u.qZA(),u._uU(39,"\n")),2&e&&(u.xp6(3),u.hij("\n    ",u.lcZ(4,5,"importError"),"\n  "),u.xp6(6),u.Oqu(u.lcZ(10,7,"resolveTheErrorsBelowAndTryAgain")),u.xp6(10),u.Oqu(u.lcZ(20,9,"name")),u.xp6(4),u.Oqu(u.lcZ(24,11,"description")),u.xp6(12),u.hij("\n      ",u.lcZ(36,13,"ok"),"\n    "))},dependencies:[c.sg,ye.r,Ze.a,be.f,xe.a,Se.Y,Te.v,xe.f,ee.C],encapsulation:2});var ws=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class As{constructor(e,t,n,i,o,c,s,r){this.route=e,this.i18nService=t,this.organizationService=n,this.platformUtilsService=i,this.fileDownloadService=o,this.logService=c,this.secretsManagerPortingApiService=s,this.dialogService=r,this.destroy$=new he.x,this.orgId=null,this.formGroup=new _e.cw({pastedContents:new _e.NI("")}),this.submit=()=>ws(this,void 0,void 0,(function*(){var e;const t=document.getElementById("file"),n=yield this.getImportContents(t,this.formGroup.get("pastedContents").value.trim());if(null!=n)try{const t=yield this.secretsManagerPortingApiService.import(this.orgId,n);if((null===(e=null==t?void 0:t.lines)||void 0===e?void 0:e.length)>0)return void this.openImportErrorDialog(t);if(null!=t)return void this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("errorReadingImportFile"));this.platformUtilsService.showToast("success",null,this.i18nService.t("importSuccess")),this.clearForm()}catch(i){this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("errorReadingImportFile")),this.logService.error(i)}else this.platformUtilsService.showToast("error",this.i18nService.t("errorOccurred"),this.i18nService.t("selectFile"))}))}ngOnInit(){return ws(this,void 0,void 0,(function*(){this.route.params.pipe((0,ve.R)(this.destroy$)).subscribe((e=>{this.orgId=e.organizationId}))}))}ngOnDestroy(){return ws(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete()}))}getImportContents(e,t){return ws(this,void 0,void 0,(function*(){const n=e.files;if(!(null!=n&&0!==n.length||null!=t&&""!==t))return null;let i=t;if(null!=n&&n.length>0)try{const e=yield this.getFileContents(n[0]);null!=e&&(i=e)}catch(o){this.logService.error(o)}return null==i||""===i?null:i}))}setSelectedFile(e){const t=e.target,n=t.files.length>0?t.files[0]:null;this.selectedFile=n}clearForm(){document.getElementById("file").value="",this.selectedFile=null,this.formGroup.reset({pastedContents:""})}getFileContents(e){return new Promise(((t,n)=>{const i=new FileReader;i.readAsText(e,"utf-8"),i.onload=e=>{t(e.target.result)},i.onerror=()=>{n()}}))}openImportErrorDialog(e){this.dialogService.open(ms,{data:{error:e}})}}As.ɵfac=function(e){return new(e||As)(u.Y36(s.gz),u.Y36(Be.D),u.Y36(b.Mn),u.Y36($e.P),u.Y36(us._),u.Y36(ls.$),u.Y36(ss),u.Y36(Fe.x))},As.ɵcmp=u.Xpm({type:As,selectors:[["sm-import"]],decls:48,vars:26,consts:[[1,"tw-max-w-xl",3,"formGroup","bitSubmit"],[1,"file-selector"],["bitButton","","type","button","buttonType","secondary",3,"click"],["hidden","","bitInput","","type","file","id","file","name","file","accept","application/JSON",1,"form-control-file",3,"change"],["fileSelector",""],[1,"my-4"],["for","pastedContents"],["bitInput","","id","pastedContents","name","FileContents","formControlName","pastedContents",1,"form-control"],["bitButton","","bitFormButton","","type","submit","buttonType","primary"]],template:function(e,t){if(1&e){const e=u.EpF();u._UZ(0,"sm-header"),u._uU(1,"\n\n"),u.TgZ(2,"form",0),u._uU(3,"\n  "),u.TgZ(4,"bit-form-field"),u._uU(5,"\n    "),u.TgZ(6,"bit-label"),u._uU(7),u.ALo(8,"i18n"),u.qZA(),u._uU(9,"\n    "),u.TgZ(10,"div",1),u._uU(11,"\n      "),u.TgZ(12,"button",2),u.NdJ("click",(function(){u.CHM(e);const t=u.MAs(19);return u.KtG(t.click())})),u._uU(13),u.ALo(14,"i18n"),u.qZA(),u._uU(15),u.ALo(16,"i18n"),u.qZA(),u._uU(17,"\n    "),u.TgZ(18,"input",3,4),u.NdJ("change",(function(e){return t.setSelectedFile(e)})),u.qZA(),u._uU(20,"\n    "),u.TgZ(21,"bit-hint"),u._uU(22),u.ALo(23,"i18n"),u.qZA(),u._uU(24,"\n  "),u.qZA(),u._uU(25,"\n  "),u.TgZ(26,"div",5),u._uU(27),u.ALo(28,"i18n"),u.qZA(),u._uU(29,"\n  "),u.TgZ(30,"bit-form-field"),u._uU(31,"\n    "),u.TgZ(32,"bit-label",6),u._uU(33),u.ALo(34,"i18n"),u.qZA(),u._uU(35,"\n    "),u._UZ(36,"textarea",7),u._uU(37,"\n    "),u.TgZ(38,"bit-hint"),u._uU(39),u.ALo(40,"i18n"),u.qZA(),u._uU(41,"\n  "),u.qZA(),u._uU(42,"\n  "),u.TgZ(43,"button",8),u._uU(44),u.ALo(45,"i18n"),u.qZA(),u._uU(46,"\n"),u.qZA(),u._uU(47,"\n")}if(2&e){let e;u.xp6(2),u.Q6J("formGroup",t.formGroup)("bitSubmit",t.submit),u.xp6(5),u.Oqu(u.lcZ(8,10,"fileUpload")),u.xp6(6),u.hij("\n        ",u.lcZ(14,12,"chooseFile"),"\n      "),u.xp6(2),u.hij("\n      ",null!==(e=null==t.selectedFile?null:t.selectedFile.name)&&void 0!==e?e:u.lcZ(16,14,"noFileChosen"),"\n    "),u.xp6(7),u.hij("",u.lcZ(23,16,"acceptedFormats")," Bitwarden (json)"),u.xp6(5),u.hij("\n    ",u.lcZ(28,18,"or"),"\n  "),u.xp6(6),u.Oqu(u.lcZ(34,20,"copyPasteImportContents")),u.xp6(6),u.hij("",u.lcZ(40,22,"acceptedFormats")," Bitwarden (json)"),u.xp6(5),u.hij("\n    ",u.lcZ(45,24,"importData"),"\n  ")}},dependencies:[_e._Y,_e.Fj,_e.JJ,_e.JL,_e.sg,_e.u,Ve.b,Ke.u,ye.r,We.d,Xe.G,et.u,Wi.M,On,ee.C],encapsulation:2});const Us=[{path:"import",component:As,canActivate:[U.G],data:{titleId:"importData",organizationPermissions:e=>e.isAdmin}},{path:"export",component:gs,canActivate:[U.G],data:{titleId:"exportData",organizationPermissions:e=>e.isAdmin}}];class _s{}_s.ɵfac=function(e){return new(e||_s)},_s.ɵmod=u.oAB({type:_s}),_s.ɵinj=u.cJS({imports:[s.Bz.forChild(Us),s.Bz]});class ys{}ys.ɵfac=function(e){return new(e||ys)},ys.ɵmod=u.oAB({type:ys}),ys.ɵinj=u.cJS({providers:[as,ss],imports:[w,_s]});var Zs=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class bs{canActivate(e){return Zs(this,void 0,void 0,(function*(){return!0}))}}bs.ɵfac=function(e){return new(e||bs)},bs.ɵprov=u.Yz7({token:bs,factory:bs.ɵfac});var xs=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class Ss{constructor(e,t,n,i,o){this.dialogRef=e,this.secretService=t,this.i18nService=n,this.platformUtilsService=i,this.data=o,this.delete=()=>xs(this,void 0,void 0,(function*(){yield this.secretService.deleteTrashed(this.data.organizationId,this.data.secretIds);const e=1===this.data.secretIds.length?"hardDeleteSuccessToast":"hardDeletesSuccessToast";this.dialogRef.close(this.data.secretIds),this.platformUtilsService.showToast("success",null,this.i18nService.t(e))}))}get title(){return 1===this.data.secretIds.length?"hardDeleteSecret":"hardDeleteSecrets"}get submitButtonText(){return 1===this.data.secretIds.length?"deleteSecret":"deleteSecrets"}}Ss.ɵfac=function(e){return new(e||Ss)(u.Y36(Ue.zj),u.Y36(At),u.Y36(Be.D),u.Y36($e.P),u.Y36(Ue.Kt))},Ss.ɵcmp=u.Xpm({type:Ss,selectors:[["sm-secret-hard-delete-dialog"]],decls:23,vars:15,consts:[["bitDialogTitle",""],["bitDialogContent",""],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"bit-simple-dialog"),u._uU(1,"\n  "),u.TgZ(2,"span",0),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"span",1),u._uU(7),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.qZA(),u._uU(10,"\n  "),u.TgZ(11,"div",2),u._uU(12,"\n    "),u.TgZ(13,"button",3),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"button",4),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n  "),u.qZA(),u._uU(21,"\n"),u.qZA(),u._uU(22,"\n")),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,5,t.title)),u.xp6(4),u.hij("\n    ",1===t.data.secretIds.length?u.lcZ(8,7,"hardDeleteSecretConfirmation"):u.lcZ(9,9,"hardDeleteSecretsConfirmation"),"\n  "),u.xp6(6),u.Q6J("bitAction",t.delete),u.xp6(1),u.hij("\n      ",u.lcZ(15,11,t.submitButtonText),"\n    "),u.xp6(4),u.hij("\n      ",u.lcZ(19,13,"close"),"\n    "))},dependencies:[Ut.Q,ye.r,_t.r,be.f,ee.C],encapsulation:2});var Ts=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class Is{constructor(e,t,n,i,o){this.dialogRef=e,this.secretService=t,this.i18nService=n,this.platformUtilsService=i,this.data=o,this.restore=()=>Ts(this,void 0,void 0,(function*(){let e="";yield this.secretService.restoreTrashed(this.data.organizationId,this.data.secretIds),e=1===this.data.secretIds.length?"secretRestoredSuccessToast":"secretsRestoredSuccessToast",this.dialogRef.close(this.data.secretIds),this.platformUtilsService.showToast("success",null,this.i18nService.t(e))}))}get title(){return 1===this.data.secretIds.length?"restoreSecret":"restoreSecrets"}}Is.ɵfac=function(e){return new(e||Is)(u.Y36(Ue.zj),u.Y36(At),u.Y36(Be.D),u.Y36($e.P),u.Y36(Ue.Kt))},Is.ɵcmp=u.Xpm({type:Is,selectors:[["sm-secret-restore-dialog"]],decls:23,vars:15,consts:[["bitDialogTitle",""],["bitDialogContent",""],["bitDialogFooter","",1,"tw-flex","tw-gap-2"],["type","button","bitButton","","buttonType","primary",3,"bitAction"],["type","button","bitButton","","buttonType","secondary","bitDialogClose",""]],template:function(e,t){1&e&&(u.TgZ(0,"bit-simple-dialog"),u._uU(1,"\n  "),u.TgZ(2,"span",0),u._uU(3),u.ALo(4,"i18n"),u.qZA(),u._uU(5,"\n  "),u.TgZ(6,"span",1),u._uU(7),u.ALo(8,"i18n"),u.ALo(9,"i18n"),u.qZA(),u._uU(10,"\n  "),u.TgZ(11,"div",2),u._uU(12,"\n    "),u.TgZ(13,"button",3),u._uU(14),u.ALo(15,"i18n"),u.qZA(),u._uU(16,"\n    "),u.TgZ(17,"button",4),u._uU(18),u.ALo(19,"i18n"),u.qZA(),u._uU(20,"\n  "),u.qZA(),u._uU(21,"\n"),u.qZA(),u._uU(22,"\n")),2&e&&(u.xp6(3),u.Oqu(u.lcZ(4,5,t.title)),u.xp6(4),u.hij("\n    ",1===t.data.secretIds.length?u.lcZ(8,7,"restoreSecretPrompt"):u.lcZ(9,9,"restoreSecretsPrompt"),"\n  "),u.xp6(6),u.Q6J("bitAction",t.restore),u.xp6(1),u.hij("\n      ",u.lcZ(15,11,t.title),"\n    "),u.xp6(4),u.hij("\n      ",u.lcZ(19,13,"close"),"\n    "))},dependencies:[Ut.Q,ye.r,_t.r,be.f,ee.C],encapsulation:2});var Ps=function(e,t,n,i){return new(n||(n=Promise))((function(o,c){function s(e){try{a(i.next(e))}catch(t){c(t)}}function r(e){try{a(i.throw(e))}catch(t){c(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};class qs{constructor(e,t,n){this.route=e,this.secretService=t,this.dialogService=n}ngOnInit(){this.secrets$=this.secretService.secret$.pipe((0,fe.O)(null),(0,Ao.V)(this.route.params),(0,me.w)((([e,t])=>Ps(this,void 0,void 0,(function*(){return this.organizationId=t.organizationId,yield this.getSecrets()})))))}getSecrets(){return Ps(this,void 0,void 0,(function*(){return yield this.secretService.getTrashedSecrets(this.organizationId)}))}openDeleteSecret(e){const t=e.map((e=>e.id));this.dialogService.open(Ss,{data:{secretIds:t,organizationId:this.organizationId}})}openRestoreSecret(e){this.dialogService.open(Is,{data:{secretIds:e,organizationId:this.organizationId}})}}qs.ɵfac=function(e){return new(e||qs)(u.Y36(s.gz),u.Y36(At),u.Y36(Fe.x))},qs.ɵcmp=u.Xpm({type:qs,selectors:[["sm-trash"]],decls:13,vars:10,consts:[["type","warning",3,"title"],[3,"secrets","trash","deleteSecretsEvent","restoreSecretsEvent"]],template:function(e,t){1&e&&(u.TgZ(0,"sm-header"),u._uU(1,"\n  "),u._UZ(2,"sm-new-menu"),u._uU(3,"\n"),u.qZA(),u._uU(4,"\n"),u.TgZ(5,"bit-callout",0),u.ALo(6,"i18n"),u._uU(7),u.ALo(8,"i18n"),u.qZA(),u._uU(9,"\n"),u.TgZ(10,"sm-secrets-list",1),u.NdJ("deleteSecretsEvent",(function(e){return t.openDeleteSecret(e)}))("restoreSecretsEvent",(function(e){return t.openRestoreSecret(e)})),u.ALo(11,"async"),u.qZA(),u._uU(12,"\n")),2&e&&(u.xp6(5),u.Q6J("title",u.lcZ(6,4,"warning")),u.xp6(2),u.Oqu(u.lcZ(8,6,"trashCleanupWarning")),u.xp6(3),u.Q6J("secrets",u.lcZ(11,8,t.secrets$))("trash",!0))},dependencies:[He.O,On,Dn,An,c.Ov,ee.C],encapsulation:2});const js=[{path:"",component:qs}];class ks{}ks.ɵfac=function(e){return new(e||ks)},ks.ɵmod=u.oAB({type:ks}),ks.ɵinj=u.cJS({imports:[s.Bz.forChild(js),s.Bz]});class Cs{}Cs.ɵfac=function(e){return new(e||Cs)},Cs.ɵmod=u.oAB({type:Cs}),Cs.ɵinj=u.cJS({imports:[w,ks]});const Ls=[(0,_.M)("secretsManager",{path:":organizationId",component:y,canActivate:[A.a,U.G,bs],data:{organizationPermissions:e=>e.canAccessSecretsManager},children:[{path:"",component:le,outlet:"sidebar"},{path:"secrets",loadChildren:()=>Vo,data:{titleId:"secrets"}},{path:"projects",loadChildren:()=>Go,data:{titleId:"projects"}},{path:"service-accounts",loadChildren:()=>$c,data:{titleId:"serviceAccounts"}},{path:"trash",loadChildren:()=>Cs,data:{titleId:"trash"}},{path:"settings",loadChildren:()=>ys},{path:"",loadChildren:()=>yi,pathMatch:"full"}]})];class Os{}Os.ɵfac=function(e){return new(e||Os)},Os.ɵmod=u.oAB({type:Os}),Os.ɵinj=u.cJS({imports:[s.Bz.forChild(Ls),s.Bz]});class Ds{}Ds.ɵfac=function(e){return new(e||Ds)},Ds.ɵmod=u.oAB({type:Ds}),Ds.ɵinj=u.cJS({providers:[bs],imports:[i.m,w,Os,p]})}}]);
//# sourceMappingURL=700.a8e91373502fff6fe4ab.js.map