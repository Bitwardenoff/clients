<div
  *ngIf="secrets.length == 0"
  class="tw-mx-auto tw-flex tw-max-w-xs tw-flex-col tw-items-center tw-justify-center tw-pt-6 tw-text-center"
>
  <img class="no-items-image" aria-hidden="true" />
  <h3 class="tw-font-semibold">
    {{ "secretsEmptyListTitle" | i18n }}
  </h3>
  <p>{{ "secretsEmptyListMessage" | i18n }}</p>
  <div class="tw-space-x-2">
    <button bitButton buttonType="secondary" (click)="newSecretEvent.emit()">
      <i class="bwi bwi-plus" aria-hidden="true"></i>
      {{ "newSecret" | i18n }}
    </button>
    <button bitButton buttonType="secondary" (click)="importSecretsEvent.emit()">
      <i class="bwi bwi-save tw-rotate-180" aria-hidden="true"></i>
      {{ "importSecrets" | i18n }}
    </button>
  </div>
</div>

<bit-table *ngIf="secrets.length >= 1">
  <ng-container header>
    <tr>
      <th bitCell class="tw-w-0">
        <input
          type="checkbox"
          (change)="$event ? toggleAll() : null"
          [checked]="selection.hasValue() && isAllSelected()"
          [indeterminate]="selection.hasValue() && !isAllSelected()"
        />
      </th>
      <th bitCell>{{ "name" | i18n }}</th>
      <th bitCell>{{ "projects" | i18n }}</th>
      <th bitCell>{{ "lastEdited" | i18n }}</th>
      <th bitCell class="tw-w-0">
        <button
          class="tw-rounded tw-border tw-border-transparent tw-bg-transparent tw-text-main hover:tw-border-secondary-700 focus:tw-border-secondary-700"
          [bitMenuTriggerFor]="tableMenu"
        >
          <i class="bwi bwi-ellipsis-v tw-text-xl" aria-hidden="true"></i>
        </button>
      </th>
    </tr>
  </ng-container>
  <ng-container body>
    <tr bitRow *ngFor="let secret of secrets">
      <td bitCell>
        <input
          type="checkbox"
          (change)="$event ? selection.toggle(secret.id) : null"
          [checked]="selection.isSelected(secret.id)"
        />
      </td>
      <td bitCell>
        <i class="bwi bwi-key tw-text-xl tw-text-muted" aria-hidden="true"></i>
        {{ secret.name }}
      </td>
      <td bitCell>
        <!-- TODO dynamically add project badge associated with specific secret once projects are implemented-->
        <span bitBadge badgeType="secondary"> web app </span>
      </td>
      <td bitCell>{{ secret.revisionDate | date: "medium" }}</td>
      <td bitCell>
        <button
          class="tw-rounded tw-border tw-border-transparent tw-bg-transparent tw-text-main hover:tw-border-secondary-700 focus:tw-border-secondary-700"
          [bitMenuTriggerFor]="secretMenu"
        >
          <i class="bwi bwi-ellipsis-v tw-text-xl" aria-hidden="true"></i>
        </button>
      </td>

      <bit-menu #secretMenu>
        <button type="button" bitMenuItem (click)="this.editSecretEvent.emit(secret.id)">
          <i class="bwi bwi-fw bwi-pencil tw-text-xl" aria-hidden="true"></i>
          {{ "editSecret" | i18n }}
        </button>
        <button type="button" bitMenuItem (click)="this.copySecretNameEvent.emit(secret.id)">
          <i class="bwi bwi-fw bwi-clone tw-text-xl" aria-hidden="true"></i>
          {{ "copySecretName" | i18n }}
        </button>
        <button type="button" bitMenuItem (click)="this.copySecretValueEvent.emit(secret.id)">
          <i class="bwi bwi-fw bwi-clone tw-text-xl" aria-hidden="true"></i>
          {{ "copySecretValue" | i18n }}
        </button>
        <button type="button" bitMenuItem (click)="this.projectsEvent.emit(secret.id)">
          <i class="bwi bwi-fw bwi-sitemap tw-text-xl" aria-hidden="true"></i>
          {{ "projects" | i18n }}
        </button>
        <button type="button" bitMenuItem (click)="this.deleteSecretEvent.emit(secret.id)">
          <i class="bwi bwi-fw bwi-trash tw-text-xl tw-text-danger" aria-hidden="true"></i>
          <span class="tw-text-danger">{{ "deleteSecret" | i18n }}</span>
        </button>
      </bit-menu>
    </tr>
  </ng-container>
</bit-table>

<bit-menu #tableMenu>
  <button type="button" bitMenuItem>
    <i class="bwi bwi-fw bwi-sitemap tw-text-xl" aria-hidden="true"></i>
    {{ "projects" | i18n }}
  </button>
  <button type="button" bitMenuItem>
    <i class="bwi bwi-fw bwi-trash tw-text-xl tw-text-danger" aria-hidden="true"></i>
    <span class="tw-text-danger">{{ "deleteSecrets" | i18n }}</span>
  </button>
</bit-menu>
