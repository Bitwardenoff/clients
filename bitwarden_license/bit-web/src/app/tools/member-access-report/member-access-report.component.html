<ng-container>
  <app-header></app-header>

  <p bitTypography="body1">
    Audit organization member access across groups, collections, and collection items. The CSV
    export provides a detailed breakdown per member, including information on collection permissions
    and account configurations.
  </p>

  <div class="tw-flex tw-my-8">
    <bit-search
      [(ngModel)]="searchText"
      [placeholder]="'search' | i18n"
      class="tw-w-80 tw-mr-2"
    ></bit-search>

    <button type="button" bitButton>
      <span>{{ "export" | i18n }}</span>
      <i class="bwi bwi-fw bwi-sign-in" aria-hidden="true"></i>
    </button>
  </div>
  <bit-table [dataSource]="dataSource" class="tw-mt-2">
    <ng-container header>
      <tr>
        <th bitCell bitSortable="name" default>Members</th>
        <th bitCell bitSortable="groups">Groups</th>
        <th bitCell bitSortable="collections">Collections</th>
        <th bitCell bitSortable="items">Items</th>
      </tr>
    </ng-container>
    <ng-template body let-rows$>
      <tr bitRow *ngFor="let r of rows$ | async">
        <td bitCell>
          <div class="tw-flex tw-items-center">
            <bit-avatar size="small" [text]="r.name" class="tw-mr-3"></bit-avatar>
            <div class="tw-flex tw-flex-col">
              <button type="button" bitLink>
                {{ r.name }}
              </button>

              <div class="tw-text-sm tw-mt-1 tw-text-muted">
                {{ r.email }}
              </div>
            </div>
          </div>
        </td>
        <td bitCell class="tw-text-muted">{{ r.groups }}</td>
        <td bitCell class="tw-text-muted">{{ r.collections }}</td>
        <td bitCell class="tw-text-muted">{{ r.items }}</td>
      </tr>
    </ng-template>
  </bit-table>
</ng-container>
