<popup-page>
  <popup-header slot="header" [pageTitle]="'attachments' | i18n" showBackButton>
    <app-pop-out slot="end" />
  </popup-header>

  <app-cipher-attachments
    *ngIf="cipherId"
    [cipherId]="cipherId"
    (formStatusChange)="attachmentFormStatus = $event"
    (formDisabled)="disabled = $event"
    (formLoading)="loading = $event"
    (onUploadSuccess)="navigateToEditScreen()"
  ></app-cipher-attachments>

  <popup-footer slot="footer">
    <button
      bitButton
      bitFormButton
      type="submit"
      buttonType="primary"
      [attr.form]="attachmentFormId"
      [disabled]="disabled || attachmentFormStatus !== 'VALID'"
      [loading]="loading"
    >
      {{ "upload" | i18n }}
    </button>
  </popup-footer>
</popup-page>
