<ng-container *ngIf="loading">
  <i
    class="bwi bwi-spinner bwi-spin text-muted"
    title="{{ 'loading' | i18n }}"
    aria-hidden="true"
  ></i>
  <span class="sr-only">{{ "loading" | i18n }}</span>
</ng-container>

<div class="tw-container tw-mx-auto" *ngIf="!loading">
  <div
    class="tw-mx-auto tw-mt-5 tw-flex tw-max-w-lg tw-flex-col tw-items-center tw-justify-center tw-p-8"
  >
    <div class="tw-mb-6">
      <img class="logo logo-themed" alt="Bitwarden" />
    </div>

    <div
      class="tw-w-full tw-rounded-md tw-border tw-border-solid tw-border-secondary-300 tw-bg-background tw-p-6"
    >
      <ng-container *ngIf="approvalRequired">
        <h2 bitTypography="h2" class="tw-mb-6">{{ "loginInitiated" | i18n }}</h2>

        <p bitTypography="body1" class="tw-mb-6">
          {{ "deviceApprovalRequired" | i18n }}
        </p>

        <form [formGroup]="rememberDeviceForm">
          <bit-form-control>
            <input type="checkbox" bitCheckbox formControlName="rememberDevice" />
            <bit-label>{{ "rememberThisDevice" | i18n }} </bit-label>
            <bit-hint bitTypography="body2">{{ "uncheckIfPublicDevice" | i18n }}</bit-hint>
          </bit-form-control>
        </form>

        <button
          *ngIf="showApproveFromOtherDeviceBtn"
          (click)="approveFromOtherDevice()"
          bitButton
          type="button"
          buttonType="primary"
          block
          [ngClass]="{ 'tw-mb-3': showReqAdminApprovalBtn || showApproveWithMasterPasswordBtn }"
          [appA11yTitle]="'approveFromYourOtherDevice' | i18n"
        >
          {{ "approveFromYourOtherDevice" | i18n }}
        </button>

        <button
          *ngIf="showReqAdminApprovalBtn"
          (click)="requestAdminApproval()"
          bitButton
          type="button"
          buttonType="secondary"
          block
          [ngClass]="{ 'tw-mb-3': showApproveWithMasterPasswordBtn }"
          [appA11yTitle]="'requestAdminApproval' | i18n"
        >
          {{ "requestAdminApproval" | i18n }}
        </button>

        <button
          *ngIf="showApproveWithMasterPasswordBtn"
          (click)="approveWithMasterPassword()"
          bitButton
          type="button"
          buttonType="secondary"
          block
          class="tw-mb-6"
          [appA11yTitle]="'approveWithMasterPassword' | i18n"
        >
          {{ "approveWithMasterPassword" | i18n }}
        </button>
      </ng-container>

      <ng-container *ngIf="!approvalRequired">
        <h2 bitTypography="h2" class="tw-mb-6">{{ "loggedIn" | i18n }}</h2>

        <form [formGroup]="rememberDeviceForm">
          <bit-form-control>
            <input type="checkbox" bitCheckbox formControlName="rememberDevice" />
            <bit-label>{{ "rememberThisDevice" | i18n }} </bit-label>
            <bit-hint bitTypography="body2">{{ "uncheckIfPublicDevice" | i18n }}</bit-hint>
          </bit-form-control>
        </form>

        <button
          bitButton
          type="button"
          buttonType="primary"
          block
          class="tw-mb-6"
          [bitAction]="autoEnroll"
        >
          {{ "continue" | i18n }}
        </button>
      </ng-container>
      <ng-container> </ng-container>

      <hr class="tw-mb-6 tw-mt-0" />

      <div class="tw-m-0 tw-text-sm">
        <p class="tw-mb-1">{{ "loggingInAs" | i18n }} {{ userEmail }}</p>
        <a [routerLink]="[]" (click)="logOut()">{{ "notYou" | i18n }}</a>
      </div>
    </div>
  </div>
</div>
