<div *ngIf="!useTrialStepper" class="md:tw-min-w-[43rem]">
  <app-register-form
    [queryParamEmail]="email"
    [enforcedPolicyOptions]="enforcedPolicyOptions"
    [referenceDataValue]="referenceData"
  ></app-register-form>
</div>
<div *ngIf="useTrialStepper" class="md:tw-min-w-[43rem]">
  <app-vertical-stepper #stepper linear (selectionChange)="stepSelectionChange($event)">
    <app-vertical-step label="Create Account" [editable]="false" [subLabel]="email">
      <app-register-form
        [isInTrialFlow]="true"
        (createdAccount)="createdAccount($event)"
        [referenceDataValue]="referenceData"
      ></app-register-form>
    </app-vertical-step>
    <app-vertical-step label="Organization Information" [subLabel]="orgInfoSubLabel">
      <app-org-info [nameOnly]="true" [formGroup]="orgInfoFormGroup"></app-org-info>
      <button
        type="button"
        bitButton
        buttonType="primary"
        [disabled]="orgInfoFormGroup.get('name').invalid"
        (click)="conditionallyCreateOrganization()"
      >
        {{ "next" | i18n }}
      </button>
    </app-vertical-step>
    <app-vertical-step label="Billing" [subLabel]="billingSubLabel" *ngIf="!isSecretsManagerFree">
      <app-trial-billing-step
        *ngIf="stepper.selectedIndex === 2"
        [organizationInfo]="{
          name: orgInfoFormGroup.get('name').value,
          email: orgInfoFormGroup.get('email').value,
          type: trialOrganizationType
        }"
        [subscriptionProduct]="
          isSecretsManager()
            ? SubscriptionProduct.SecretsManager
            : SubscriptionProduct.PasswordManager
        "
        (steppedBack)="previousStep()"
        (organizationCreated)="createdOrganization($event)"
      >
      </app-trial-billing-step>
    </app-vertical-step>
    <app-vertical-step label="Confirmation Details" [applyBorder]="false">
      <app-trial-confirmation-details
        [email]="email"
        [orgLabel]="orgLabel"
        [product]="this.product"
      ></app-trial-confirmation-details>
      <div class="tw-mb-3 tw-flex">
        <button type="button" bitButton buttonType="primary" (click)="getStartedNavigation()">
          {{ "getStarted" | i18n | titlecase }}
        </button>
        <button
          type="button"
          bitButton
          buttonType="secondary"
          (click)="inviteUsersNavigation()"
          class="tw-ml-3 tw-inline-flex tw-items-center tw-px-3"
        >
          {{ "inviteUsers" | i18n }}
        </button>
      </div>
    </app-vertical-step>
  </app-vertical-stepper>
</div>
