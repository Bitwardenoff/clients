<form [formGroup]="formGroup" (ngSubmit)="submit()">
  <bit-dialog *ngIf="!loading; else spinner">
    <span bitDialogTitle>
      <ng-container *ngIf="collection; else newCollectionTitle">
        {{ "editCollection" | i18n }}
        <span class="tw-text-sm tw-normal-case tw-text-muted">{{ collection.name }}</span>
      </ng-container>
      <ng-template #newCollectionTitle>
        {{ "newCollection" | i18n }}
      </ng-template>
    </span>
    <span bitDialogContent>
      <bit-form-field>
        <bit-label>{{ "name" | i18n }}</bit-label>
        <input bitInput formControlName="name" required />
      </bit-form-field>

      <bit-form-field>
        <bit-label>{{ "externalId" | i18n }}</bit-label>
        <input bitInput formControlName="externalId" />
        <bit-hint>{{ "externalIdDesc" | i18n }}</bit-hint>
      </bit-form-field>

      <bit-form-field>
        <bit-label>{{ "nestCollectionUnder" | i18n }}</bit-label>
        <select bitInput formControlName="parent">
          <option [ngValue]="null">-</option>
          <option *ngFor="let collection of nestOptions" [ngValue]="collection.name">
            {{ collection.name }}
          </option>
        </select>
      </bit-form-field>
    </span>
    <div bitDialogFooter class="tw-flex tw-flex-row tw-gap-2">
      <button type="submit" bitButton buttonType="primary">Save</button>
      <button type="button" bitButton buttonType="secondary" (click)="cancel()">Cancel</button>
      <button
        type="button"
        bitIconButton="bwi-trash"
        buttonType="danger"
        class="tw-ml-auto"
        (click)="remove()"
      ></button>
    </div>
  </bit-dialog>
  <ng-template #spinner>
    <i class="bwi bwi-spinner bwi-lg bwi-spin" aria-hidden="true"></i>
  </ng-template>
</form>
