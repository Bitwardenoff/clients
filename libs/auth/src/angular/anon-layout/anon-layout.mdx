import { Meta, Story, Controls } from "@storybook/addon-docs";

import * as stories from "./anon-layout.stories";

<Meta of={stories} />

# AnonLayout Component

The Auth-owned AnonLayoutComponent is to be used for unauthenticated pages, where we don't know who
the user is (this includes viewing a Send).

---

### Incorrect Usage ❌

The AnonLayoutComponent is **not** to be implemented by every component that uses it in that
component's template directly. That is, you will **not** be writing:

```html
<!-- File: example.component.html -->

<auth-anon-layout>
  <div>Example component content</div>
</auth-anon-layout>
```

### Correct Usage ✅

Instead the AnonLayoutComponent is implemented via routable composition, which gives us the
advantages of nested routes in Angular.

To allow for routable composition in clients, Auth also has an AnonLayout**Wrapper**Component which
embeds the AnonLayoutComponent.

For clarity:

- AnonLayoutComponent = the base component - `<auth-anon-layout>`
- AnonLayout**Wrapper**Component = the wrapper to be used in client routing modules

The AnonLayout**Wrapper**Component embeds the AnonLayoutComponent along with the router outlets:

```html
<!-- File: anon-layout-wrapper.component.html -->

<auth-anon-layout>
  <router-outlet></router-outlet>
  <router-outlet slot="secondary" name="secondary"></router-outlet>
</auth-anon-layout>
```

To implement, the developer should not even need to work with the base AnonLayoutComponent directly.
The devoloper simply uses the AnonLayout**Wrapper**Component in `oss-routing.module.ts` to construct
the page via routable composition:

```javascript
// File: oss-routing.module.ts

{
    path: "",
    component: AnonLayoutWrapperComponent, // Wrapper component
    children: [
      {
        path: "sample-route", // replace with your route
        children: [
          {
            path: "",
            component: MyPrimaryComponent, // replace with your component
          },
          {
            path: "",
            component: MySecondaryComponent, // replace with your component (or remove this secondary outlet object entirely if not needed)
            outlet: "secondary",
          },
        ],
        data: {
          pageTitle: "logIn", // example of a translation key from messages.json
          pageSubtitle: "loginWithMasterPassword", // example of a translation key from messages.json
          pageIcon: LockIcon, // example of an icon to pass in
        },
      },
    ],
  },
```

And if the AnonLayout**Wrapper**Component is already being used in your client's routing module,
then your work will be as simple as just adding another child route under the
AnonLayout**Wrapper**Component `children` property.

### Data Properties

In the `oss-routing.module.ts` example above, notice the data properties being passed in:

- For the `pageTitle` and `pageSubtitle` - pass in a translation key from `messages.json`.
- For the `pageIcon` - import an icon into the router file and use the icon directly.

All 3 of these properties are optional.

```javascript
import { LockIcon } from '../lock.icon.ts';

// ...

{
  // ...
  data: {
    pageTitle: "logIn",
    pageSubtitle: "loginWithMasterPassword",
    pageIcon: LockIcon,
  },
}
```

---

<Story of={stories.WithSecondaryContent} />
