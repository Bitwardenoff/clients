<form [formGroup]="verificationForm" [bitSubmit]="submit">
  <bit-dialog>
    <span bitDialogTitle>
      {{
        dialogParams.dialogTitle
          ? (dialogParams.dialogTitle | i18n)
          : ("defaultUserVerificationDialogTitle" | i18n)
      }}</span
    >
    <ng-container bitDialogContent>
      <p bitTypography="body1" *ngIf="dialogParams.dialogBodyText">
        {{ dialogParams.dialogBodyText | i18n }}
      </p>

      <app-callout *ngIf="dialogParams.calloutOptions" [type]="dialogParams.calloutOptions.type">
        {{ dialogParams.calloutOptions.text | i18n }}
      </app-callout>

      <app-user-verification-form-input
        [(invalidSecret)]="invalidSecret"
        formControlName="secret"
        [verificationType]="dialogParams.clientSideOnlyVerification ? 'client' : 'server'"
        (activeClientVerificationOptionChange)="handleActiveClientVerificationOptionChange($event)"
        (biometricsVerificationResultChange)="handleBiometricsVerificationResultChange($event)"
      ></app-user-verification-form-input>
    </ng-container>
    <ng-container bitDialogFooter>
      <!-- Confirm button container -->
      <ng-container
        *ngIf="activeClientVerificationOption !== ActiveClientVerificationOption.Biometrics"
      >
        <!-- Default confirm button -->
        <button
          *ngIf="!dialogParams.confirmButtonOptions"
          type="submit"
          bitButton
          bitFormButton
          buttonType="primary"
        >
          {{ "defaultUserVerificationDialogConfirmBtnText" | i18n }}
        </button>

        <!-- Custom confirm button -->
        <button
          *ngIf="dialogParams.confirmButtonOptions"
          type="submit"
          bitButton
          bitFormButton
          [buttonType]="dialogParams.confirmButtonOptions.type"
        >
          {{ dialogParams.confirmButtonOptions.text | i18n }}
        </button>
      </ng-container>

      <button type="button" bitButton bitFormButton buttonType="secondary" bitDialogClose>
        {{ "cancel" | i18n }}
      </button>
    </ng-container>
  </bit-dialog>
</form>
